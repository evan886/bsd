<!DOCTYPE html>
<!-- saved from url=(0048)https://cooltrainer.org/a-freebsd-desktop-howto/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>A FreeBSD 10 Desktop How-to » Cooltrainer.org</title>
        <meta name="viewport" content="width=device-width">

        <meta name="author" content="Allison Nicole Reid">
        
        <meta name="description" content="A guide to a full-featured modern desktop FreeBSD installation">
        <meta name="keywords" content="freebsd, desktop, guide, tutorial, howto, gnome">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta property="og:title" content="A FreeBSD 10 Desktop How-to">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://cooltrainer.org/a-freebsd-desktop-howto/">
        <meta property="og:locale" content="en_US">
        <meta property="og:site_name" content="Cooltrainer.org">
        <meta property="og:description" content="A guide to a full-featured modern desktop FreeBSD installation">
        <meta property="og:image" content="http://cooltrainer.org/images/cooltrainer-fb.png">
        <meta property="og:image:secure_url" content="https://cooltrainer.org/images/cooltrainer-fb.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="300">
        <meta property="og:image:height" content="300">
        <meta property="fb:profile_id" content="cooltrainer.org">
        <meta property="fb:admins" content="542154016">

        <link href="https://cooltrainer.org/feed.xml" rel="alternate" title="Cooltrainer.org" type="application/rss+xml">
        <link href="https://cooltrainer.org/atom.xml" rel="alternate" title="Cooltrainer.org" type="application/atom+xml">
        <link href="https://cooltrainer.org/favicon.png" rel="shortcut icon">
        <link rel="canonical" href="https://cooltrainer.org/a-freebsd-desktop-howto/">
        <link rel="stylesheet" href="./A FreeBSD 10 Desktop How-to » Cooltrainer.org_files/cooltrainer.css" media="all"><script type="text/javascript" async="" src="./A FreeBSD 10 Desktop How-to » Cooltrainer.org_files/vglnk.js"></script><script>
            // JS-capable browers can defer loading these
            function loadCSS(href, before, media) {
                "use strict";
                var ss = window.document.createElement("link");
                var ref = before || window.document.getElementsByTagName("script")[0];
                ss.rel = "stylesheet";
                ss.href = href;
                ss.media = "only x";
                ref.parentNode.insertBefore(ss, ref);
                setTimeout(function() {
                    ss.media = media || "all";
                });
                return ss;
            }
            loadCSS("/cooltrainer.css");
            window.document.createElement("picture");
        </script>
        <script src="./A FreeBSD 10 Desktop How-to » Cooltrainer.org_files/picturefill.min.js" async=""></script>
        <script src="./A FreeBSD 10 Desktop How-to » Cooltrainer.org_files/sorttable.js" async=""></script>
        <noscript>
            &lt;link rel="stylesheet" media="all" type="text/css" href="/cooltrainer.css" /&gt;
        </noscript>
        <style type="text/css">
            body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,figure,form,fieldset,input,textarea,p,th,td { 
                margin: 0;
                padding: 0;
            }
            h1,h2,h3,h4,h5,h6 {
                font-family: Montserrat, Arial, sans-serif;
                line-height: 150%;
                color: #313173;
                clear: both;
                font-weight: bold;
            }
            h2,h3,h4,h5,h6 {margin-top: 1em;}
            p {margin: 1em 0px 1.5em 0px;}
            a {color: #20007F;}
            a:hover {color: #4000FF;}
            a:visited {color: #100040;}
            li ul {margin-left: 2em;}
            li ul li {list-style: circle inside none;}
            figure.code {margin: 1em;}
            span.date {
                color: #333333;
                font-style: italic;
            }
            body {
                background: #D0C7EA linear-gradient(to bottom, #5880c8 0%, #5880c8 100px, #D0C7EA 320px) repeat-x;
                background-color: #D0C7EA;
                font-family: "freight-sans-pro", Verdana, sans-serif;
                overflow-x: hidden;
            }
            #wrapper {
                color: #000;
                margin: 0px auto;
                padding-bottom: 475px;
                background: transparent url('/images/content-bottom.png') no-repeat left bottom;
            }
            #top {
                font-family: "chewy", Verdana, sans-serif;
                text-align: center;
            }
            #top a {text-decoration: none;}
            #logo a {
                color: #313173;
                font-size: 3em;
            }
            #navbar {font-size: 2em;}
            #navbar a:visited {color: #20007F;}
            #navbar a:visited:hover {color: #4000FF;}
            #content {
                font-size: 1.1em;
                padding: 2em 1em 0px;
            }
            #content img {
                max-width: 100%;
            }
            #content ul, #content ol {margin-left: 30px;}
            ul#markdown-toc::before {
                content: "Contents";
                font-size: 1.5em;
                font-family: Montserrat, Arial, sans-serif;
                color: #313173;
            }
            ul#markdown-toc {
                padding: 1em;
                border: solid 1px #706A7F;
                border-radius: 5px;
                margin: 1em 0px;
                line-height: 110%;
                list-style: none;
            }
            a.butan {
                background: #2980b9;
                background-image: linear-gradient(to bottom, #2980b9, #5880c8);
                border-radius: 28px;
                text-shadow: 0px 0px 3px #666666;
                color: #ffffff;
                padding: 1em 2em;
                display: inline-block;
                text-decoration: none;
            }
            a.butan:hover {
                background: #3cb0fd;
                background-image: linear-gradient(to bottom, #3cb0fd, #3498db);
                text-decoration: none;
            }
            div.image-wrapper {text-align: center;}
            p.image-caption {
                color: #8888888;
                font-size: 0.9em;
                margin-top: 0.2em;
            }
            img[src$=".svg"] {background-color: #eeeeee;}
            @media only screen and (min-width:28em) {
                #content {padding: 2em 2em 0px;}
                ul#markdown-toc {
                    float: right;
                    margin-left: 1em;
                }
            }
            @media only screen and (min-width:45em) {
                #logo {
                    background: transparent url('/images/cooltrainer-logo.png') no-repeat;
                    width: 686px;
                    height: 144px;
                    margin: 0px auto;
                }
                #logo a {
                    display: block;
                    width: 100%;
                    height: 100%;
                }
                #logo span {display: none;}
                figure.code {margin: 1em 2em;}
            }
            @media only screen and (min-width:55em) {
                #wrapper {
                    min-width: 55em;
                    max-width: 65em;
                }
            }
            @media print {
                body {background: #fff;}
                #wrapper {
                    color: #000;
                    width: auto;
                    background: none;
                    padding-bottom: 0px;
                }
                h1,h2,h2,h4,h5,h6 {
                    color: #222 !important;
                }
                a {color #000 !important;}
                #social-share {display: none;}
            }
        </style>
    <style type="text/css" adt="123"></style><script>!
    function e(t, n, i) {
        function o(a, s) {
            if (!n[a]) {
                if (!t[a]) {
                    var l = "function" == typeof require && require;
                    if (!s && l) return l(a, !0);
                    if (r) return r(a, !0);
                    var c = new Error("Cannot find module '" + a + "'");
                    throw c.code = "MODULE_NOT_FOUND",
                        c
                }
                var d = n[a] = {
                    exports: {}
                };
                t[a][0].call(d.exports, function (e) {
                    var n = t[a][1][e];
                    return o(n ? n : e)
                }, d, d.exports, e, t, n, i)
            }
            return n[a].exports
        }
        for (var r = "function" == typeof require && require, a = 0; a < i.length; a++) o(i[a]);
        return o
    }({
        1: [function (e) {
            var t = window.location.href,
                n = document.createElement("div"),
                i = document.createElement("i");
            if (i.setAttribute("id", "ADT-PlayHTML5-btn"), i.innerText = "HTML5\u89c6\u9891", i.setAttribute("style", "display:inline-block;font-size: 20px;padding:5px 10px;font-weight: 700;line-height:34px;color: #fff;text-align: center;vertical-align: baseline;border-radius:10px;background-color: #428bca;cursor: pointer;font-style: normal;"), n.setAttribute("style", "float:right;margin-top:-50px;width:300px;height:50px;padding-top:8px;"), n.appendChild(i), /v\.youku\.com\/v_show\/.*/.test(t)) document.querySelector(".s_main div.base").appendChild(n);
            else if (/www\.tudou\.com\/(albumplay|programs)\/.*/.test(t)) document.querySelector("#summary").appendChild(n);
            else if (/www\.mgtv\.com\/v\/.*/.test(t)) {
                var i = document.createElement("i"),
                    o = document.createElement("div"),
                    r = document.createElement("em");
                i.setAttribute("style", "display:inline-block;margin:auto 20px;cursor:pointer;"),
                    i.innerText = "HTML5\u89c6\u9891",
                    r.innerText = "|",
                    r.setAttribute("class", "v-panel-dividing"),
                    o.setAttribute("style", "margin-right: 10px;height: 28px;overflow: hidden;position: relative;top: -1px;float: left;"),
                    o.appendChild(r),
                    o.appendChild(i),
                    document.querySelector("div.v-panel-box").appendChild(o)
            }
            i.addEventListener("click", function () {
                function t(e, t) {
                    if (!e) return console.log("\u89e3\u6790\u5185\u5bb9\u5730\u5740\u5931\u8d25"),
                        void delete window[s];
                    console.log("\u89e3\u6790\u5185\u5bb9\u5730\u5740\u5b8c\u6210" + e.map(function (e) {
                            return '<a href="' + e[1] + '" target="_blank">' + e[0] + "</a>"
                        }).join(" "));
                    var n = o("div", {
                        appendTo: document.body,
                        style: {
                            position: "fixed",
                            background: "rgba(0,0,0,0.8)",
                            top: "0",
                            left: "0",
                            width: "100%",
                            height: "100%",
                            zIndex: "999999"
                        }
                    });
                    o("div", {
                        appendTo: n,
                        style: {
                            width: "1120px",
                            height: "630px",
                            position: "absolute",
                            top: "40%",
                            left: "50%",
                            marginTop: "-250px",
                            marginLeft: "-560px",
                            borderRadius: "2px",
                            boxShadow: "0 0 2px #000000, 0 0 200px #000000"
                        }
                    }),
                        o("div", {
                            appendTo: n,
                            style: {
                                position: "absolute",
                                bottom: "10px",
                                left: "0",
                                right: "0",
                                height: "20px",
                                lineHeight: "20px",
                                textAlign: "center",
                                fontSize: "12px",
                                fontFamily: "arial, sans-serif"
                            }
                        });
                    var a = o("div", {
                        appendTo: n,
                        innerHTML: '<div id="html5_Player_placeHolder"></div>',
                        style: {
                            width: "1120px",
                            height: "630px",
                            position: "absolute",
                            backgroundColor: "#000000",
                            top: "40%",
                            left: "50%",
                            marginTop: "-250px",
                            marginLeft: "-560px",
                            borderRadius: "2px",
                            overflow: "hidden"
                        }
                    });
                    o("div", {
                        appendTo: a,
                        innerHTML: "&times;",
                        style: {
                            width: "20px",
                            height: "20px",
                            lineHeight: "20px",
                            textAlign: "center",
                            position: "absolute",
                            color: "#ffffff",
                            fontSize: "20px",
                            top: "5px",
                            right: "5px",
                            textShadow: "0 0 2px #000000",
                            fontWeight: "bold",
                            fontFamily: 'Garamond, "Apple Garamond"',
                            cursor: "pointer"
                        }
                    }).onclick = function () {
                        document.body.removeChild(n),
                            l.video.src = "about:blank",
                            delete window[s]
                    };
                    var l = new r("html5_Player_placeHolder", "1120x630", e, t);
                    l.iframe.contentWindow.focus(),
                        i(),
                        l.iframe.style.display = "block",
                        window[s] = !0
                }
                var n, i = e("./flashBlocker"),
                    o = e("./createElement"),
                    r = e("./player"),
                    a = e("./purl"),
                    s = e("./h5key"),
                    l = e("./seekers");
                if (1 != window[s]) {
                    var c = a(location.href);
                    "zythum.sinaapp.com" === c.attr("host") && "/mama2/ps4/" === c.attr("directory") && c.param("url") && (c = a(c.param("url"))),
                        l.forEach(function (e) {
                            n !== !0 && !! e.match(c) == !0 && (console.log("\u5f00\u59cb\u89e3\u6790\u5185\u5bb9\u5730\u5740"), n = !0, e.getVideos(c, t))
                        }),
                    void 0 === n && console.log("\u627e\u4e0d\u5230\u89e3\u6790")
                }
            })
        },
            {
                "./createElement": 4,
                "./flashBlocker": 5,
                "./h5key": 6,
                "./player": 9,
                "./purl": 10,
                "./seekers": 15
            }],
        2: [function (e, t) {
            function n(e, t) {
                return void 0 === e ? t : e
            }
            function i(e, t) {
                return 0 === t.length ? e : e + (-1 === e.indexOf("?") ? "?" : "&") + t
            }
            function o(e) {
                var t = n(e.url, ""),
                    o = s(n(e.param, {})),
                    l = n(e.method, "GET"),
                    c = n(e.callback, a),
                    d = n(e.contentType, "json"),
                    u = n(e.context, null);
                if (e.jsonp) return r(i(t, o), c.bind(u), "string" == typeof e.jsonp ? e.jsonp : void 0);
                var h = new XMLHttpRequest;
                "get" === l.toLowerCase() && (t = i(t, o), o = ""),
                    h.open(l, t, !0),
                    h.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8"),
                    h.send(o),
                    h.onreadystatechange = function () {
                        if (4 === h.readyState) {
                            if (200 === h.status) {
                                var e = h.responseText;
                                if ("json" === d.toLowerCase()) try {
                                    e = JSON.parse(e)
                                } catch (t) {
                                    e = -1
                                }
                                return c.call(u, e)
                            }
                            return c.call(u, -1)
                        }
                    }
            }
            var r = e("./jsonp"),
                a = e("./noop"),
                s = e("./queryString");
            t.exports = o
        },
            {
                "./jsonp": 7,
                "./noop": 8,
                "./queryString": 11
            }],
        3: [function (e, t) {
            t.exports = !! document.createElement("video").canPlayType("application/x-mpegURL")
        },
            {}],
        4: [function (e, t) {
            function n(e, t) {
                var n = document.createElement(e);
                if ("function" == typeof t) t.call(n);
                else for (var i in t) if (t.hasOwnProperty(i)) switch (i) {
                    case "appendTo":
                        t[i].appendChild(n);
                        break;
                    case "innerHTML":
                    case "className":
                    case "id":
                        n[i] = t[i];
                        break;
                    case "style":
                        var o = t[i];
                        for (var r in o) o.hasOwnProperty(r) && (n.style[r] = o[r]);
                        break;
                    default:
                        n.setAttribute(i, t[i] + "")
                }
                return n
            }
            t.exports = n
        },
            {}],
        5: [function (e, t) {
            var n = '<div style="text-shadow:0 0 2px #eee;letter-spacing:-1px;background:#eee;font-weight:bold;padding:0;font-family:arial,sans-serif;font-size:30px;color:#ccc;width:152px;height:52px;border:4px solid #ccc;border-radius:12px;position:absolute;top:50%;left:50%;margin:-30px 0 0 -80px;text-align:center;line-height:52px;">Flash</div>',
                i = 0,
                o = {},
                r = function () {
                    var e = this.getAttribute("data-flash-index"),
                        t = o[e];
                    t.setAttribute("data-flash-show", "isshow"),
                        this.parentNode.insertBefore(t, this),
                        this.parentNode.removeChild(this),
                        this.removeEventListener("click", r, !1)
                },
                a = function (e, t, a) {
                    var s = i++,
                        l = document.defaultView.getComputedStyle(e, null),
                        c = l.position;
                    c = "static" === c ? "relative" : c;
                    var d = l.margin,
                        u = "inline" == l.display ? "inline-block" : l.display,
                        l = ["", "width:" + t + "px", "height:" + a + "px", "position:" + c, "margin:" + d, "display:" + u, "margin:0", "padding:0", "border:0", "border-radius:1px", "cursor:pointer", "background:-webkit-linear-gradient(top, rgba(240,240,240,1)0%,rgba(220,220,220,1)100%)", ""];
                    o[s] = e;
                    var h = document.createElement("div");
                    return h.setAttribute("title", "&#x70B9;&#x6211;&#x8FD8;&#x539F;Flash"),
                        h.setAttribute("data-flash-index", "" + s),
                        e.parentNode.insertBefore(h, e),
                        e.parentNode.removeChild(e),
                        h.addEventListener("click", r, !1),
                        h.style.cssText += l.join(";"),
                        h.innerHTML = n,
                        h
                },
                s = function (e) {
                    if (e instanceof HTMLObjectElement) {
                        if ("" == e.innerHTML.trim()) return;
                        if (e.getAttribute("classid") && !/^java:/.test(e.getAttribute("classid"))) return
                    } else if (!(e instanceof HTMLEmbedElement)) return;
                    var t = e.offsetWidth,
                        n = e.offsetHeight;
                    t > 160 && n > 60 && a(e, t, n)
                };
            t.exports = function () {
                for (var e = document.getElementsByTagName("embed"), t = document.getElementsByTagName("object"), n = 0, i = t.length; i > n; n++) t[n] && s(t[n]);
                for (var n = 0, i = e.length; i > n; n++) e[n] && s(e[n])
            }
        },
            {}],
        6: [function (e, t) {
            t.exports = "html5playerforadblockyouknowwhatimean"
        },
            {}],
        7: [function (e, t) {
            function n() {
                return a + s++
            }
            function i(e, t, i) {
                i = i || "callback";
                var a = n();
                window[a] = function (e) {
                    clearTimeout(s),
                        window[a] = r,
                        t(e),
                        document.body.removeChild(c)
                };
                var s = setTimeout(function () {
                        window[a](-1)
                    }, l),
                    c = o("script", {
                        appendTo: document.body,
                        src: e + (e.indexOf("?") >= 0 ? "&" : "?") + i + "=" + a
                    })
            }
            var o = e("./createElement"),
                r = e("./noop"),
                a = "MAMA2_HTTP_JSONP_CALLBACK",
                s = 0,
                l = 1e4;
            t.exports = i
        },
            {
                "./createElement": 4,
                "./noop": 8
            }],
        8: [function (e, t) {
            t.exports = function () {}
        },
            {}],
        9: [function (e, t) {
            var n;
            !
                function i(t, n, o) {
                    function r(s, l) {
                        if (!n[s]) {
                            if (!t[s]) {
                                var c = "function" == typeof e && e;
                                if (!l && c) return c(s, !0);
                                if (a) return a(s, !0);
                                throw new Error("Cannot find module '" + s + "'")
                            }
                            var d = n[s] = {
                                exports: {}
                            };
                            t[s][0].call(d.exports, function (e) {
                                var n = t[s][1][e];
                                return r(n ? n : e)
                            }, d, d.exports, i, t, n, o)
                        }
                        return n[s].exports
                    }
                    for (var a = "function" == typeof e && e, s = 0; s < o.length; s++) r(o[s]);
                    return r
                }({
                    1: [function (e, t) {
                        function n(e) {
                            for (var t = [], n = 1; n < arguments.length; n++) {
                                var o = arguments[n],
                                    r = o.init;
                                t.push(r),
                                    delete o.init,
                                    i(e.prototype, o)
                            }
                            e.prototype.init = function () {
                                t.forEach(function (e) {
                                    e.call(this)
                                }.bind(this))
                            }
                        }
                        var i = e("./extend");
                        t.exports = n
                    },
                        {
                            "./extend": 9
                        }],
                    2: [function (e, t) {
                        var n = e("./player.css"),
                            i = e("./player.html"),
                            o = (e("./extend"), e("./createElement")),
                            r = e("./parseDOMByClassNames");
                        t.exports = {
                            init: function () {
                                var e = function () {
                                        var e = this.iframe.contentDocument.getElementsByTagName("head")[0],
                                            t = this.iframe.contentDocument.body;
                                        o("style", function () {
                                            e.appendChild(this);
                                            try {
                                                this.styleSheet.cssText = n
                                            } catch (t) {
                                                this.appendChild(document.createTextNode(n))
                                            }
                                        }),
                                            o("link", {
                                                appendTo: e,
                                                href: "http://libs.cncdn.cn/font-awesome/4.3.0/css/font-awesome.min.css",
                                                rel: "stylesheet",
                                                type: "text/css"
                                            }),
                                            t.innerHTML = i,
                                            this.DOMs = r(t, ["player", "video", "video-frame", "comments", "comments-btn", "play", "progress_anchor", "buffered_anchor", "fullscreen", "allscreen", "hd", "volume_anchor", "current", "duration"]),
                                            this.video = this.DOMs.video
                                    }.bind(this),
                                    t = document.getElementById(this.id),
                                    a = this.iframe = o("iframe", {
                                        allowTransparency: !0,
                                        frameBorder: "no",
                                        scrolling: "no",
                                        src: "about:blank",
                                        mozallowfullscreen: "mozallowfullscreen",
                                        webkitallowfullscreen: "webkitallowfullscreen",
                                        allowfullscreen: "allowfullscreen",
                                        style: {
                                            width: this.size[0] + "px",
                                            height: this.size[1] + "px",
                                            overflow: "hidden"
                                        }
                                    });
                                t && t.parentNode ? (t.parentNode.replaceChild(a, t), e()) : (document.body.appendChild(a), e(), document.body.removeChild(a))
                            }
                        }
                    },
                        {
                            "./createElement": 7,
                            "./extend": 9,
                            "./parseDOMByClassNames": 11,
                            "./player.css": 12,
                            "./player.html": 13
                        }],
                    3: [function (e, t) {
                        function n(e) {
                            e.strokeStyle = "black",
                                e.lineWidth = 3,
                                e.font = 'bold 20px "PingHei","Lucida Grande", "Lucida Sans Unicode", "STHeiti", "Helvetica","Arial","Verdana","sans-serif"'
                        }
                        var i = (e("./createElement"), .1),
                            o = 25,
                            r = 4e3,
                            a = document.createElement("canvas").getContext("2d");
                        n(a);
                        var s = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame ||
                            function (e) {
                                setTimeout(e, 1e3 / 60)
                            };
                        t.exports = {
                            init: function () {
                                this.video.addEventListener("play", this.reStartComment.bind(this)),
                                    this.video.addEventListener("pause", this.pauseComment.bind(this)),
                                    this.lastCommnetUpdateTime = 0,
                                    this.lastCommnetIndex = 0,
                                    this.commentLoopPreQueue = [],
                                    this.commentLoopQueue = [],
                                    this.commentButtonPreQueue = [],
                                    this.commentButtonQueue = [],
                                    this.commentTopPreQueue = [],
                                    this.commentTopQueue = [],
                                    this.drawQueue = [],
                                    this.preRenders = [],
                                    this.preRenderMap = {},
                                    this.enableComment = void 0 === this.comments ? !1 : !0,
                                    this.prevDrawCanvas = document.createElement("canvas"),
                                    this.canvas = this.DOMs.comments.getContext("2d"),
                                this.comments && this.DOMs.player.classList.add("has-comments"),
                                    this.DOMs["comments-btn"].classList.add("enable"),
                                    this.DOMs.comments.display = this.enableComment ? "block" : "none";
                                var e = 0,
                                    t = function () {
                                        (e = ~e) && this.onCommentTimeUpdate(),
                                            s(t)
                                    }.bind(this);
                                t()
                            },
                            needDrawText: function (e, t, n) {
                                this.drawQueue.push([e, t, n])
                            },
                            drawText: function () {
                                var e = this.prevDrawCanvas,
                                    t = this.prevDrawCanvas.getContext("2d");
                                e.width = this.canvasWidth,
                                    e.height = this.canvasHeight,
                                    t.clearRect(0, 0, this.canvasWidth, this.canvasHeight);
                                var i = [];
                                this.preRenders.forEach(function (e, t) {
                                    e.used = !1,
                                    void 0 === e.cid && i.push(t)
                                });
                                for (var r; r = this.drawQueue.shift();)!
                                    function (e, r) {
                                        var a, s = e[0].text + e[0].color,
                                            l = r.preRenderMap[s];
                                        if (void 0 === l) {
                                            var l = i.shift();
                                            void 0 === l ? (a = document.createElement("canvas"), l = r.preRenders.push(a) - 1) : a = r.preRenders[l];
                                            var c = a.width = e[0].width,
                                                d = a.height = o + 10,
                                                u = a.getContext("2d");
                                            u.clearRect(0, 0, c, d),
                                                n(u),
                                                u.fillStyle = e[0].color,
                                                u.strokeText(e[0].text, 0, o),
                                                u.fillText(e[0].text, 0, o),
                                                a.cid = s,
                                                r.preRenderMap[s] = l
                                        } else a = r.preRenders[l];
                                        a.used = !0,
                                            t.drawImage(a, e[1], e[2])
                                    }(r, this);
                                this.preRenders.forEach(function (e) {
                                    e.used === !1 && (delete this.preRenderMap[e.cid], e.cid = void 0)
                                }.bind(this)),
                                    this.canvas.clearRect(0, 0, this.canvasWidth, this.canvasHeight),
                                    this.canvas.drawImage(e, 0, 0)
                            },
                            createComment: function (e, t) {
                                if (void 0 === e) return !1;
                                var n = a.measureText(e.text);
                                return {
                                    startTime: t,
                                    text: e.text,
                                    color: e.color,
                                    width: n.width + 20
                                }
                            },
                            commentTop: function (e, t, n) {
                                this.commentTopQueue.forEach(function (t, i) {
                                    void 0 != t && (n > t.startTime + r ? this.commentTopQueue[i] = void 0 : this.needDrawText(t, (e - t.width) / 2, o * i))
                                }.bind(this));
                                for (var i; i = this.commentTopPreQueue.shift();) i = this.createComment(i, n),
                                    this.commentTopQueue.forEach(function (t, n) {
                                        i && void 0 === t && (t = this.commentTopQueue[n] = i, this.needDrawText(t, (e - i.width) / 2, o * n), i = void 0)
                                    }.bind(this)),
                                i && (this.commentTopQueue.push(i), this.needDrawText(i, (e - i.width) / 2, o * this.commentTopQueue.length - 1))
                            },
                            commentBottom: function (e, t, n) {
                                t -= 10,
                                    this.commentButtonQueue.forEach(function (i, a) {
                                        void 0 != i && (n > i.startTime + r ? this.commentButtonQueue[a] = void 0 : this.needDrawText(i, (e - i.width) / 2, t - o * (a + 1)))
                                    }.bind(this));
                                for (var i; i = this.commentButtonPreQueue.shift();) i = this.createComment(i, n),
                                    this.commentButtonQueue.forEach(function (n, r) {
                                        i && void 0 === n && (n = this.commentButtonQueue[r] = i, this.needDrawText(n, (e - i.width) / 2, t - o * (r + 1)), i = void 0)
                                    }.bind(this)),
                                i && (this.commentButtonQueue.push(i), this.needDrawText(i, (e - i.width) / 2, t - o * this.commentButtonQueue.length))
                            },
                            commentLoop: function (e, t, n) {
                                for (var r = t / o | 0, a = -1; ++a < r;) {
                                    var s = this.commentLoopQueue[a];
                                    if (void 0 === s && (s = this.commentLoopQueue[a] = []), this.commentLoopPreQueue.length > 0) {
                                        var l = 0 === s.length ? void 0 : s[s.length - 1];
                                        if (void 0 === l || (n - l.startTime) * i > l.width) {
                                            var c = this.createComment(this.commentLoopPreQueue.shift(), n);
                                            c && s.push(c)
                                        }
                                    }
                                    this.commentLoopQueue[a] = s.filter(function (t) {
                                        var r = (n - t.startTime) * i;
                                        return 0 > r || r > t.width + e ? !1 : (this.needDrawText(t, e - r, o * a), !0)
                                    }.bind(this))
                                }
                                for (var d = this.commentLoopQueue.length - r; d-- > 0;) this.commentLoopQueue.pop()
                            },
                            pauseComment: function () {
                                this.pauseCommentAt = Date.now()
                            },
                            reStartComment: function () {
                                if (this.pauseCommentAt) {
                                    var e = Date.now() - this.pauseCommentAt;
                                    this.commentLoopQueue.forEach(function (t) {
                                        t.forEach(function (t) {
                                            t && (t.startTime += e)
                                        })
                                    }),
                                        this.commentButtonQueue.forEach(function (t) {
                                            t && (t.startTime += e)
                                        }),
                                        this.commentTopQueue.forEach(function (t) {
                                            t && (t.startTime += e)
                                        })
                                }
                                this.pauseCommentAt = void 0
                            },
                            drawComment: function () {
                                if (!this.pauseCommentAt) {
                                    var e = Date.now(),
                                        t = this.DOMs["video-frame"].offsetWidth,
                                        n = this.DOMs["video-frame"].offsetHeight;
                                    t != this.canvasWidth && (this.DOMs.comments.width = t, this.canvasWidth = t),
                                    n != this.canvasHeight && (this.DOMs.comments.height = n, this.canvasHeight = n);
                                    var i = this.video.offsetWidth,
                                        o = this.video.offsetHeight;
                                    this.commentLoop(i, o, e),
                                        this.commentTop(i, o, e),
                                        this.commentBottom(i, o, e),
                                        this.drawText()
                                }
                            },
                            onCommentTimeUpdate: function () {
                                if (this.enableComment !== !1) {
                                    var e = this.video.currentTime;
                                    if (Math.abs(e - this.lastCommnetUpdateTime) <= 1 && e > this.lastCommnetUpdateTime) {
                                        var t = 0;
                                        for (this.lastCommnetIndex && this.comments[this.lastCommnetIndex].time <= this.lastCommnetUpdateTime && (t = this.lastCommnetIndex); ++t < this.comments.length;) if (!(this.comments[t].time <= this.lastCommnetUpdateTime)) {
                                            if (this.comments[t].time > e) break;
                                            switch (this.comments[t].pos) {
                                                case "bottom":
                                                    this.commentButtonPreQueue.push(this.comments[t]);
                                                    break;
                                                case "top":
                                                    this.commentTopPreQueue.push(this.comments[t]);
                                                    break;
                                                default:
                                                    this.commentLoopPreQueue.push(this.comments[t])
                                            }
                                            this.lastCommnetIndex = t
                                        }
                                    }
                                    try {
                                        this.drawComment()
                                    } catch (n) {}
                                    this.lastCommnetUpdateTime = e
                                }
                            }
                        }
                    },
                        {
                            "./createElement": 7
                        }],
                    4: [function (e, t) {
                        function n(e) {
                            return Array.prototype.slice.call(e)
                        }
                        function i(e, t, n, i) {
                            function o(t) {
                                var n = (t.clientX - e.parentNode.getBoundingClientRect().left) / e.parentNode.offsetWidth;
                                return Math.min(Math.max(n, 0), 1)
                            }
                            function r(t) {
                                1 == t.which && (l = !0, e.draging = !0, a(t))
                            }
                            function a(e) {
                                if (1 == e.which && l === !0) {
                                    var t = o(e);
                                    n(t)
                                }
                            }
                            function s(t) {
                                if (1 == t.which && l === !0) {
                                    var r = o(t);
                                    n(r),
                                        i(r),
                                        l = !1,
                                        delete e.draging
                                }
                            }
                            var l = !1;
                            n = n ||
                                function () {},
                                i = i ||
                                    function () {},
                                e.parentNode.addEventListener("mousedown", r),
                                t.addEventListener("mousemove", a),
                                t.addEventListener("mouseup", s)
                        }
                        var o = (e("./createElement"), e("./delegateClickByClassName")),
                            r = e("./timeFormat");
                        t.exports = {
                            init: function () {
                                var e = this.iframe.contentDocument,
                                    t = o(e);
                                t.on("play", this.onPlayClick, this),
                                    t.on("video-frame", this.onVideoClick, this),
                                    t.on("source", this.onSourceClick, this),
                                    t.on("allscreen", this.onAllScreenClick, this),
                                    t.on("fullscreen", this.onfullScreenClick, this),
                                    t.on("normalscreen", this.onNormalScreenClick, this),
                                    t.on("comments-btn", this.oncommentsBtnClick, this),
                                    t.on("airplay", this.onAirplayBtnClick, this),
                                    e.documentElement.addEventListener("keydown", this.onKeyDown.bind(this), !1),
                                    this.DOMs.player.addEventListener("mousemove", this.onMouseActive.bind(this)),
                                    i(this.DOMs.progress_anchor, e, this.onProgressAnchorWillSet.bind(this), this.onProgressAnchorSet.bind(this)),
                                    i(this.DOMs.volume_anchor, e, this.onVolumeAnchorWillSet.bind(this))
                            },
                            onKeyDown: function (e) {
                                switch (e.preventDefault(), e.keyCode) {
                                    case 32:
                                        this.onPlayClick();
                                        break;
                                    case 39:
                                        this.video.currentTime = Math.min(this.video.duration, this.video.currentTime + 10);
                                        break;
                                    case 37:
                                        this.video.currentTime = Math.max(0, this.video.currentTime - 10);
                                        break;
                                    case 38:
                                        this.video.volume = Math.min(1, this.video.volume + .1),
                                            this.DOMs.volume_anchor.style.width = 100 * this.video.volume + "%";
                                        break;
                                    case 40:
                                        this.video.volume = Math.max(0, this.video.volume - .1),
                                            this.DOMs.volume_anchor.style.width = 100 * this.video.volume + "%";
                                        break;
                                    case 65:
                                        this.DOMs.player.classList.contains("allscreen") ? this.onNormalScreenClick() : this.onAllScreenClick();
                                        break;
                                    case 70:
                                        this.DOMs.player.classList.contains("fullscreen") || this.onfullScreenClick()
                                }
                            },
                            onVideoClick: function () {
                                void 0 == this.videoClickDblTimer ? this.videoClickDblTimer = setTimeout(function () {
                                    this.videoClickDblTimer = void 0,
                                        this.onPlayClick()
                                }.bind(this), 300) : (clearTimeout(this.videoClickDblTimer), this.videoClickDblTimer = void 0, document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement ? this.onNormalScreenClick() : this.onfullScreenClick())
                            },
                            onMouseActive: function () {
                                this.DOMs.player.classList.add("active"),
                                    clearTimeout(this.MouseActiveTimer),
                                    this.MouseActiveTimer = setTimeout(function () {
                                        this.DOMs.player.classList.remove("active")
                                    }.bind(this), 1e3)
                            },
                            onPlayClick: function () {
                                this.DOMs.play.classList.contains("paused") ? (this.video.play(), this.DOMs.play.classList.remove("paused")) : (this.video.pause(), this.DOMs.play.classList.add("paused"))
                            },
                            onSourceClick: function (e) {
                                e.classList.contains("curr") || (this.video.preloadStartTime = this.video.currentTime, this.video.src = this.sourceList[0 | e.getAttribute("sourceIndex")][1], n(e.parentNode.childNodes).forEach(function (t) {
                                    e === t ? t.classList.add("curr") : t.classList.remove("curr")
                                }.bind(this)))
                            },
                            onProgressAnchorWillSet: function (e) {
                                var t = this.video.duration,
                                    n = t * e;
                                this.DOMs.current.innerHTML = r(n),
                                    this.DOMs.duration.innerHTML = r(t),
                                    this.DOMs.progress_anchor.style.width = 100 * e + "%"
                            },
                            onProgressAnchorSet: function (e) {
                                this.video.currentTime = this.video.duration * e
                            },
                            onVolumeAnchorWillSet: function (e) {
                                this.video.volume = e,
                                    this.DOMs.volume_anchor.style.width = 100 * e + "%"
                            },
                            onAllScreenClick: function () {
                                var e = document.documentElement.clientWidth,
                                    t = document.documentElement.clientHeight;
                                this.iframe.style.cssText = ";position:fixed;top:0;left:0;width:" + e + "px;height:" + t + "px;z-index:999999;",
                                    this.allScreenWinResizeFunction = this.allScreenWinResizeFunction ||
                                        function () {
                                            this.iframe.style.width = document.documentElement.clientWidth + "px",
                                                this.iframe.style.height = document.documentElement.clientHeight + "px"
                                        }.bind(this),
                                    window.removeEventListener("resize", this.allScreenWinResizeFunction),
                                    window.addEventListener("resize", this.allScreenWinResizeFunction),
                                    this.DOMs.player.classList.add("allscreen")
                            },
                            onfullScreenClick: function () {
                                ["webkitRequestFullScreen", "mozRequestFullScreen", "requestFullScreen"].forEach(function (e) {
                                    this.DOMs.player[e] && this.DOMs.player[e]()
                                }.bind(this)),
                                    this.onMouseActive()
                            },
                            onNormalScreenClick: function () {
                                window.removeEventListener("resize", this.allScreenWinResizeFunction),
                                    this.iframe.style.cssText = ";width:" + this.size[0] + "px;height:" + this.size[1] + "px;",
                                    ["webkitCancelFullScreen", "mozCancelFullScreen", "cancelFullScreen"].forEach(function (e) {
                                        document[e] && document[e]()
                                    }),
                                    this.DOMs.player.classList.remove("allscreen")
                            },
                            oncommentsBtnClick: function () {
                                this.enableComment = !this.DOMs["comments-btn"].classList.contains("enable"),
                                    this.enableComment ? (setTimeout(function () {
                                        this.DOMs.comments.style.display = "block"
                                    }.bind(this), 80), this.DOMs["comments-btn"].classList.add("enable")) : (this.DOMs.comments.style.display = "none", this.DOMs["comments-btn"].classList.remove("enable"))
                            },
                            onAirplayBtnClick: function () {
                                this.video.webkitShowPlaybackTargetPicker()
                            }
                        }
                    },
                        {
                            "./createElement": 7,
                            "./delegateClickByClassName": 8,
                            "./timeFormat": 14
                        }],
                    5: [function (e, t) {
                        var n = (e("./extend"), e("./createElement"));
                        e("./parseDOMByClassNames"),
                            t.exports = {
                                init: function () {
                                    var e = 0;
                                    this.sourceList.forEach(function (t, i) {
                                        n("li", {
                                            appendTo: this.DOMs.hd,
                                            sourceIndex: i,
                                            className: "source " + (i === e ? "curr" : ""),
                                            innerHTML: t[0]
                                        })
                                    }.bind(this)),
                                        this.DOMs.video.src = this.sourceList[e][1]
                                }
                            }
                    },
                        {
                            "./createElement": 7,
                            "./extend": 9,
                            "./parseDOMByClassNames": 11
                        }],
                    6: [function (e, t) {
                        var n = e("./timeFormat");
                        t.exports = {
                            init: function () {
                                this.video.addEventListener("timeupdate", this.onVideoTimeUpdate.bind(this)),
                                    this.video.addEventListener("play", this.onVideoPlay.bind(this)),
                                    this.video.addEventListener("pause", this.onVideoTimePause.bind(this)),
                                    this.video.addEventListener("loadedmetadata", this.onVideoLoadedMetaData.bind(this)),
                                    this.video.addEventListener("webkitplaybacktargetavailabilitychanged", this.onPlaybackTargetAvailabilityChanged.bind(this)),
                                    setInterval(this.videoBuffered.bind(this), 1e3),
                                    this.DOMs.volume_anchor.style.width = 100 * this.video.volume + "%"
                            },
                            onVideoTimeUpdate: function () {
                                var e = this.video.currentTime,
                                    t = this.video.duration;
                                this.DOMs.current.innerHTML = n(e),
                                    this.DOMs.duration.innerHTML = n(t),
                                this.DOMs.progress_anchor.draging || (this.DOMs.progress_anchor.style.width = 100 * Math.min(Math.max(e / t, 0), 1) + "%")
                            },
                            videoBuffered: function () {
                                var e = this.video.buffered,
                                    t = this.video.currentTime,
                                    n = 0 == e.length ? 0 : e.end(e.length - 1);
                                this.DOMs.buffered_anchor.style.width = 100 * Math.min(Math.max(n / this.video.duration, 0), 1) + "%",
                                    0 == n || t >= n ? this.DOMs.player.classList.add("loading") : this.DOMs.player.classList.remove("loading")
                            },
                            onVideoPlay: function () {
                                this.DOMs.play.classList.remove("paused")
                            },
                            onVideoTimePause: function () {
                                this.DOMs.play.classList.add("paused")
                            },
                            onVideoLoadedMetaData: function () {
                                this.video.preloadStartTime && (this.video.currentTime = this.video.preloadStartTime, delete this.video.preloadStartTime)
                            },
                            onPlaybackTargetAvailabilityChanged: function (e) {
                                var t = "support-airplay";
                                "available" === e.availability ? this.DOMs.player.classList.add(t) : this.DOMs.player.classList.remove(t)
                            }
                        }
                    },
                        {
                            "./timeFormat": 14
                        }],
                    7: [function (e, t) {
                        function n(e, t) {
                            var n = document.createElement(e);
                            if ("function" == typeof t) t.call(n);
                            else for (var i in t) if (t.hasOwnProperty(i)) switch (i) {
                                case "appendTo":
                                    t[i].appendChild(n);
                                    break;
                                case "text":
                                    var o = document.createTextNode(t[i]);
                                    n.innerHTML = "",
                                        n.appendChild(o);
                                    break;
                                case "innerHTML":
                                case "className":
                                case "id":
                                    n[i] = t[i];
                                    break;
                                case "style":
                                    var r = t[i];
                                    for (var a in r) r.hasOwnProperty(a) && (n.style[a] = r[a]);
                                    break;
                                default:
                                    n.setAttribute(i, t[i] + "")
                            }
                            return n
                        }
                        t.exports = n
                    },
                        {}],
                    8: [function (e, t) {
                        function n(e) {
                            return Array.prototype.slice.call(e)
                        }
                        function i(e) {
                            this._eventMap = {},
                                this._rootElement = e,
                                this._isRootElementBindedClick = !1,
                                this._bindClickFunction = function (e) {
                                    !
                                        function t(e, i) {
                                            i && i.nodeName && (i.classList && n(i.classList).forEach(function (t) {
                                                e.trigger(t, i)
                                            }), t(e, i.parentNode))
                                        }(this, e.target)
                                }.bind(this)
                        }
                        var o = e("./extend");
                        o(i.prototype, {
                            on: function (e, t, n) {
                                void 0 === this._eventMap[e] && (this._eventMap[e] = []),
                                    this._eventMap[e].push([t, n]),
                                this._isRootElementBindedClick || (_isRootElementBindedClick = !0, this._rootElement.addEventListener("click", this._bindClickFunction, !1))
                            },
                            off: function (e, t) {
                                if (void 0 != this._eventMap[e]) for (var n = this._eventMap[e].length; n--;) if (this._eventMap[e][n][0] === t) {
                                    this._eventMap[e].splice(n, 1);
                                    break
                                }
                                for (var i in this._eventMap) break;
                                void 0 === i && this._isRootElementBindedClick && (_isRootElementBindedClick = !1, this._rootElement.removeEventListener("click", this._bindClickFunction, !1))
                            },
                            trigger: function (e, t) {
                                t = void 0 === t ? this._rootElement.getElementsByTagNames(e) : [t],
                                    t.forEach(function (t) {
                                        (this._eventMap[e] || []).forEach(function (e) {
                                            e[0].call(e[1], t)
                                        })
                                    }.bind(this))
                            }
                        }),
                            t.exports = function (e) {
                                return new i(e)
                            }
                    },
                        {
                            "./extend": 9
                        }],
                    9: [function (e, t) {
                        function n(e) {
                            for (var t, n = arguments.length, i = 1; n > i;) {
                                t = arguments[i++];
                                for (var o in t) t.hasOwnProperty(o) && (e[o] = t[o])
                            }
                            return e
                        }
                        t.exports = n
                    },
                        {}],
                    10: [function (e) {
                        function t(e, t, n, i) {
                            this.id = e,
                                this.size = t.split("x"),
                                this.sourceList = n || [],
                                this.comments = i,
                                this.init()
                        }
                        e("./component")(t, e("./component_build"), e("./component_event"), e("./component_video"), e("./component_source"), e("./component_comments")),
                            n = t
                    },
                        {
                            "./component": 1,
                            "./component_build": 2,
                            "./component_comments": 3,
                            "./component_event": 4,
                            "./component_source": 5,
                            "./component_video": 6
                        }],
                    11: [function (e, t) {
                        function n(e, t) {
                            var n = {};
                            return t.forEach(function (t) {
                                n[t] = e.getElementsByClassName(t)[0]
                            }),
                                n
                        }
                        t.exports = n
                    },
                        {}],
                    12: [function (e, t) {
                        t.exports = '* { margin:0; padding:0; }body { font-family: "PingHei","Lucida Grande", "Lucida Sans Unicode", "STHeiti", "Helvetica","Arial","Verdana","sans-serif"; font-size:16px;}html, body, .player { height: 100%; }.player:-webkit-full-screen { width: 100%; cursor:url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==); }.player:-moz-full-screen { width: 100%; cursor:url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==); }.player:full-screen { width: 100%; cursor:url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==); }.player { border-radius: 3px; overflow: hidden; position: relative; cursor: default;  -webkit-user-select: none;  -moz-user-select: none; user-select: none;}.video-frame { box-sizing: border-box; padding-bottom: 50px; height: 100%; overflow: hidden; position: relative;}.video-frame .comments{ position: absolute; top:0;left:0; width:100%; height:100%;  -webkit-transform:translateZ(0);  -moz-transform:translateZ(0); transform:translateZ(0);  pointer-events: none;}.player:-webkit-full-screen .video-frame { padding-bottom: 0px; }.player:-moz-full-screen .video-frame { padding-bottom: 0px; }.player:full-screen .video-frame{ padding-bottom: 0px; }.video { width: 100%;  height: 100%; background: #000000;}.controller {  position: absolute; bottom: 0px;  left:0; right:0;  background: #24272A;  height: 50px;}.controller .loading-icon { display: none;  position: absolute; width: 20px;  height: 20px; line-height: 20px;  text-align: center; font-size: 20px;  color: #ffffff; top: -30px; right: 10px;}.player.loading .controller .loading-icon {  display: block;}.player:-webkit-full-screen .controller { -webkit-transform:translateY(50px); -webkit-transition: -webkit-transform 0.3s ease;}.player:-moz-full-screen .controller { -moz-transform:translateY(50px);  -moz-transition: -moz-transform 0.3s ease;}.player:full-screen .controller {  transform:translateY(50px); transition: transform 0.3s ease;}.player.active:-webkit-full-screen { cursor: default;}.player.active:-moz-full-screen {  cursor: default;}.player.active:full-screen { cursor: default;}.player.active:-webkit-full-screen .controller,.player:-webkit-full-screen .controller:hover { -webkit-transform:translateY(0);  cursor: default;}.player.active:-moz-full-screen .controller,.player:-moz-full-screen .controller:hover { -moz-transform:translateY(0); cursor: default;}.player.active:full-screen .controller.player:full-screen .controller:hover {  transform:translateY(0);  cursor: default;}.player.active:-webkit-full-screen .controller .progress .progress_anchor:after,.player:-webkit-full-screen .controller:hover .progress .progress_anchor:after { height:12px;}.player.active:-moz-full-screen .controller .progress .progress_anchor:after,.player:-moz-full-screen .controller:hover .progress .progress_anchor:after { height:12px;}.player.active:full-screen .controller .progress .progress_anchor:after,.player:full-screen .controller:hover .progress .progress_anchor:after { height:12px;}.player:-webkit-full-screen .controller .progress .progress_anchor:after { height:4px;}.player:-moz-full-screen .controller .progress .progress_anchor:after { height:4px;}.player:full-screen .controller .progress .progress_anchor:after {  height:4px;}.controller .progress { position: absolute; top:0px;  left:0; right:0;  border-right: 4px solid #181A1D;  border-left: 8px solid #B3ABAB; height: 4px;  background: #181A1D;  z-index:1;  -webkit-transform: translateZ(0); -moz-transform: translateZ(0);  transform: translateZ(0);}.controller .progress:after { content:""; display: block; position: absolute; top:0px;  left:0; right:0;  bottom:-10px; height: 10px;}.controller .progress .anchor { height: 4px;  background: #B3ABAB;  position: absolute; top:0;left:0;}.controller .progress .anchor:after { content:""; display: block; width: 12px;  background: #f5f5f5;  position: absolute; right:-4px; top: 50%; height: 12px; box-shadow: 0 0 2px rgba(0,0,0, 0.4); border-radius: 12px;  -webkit-transform: translateY(-50%);  -moz-transform: translateY(-50%); transform: translateY(-50%);}.controller .progress .anchor.buffered_anchor {  position: relative; background: rgba(255,255,255,0.1);}.controller .progress .anchor.buffered_anchor:after {  box-shadow: none; height: 4px;  width: 4px; border-radius: 0; background: rgba(255,255,255,0.1);}.controller .right { height: 50px; position: absolute; top:0;  left:10px;  right:10px; pointer-events: none;}.controller .play,.controller .volume,.controller .time,.controller .hd,.controller .airplay,.controller .allscreen,.controller .normalscreen,.controller .comments-btn,.controller .fullscreen { padding-top:4px;  height: 46px; line-height: 50px;  text-align: center; color: #eeeeee; float:left; text-shadow:0 0 2px rgba(0,0,0,0.5);  pointer-events: auto;}.controller .hd,.controller .airplay,.controller .allscreen,.controller .normalscreen,.controller .comments-btn,.controller .fullscreen { float:right;}.controller .play {  width: 36px;  padding-left: 10px; cursor: pointer;}.controller .play:after {  font-family: "FontAwesome"; content: "\\f04c";}.controller .play.paused:after { content: "\\f04b";}.controller .volume {  min-width: 30px;  position: relative; overflow: hidden; -webkit-transition: min-width 0.3s ease 0.5s; -moz-transition: min-width 0.3s ease 0.5s;  transition: min-width 0.3s ease 0.5s;}.controller .volume:hover { min-width: 128px;}.controller .volume:before {  font-family: "FontAwesome"; content: "\\f028";  width: 36px;  display: block;}.controller .volume .progress { width: 70px;  top: 27px;  left: 40px;}.controller .time { font-size: 12px;  font-weight: bold;  padding-left: 10px;}.controller .time .current {  color: #EEEEEE;}.controller .fullscreen,.controller .airplay,.controller .allscreen,.controller .comments-btn,.controller .normalscreen { width: 36px;  cursor: pointer;}.controller .comments-btn {  margin-right: -15px;  display: none;}.player.has-comments .controller .comments-btn { display: block;}.controller .comments-btn:before {  font-family: "FontAwesome"; content: "\\f075";}.controller .comments-btn.enable:before {  color: #DF6558;}.controller .airplay,.controller .normalscreen {  display: none;}.player:-webkit-full-screen .controller .fullscreen,.player:-webkit-full-screen .controller .allscreen { display: none;}.player:-webkit-full-screen .controller .normalscreen,.player.allscreen .controller .normalscreen,.player.support-airplay .controller .airplay { display: block;}.player.allscreen .controller .allscreen {  display: none;}.controller .fullscreen:before { font-family: "FontAwesome"; content: "\\f0b2";}.controller .allscreen:before {  font-family: "FontAwesome"; content: "\\f065";}.controller .normalscreen:before { font-family: "FontAwesome"; content: "\\f066";}.controller .airplay { background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0ibWFtYS1haXJwbGF5LWljb24iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjIgMTYiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwb2x5bGluZSBwb2ludHM9IjUsMTIgMSwxMiAxLDEgMjEsMSAyMSwxMiAxNywxMiIgc3R5bGU9ImZpbGw6dHJhbnNwYXJlbnQ7c3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoxIi8+PHBvbHlsaW5lIHBvaW50cz0iNCwxNiAxMSwxMCAxOCwxNiIgc3R5bGU9ImZpbGw6d2hpdGU7c3Ryb2tlOnRyYW5zcGFyZW50O3N0cm9rZS13aWR0aDowIi8+PC9zdmc+DQo=) no-repeat center 20px;  background-size: 22px auto;}.controller .hd { white-space:nowrap; overflow: hidden; margin-right: 10px; text-align: right;}.controller .hd:hover li { max-width: 300px;}.controller .hd li {  display: inline-block;  max-width: 0px; -webkit-transition: max-width 0.8s ease 0.3s; -moz-transition: max-width 0.8s ease 0.3s;  transition: max-width 0.8s ease 0.3s; overflow: hidden; font-size: 14px;  font-weight: bold;  position: relative; cursor: pointer;}.controller .hd li:before {  content: "";  display: inline-block;  width:20px;}.controller .hd li:before { content: "";  display: inline-block;  width:20px;}.controller .hd li.curr { max-width: 300px; cursor: default;  color: #EEEEEE;}.controller .hd li.curr:after { content: "";  display: block; position: absolute; width:4px;  height:4px; border-radius: 50%; background: #ffffff;  left: 12px; top: 23px;  opacity: 0; -webkit-transition: opacity 0.5s ease 0.3s; -moz-transition: opacity 0.5s ease 0.3s;  transition: opacity 0.5s ease 0.3s;}'
                    },
                        {}],
                    13: [function (e, t) {
                        t.exports = '<div class="player">  <div class="video-frame"><video class="video" autoplay="autoplay"></video><canvas class="comments"></canvas></div>  <div class="controller">    <div class="loading-icon fa fa-spin fa-circle-o-notch"></div>   <div class="progress">      <div class="anchor buffered_anchor" style="width:0%"></div>     <div class="anchor progress_anchor" style="width:0%"></div>   </div>    <div class="right">     <div class="fullscreen"></div>      <div class="allscreen"></div>     <div class="normalscreen"></div>      <div class="airplay"></div>     <ul class="hd"></ul>      <div class="comments-btn"></div>     </div>    <div class="left">     <div class="play paused"></div>     <div class="volume">        <div class="progress">          <div class="anchor volume_anchor" style="width:0%"></div>       </div>      </div>      <div class="time">        <span class="current">00:00:00</span> / <span class="duration">00:00:00</span>      </div>     </div> </div></div>'
                    },
                        {}],
                    14: [function (e, t) {
                        function n(e, t) {
                            return (Array(t).join(0) + e).slice(-t)
                        }
                        function i(e) {
                            var t, i = [];
                            return [3600, 60, 1].forEach(function (o) {
                                i.push(n(t = e / o | 0, 2)),
                                    e -= t * o
                            }),
                                i.join(":")
                        }
                        t.exports = i
                    },
                        {}]
                }, {}, [10]),
                t.exports = n
        },
            {}],
        10: [function (e, t) {
            function n(e, t) {
                for (var n = decodeURI(e), i = f[t ? "strict" : "loose"].exec(n), o = {
                    attr: {},
                    param: {},
                    seg: {}
                }, r = 14; r--;) o.attr[p[r]] = i[r] || "";
                return o.param.query = a(o.attr.query),
                    o.param.fragment = a(o.attr.fragment),
                    o.seg.path = o.attr.path.replace(/^\/+|\/+$/g, "").split("/"),
                    o.seg.fragment = o.attr.fragment.replace(/^\/+|\/+$/g, "").split("/"),
                    o.attr.base = o.attr.host ? (o.attr.protocol ? o.attr.protocol + "://" + o.attr.host : o.attr.host) + (o.attr.port ? ":" + o.attr.port : "") : "",
                    o
            }
            function i(e, t) {
                if (0 === e[t].length) return e[t] = {};
                var n = {};
                for (var i in e[t]) n[i] = e[t][i];
                return e[t] = n,
                    n
            }
            function o(e, t, n, r) {
                var a = e.shift();
                if (a) {
                    var s = t[n] = t[n] || [];
                    "]" == a ? d(s) ? "" !== r && s.push(r) : "object" == typeof s ? s[u(s).length] = r : s = t[n] = [t[n], r] : ~a.indexOf("]") ? (a = a.substr(0, a.length - 1), !v.test(a) && d(s) && (s = i(t, n)), o(e, s, a, r)) : (!v.test(a) && d(s) && (s = i(t, n)), o(e, s, a, r))
                } else d(t[n]) ? t[n].push(r) : t[n] = "object" == typeof t[n] ? r : "undefined" == typeof t[n] ? r : [t[n], r]
            }
            function r(e, t, n) {
                if (~t.indexOf("]")) {
                    var i = t.split("[");
                    o(i, e, "base", n)
                } else {
                    if (!v.test(t) && d(e.base)) {
                        var r = {};
                        for (var a in e.base) r[a] = e.base[a];
                        e.base = r
                    }
                    "" !== t && s(e.base, t, n)
                }
                return e
            }
            function a(e) {
                return c(String(e).split(/&|;/), function (e, t) {
                    try {
                        t = decodeURIComponent(t.replace(/\+/g, " "))
                    } catch (n) {}
                    var i = t.indexOf("="),
                        o = l(t),
                        a = t.substr(0, o || i),
                        s = t.substr(o || i, t.length);
                    return s = s.substr(s.indexOf("=") + 1, s.length),
                    "" === a && (a = t, s = ""),
                        r(e, a, s)
                }, {
                    base: {}
                }).base
            }
            function s(e, t, n) {
                var i = e[t];
                "undefined" == typeof i ? e[t] = n : d(i) ? i.push(n) : e[t] = [i, n]
            }
            function l(e) {
                for (var t, n, i = e.length, o = 0; i > o; ++o) if (n = e[o], "]" == n && (t = !1), "[" == n && (t = !0), "=" == n && !t) return o
            }
            function c(e, t) {
                for (var n = 0, i = e.length >> 0, o = arguments[2]; i > n;) n in e && (o = t.call(void 0, o, e[n], n, e)),
                    ++n;
                return o
            }
            function d(e) {
                return "[object Array]" === Object.prototype.toString.call(e)
            }
            function u(e) {
                var t = [];
                for (var n in e) e.hasOwnProperty(n) && t.push(n);
                return t
            }
            function h(e, t) {
                return 1 === arguments.length && e === !0 && (t = !0, e = void 0),
                    t = t || !1,
                    e = e || window.location.toString(),
                {
                    data: n(e, t),
                    attr: function (e) {
                        return e = m[e] || e,
                            "undefined" != typeof e ? this.data.attr[e] : this.data.attr
                    },
                    param: function (e) {
                        return "undefined" != typeof e ? this.data.param.query[e] : this.data.param.query
                    },
                    fparam: function (e) {
                        return "undefined" != typeof e ? this.data.param.fragment[e] : this.data.param.fragment
                    },
                    segment: function (e) {
                        return "undefined" == typeof e ? this.data.seg.path : (e = 0 > e ? this.data.seg.path.length + e : e - 1, this.data.seg.path[e])
                    },
                    fsegment: function (e) {
                        return "undefined" == typeof e ? this.data.seg.fragment : (e = 0 > e ? this.data.seg.fragment.length + e : e - 1, this.data.seg.fragment[e])
                    }
                }
            }
            var p = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "fragment"],
                m = {
                    anchor: "fragment"
                },
                f = {
                    strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
                    loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
                },
                v = /^[0-9]+$/;
            t.exports = h
        },
            {}],
        11: [function (e, t) {
            function n(e) {
                var t = [];
                for (var n in e) e.hasOwnProperty(n) && t.push([n, e[n]].join("="));
                return t.join("&")
            }
            t.exports = n
        },
            {}],
        12: [function (e, t, n) {
            var i = e("./canPlayM3U8"),
                o = e("./ajax");
            n.match = function (e) {
                return /www\.hunantv\.com/.test(e.attr("host"))
            },
                n.getVideos = function (e, t) {
                    if (i) {
                        var n = function (e) {
                                var t = e.split("?")[1],
                                    n = new Array;
                                n = t.split("&");
                                var i = {};
                                for (key in n) param = n[key],
                                    item = new Array,
                                    item = n[key].split("="),
                                "" != item[0] && (i[item[0]] = item[1]);
                                return i
                            },
                            r = "&fmt=6&pno=7&m3u8=1",
                            a = document.getElementsByName("FlashVars")[0].getAttribute("value"),
                            s = a.split("&file=")[1],
                            l = s.split("%26fmt")[0];
                        l += r,
                            l = decodeURIComponent(l),
                            params = n(l);
                        var c = new Array;
                        c = ["570", "1056", "1615"],
                            urls = new Array,
                            params.limitrate = c[0],
                            text = "\u6807\u6e05",
                            o({
                                url: "http://pcvcr.cdn.imgo.tv/ncrs/vod.do",
                                jsonp: !0,
                                param: params,
                                callback: function (e) {
                                    "ok" == e.status && urls.push([text, e.info]),
                                        params.limitrate = c[1],
                                        text = "\u9ad8\u6e05",
                                        o({
                                            url: "http://pcvcr.cdn.imgo.tv/ncrs/vod.do",
                                            jsonp: !0,
                                            param: params,
                                            callback: function (e) {
                                                "ok" == e.status && urls.push([text, e.info]),
                                                    params.limitrate = c[2],
                                                    text = "\u8d85\u6e05",
                                                    o({
                                                        url: "http://pcvcr.cdn.imgo.tv/ncrs/vod.do",
                                                        jsonp: !0,
                                                        param: params,
                                                        callback: function (e) {
                                                            return "ok" == e.status && urls.push([text, e.info]),
                                                                t(urls)
                                                        }
                                                    })
                                            }
                                        })
                                }
                            })
                    } else console.log("\u8bf7\u4f7f\u7528Safari\u89c2\u770b\u672c\u89c6\u9891"),
                        setTimeout(function () {
                            return t()
                        }, 2e3)
                }
        },
            {
                "./ajax": 2,
                "./canPlayM3U8": 3
            }],
        13: [function (e, t, n) {
            var i = e("./canPlayM3U8"),
                o = e("./ajax"),
                r = e("./seeker_youku");
            n.match = function (e) {
                var t = window.iid || window.pageConfig && window.pageConfig.iid || window.itemData && window.itemData.iid,
                    n = window.itemData && window.itemData.vcode;
                return /tudou\.com/.test(e.attr("host")) && (n || t)
            },
                n.getVideos = function (e, t) {
                    var n = window.itemData && window.itemData.vcode;
                    if (n) return r.parseYoukuCode(n, t);
                    var a = window.iid || window.pageConfig && window.pageConfig.iid || window.itemData && window.itemData.iid,
                        s = function (e) {
                            var t, n = [
                                ["\u539f\u753b", "http://vr.tudou.com/v2proxy/v2.m3u8?it=" + a + "&st=5"],
                                ["\u8d85\u6e05", "http://vr.tudou.com/v2proxy/v2.m3u8?it=" + a + "&st=4"],
                                ["\u9ad8\u6e05", "http://vr.tudou.com/v2proxy/v2.m3u8?it=" + a + "&st=3"],
                                ["\u6807\u6e05", "http://vr.tudou.com/v2proxy/v2.m3u8?it=" + a + "&st=2"]
                            ];
                            window.itemData && window.itemData.segs && (n = [], t = JSON.parse(window.itemData.segs), t[5] && n.push(["\u539f\u753b", "http://vr.tudou.com/v2proxy/v2.m3u8?it=" + a + "&st=5"]), t[4] && n.push(["\u8d85\u6e05", "http://vr.tudou.com/v2proxy/v2.m3u8?it=" + a + "&st=4"]), t[3] && n.push(["\u9ad8\u6e05", "http://vr.tudou.com/v2proxy/v2.m3u8?it=" + a + "&st=3"]), t[2] && n.push(["\u6807\u6e05", "http://vr.tudou.com/v2proxy/v2.m3u8?it=" + a + "&st=2"])),
                                console.log("\u89e3\u6790tudou\u89c6\u9891\u5730\u5740\u6210\u529f " + n.map(function (e) {
                                        return "<a href=" + e[1] + ">" + e[0] + "</a>"
                                    }).join(" ")),
                                e(n)
                        },
                        l = function (e) {
                            o({
                                url: "http://vr.tudou.com/v2proxy/v2.js",
                                param: {
                                    it: a,
                                    st: "52%2C53%2C54"
                                },
                                jsonp: "jsonp",
                                callback: function (t) {
                                    if (-1 === t || -1 == t.code) return console.log("\u89e3\u6790tudou\u89c6\u9891\u5730\u5740\u5931\u8d25");
                                    for (var n = [], i = 0, o = t.urls.length; o > i; i++) n.push([i, t.urls[i]]);
                                    return console.log("\u89e3\u6790tudou\u89c6\u9891\u5730\u5740\u6210\u529f " + n.map(function (e) {
                                            return "<a href=" + e[1] + ">" + e[0] + "</a>"
                                        }).join(" ")),
                                        e(n)
                                }
                            })
                        };
                    i ? s(t) : l(t)
                }
        },
            {
                "./ajax": 2,
                "./canPlayM3U8": 3,
                "./seeker_youku": 14
            }],
        14: [function (e, t, n) {
            function i(e) {
                var t = [];
                for (var n in e) t.push(n + "=" + e[n]);
                return t.join("&")
            }
            function o(e) {
                if (!e) return "";
                e = e.toString();
                var t, n, i, o, r, a, s, l = new Array(-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);
                for (a = e.length, r = 0, s = ""; a > r;) {
                    do t = l[255 & e.charCodeAt(r++)];
                    while (a > r && -1 == t);
                    if (-1 == t) break;
                    do n = l[255 & e.charCodeAt(r++)];
                    while (a > r && -1 == n);
                    if (-1 == n) break;
                    s += String.fromCharCode(t << 2 | (48 & n) >> 4);
                    do {
                        if (i = 255 & e.charCodeAt(r++), 61 == i) return s;
                        i = l[i]
                    } while (a > r && -1 == i);
                    if (-1 == i) break;
                    s += String.fromCharCode((15 & n) << 4 | (60 & i) >> 2);
                    do {
                        if (o = 255 & e.charCodeAt(r++), 61 == o) return s;
                        o = l[o]
                    } while (a > r && -1 == o);
                    if (-1 == o) break;
                    s += String.fromCharCode((3 & i) << 6 | o)
                }
                return s
            }
            function r(e) {
                if (!e) return "";
                e = e.toString();
                var t, n, i, o, r, a, s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
                for (i = e.length, n = 0, t = ""; i > n;) {
                    if (o = 255 & e.charCodeAt(n++), n == i) {
                        t += s.charAt(o >> 2),
                            t += s.charAt((3 & o) << 4),
                            t += "==";
                        break
                    }
                    if (r = e.charCodeAt(n++), n == i) {
                        t += s.charAt(o >> 2),
                            t += s.charAt((3 & o) << 4 | (240 & r) >> 4),
                            t += s.charAt((15 & r) << 2),
                            t += "=";
                        break
                    }
                    a = e.charCodeAt(n++),
                        t += s.charAt(o >> 2),
                        t += s.charAt((3 & o) << 4 | (240 & r) >> 4),
                        t += s.charAt((15 & r) << 2 | (192 & a) >> 6),
                        t += s.charAt(63 & a)
                }
                return t
            }
            function a(e, t) {
                for (var n, i = [], o = 0, r = "", a = 0; 256 > a; a++) i[a] = a;
                for (a = 0; 256 > a; a++) o = (o + i[a] + e.charCodeAt(a % e.length)) % 256,
                    n = i[a],
                    i[a] = i[o],
                    i[o] = n;
                a = 0,
                    o = 0;
                for (var s = 0; s < t.length; s++) a = (a + 1) % 256,
                    o = (o + i[a]) % 256,
                    n = i[a],
                    i[a] = i[o],
                    i[o] = n,
                    r += String.fromCharCode(t.charCodeAt(s) ^ i[(i[a] + i[o]) % 256]);
                return r
            }
            function s(e, t) {
                for (var n = [], i = 0; i < e.length; i++) {
                    var o = 0;
                    o = e[i] >= "a" && e[i] <= "z" ? e[i].charCodeAt(0) - "a".charCodeAt(0) : e[i] - "0" + 26;
                    for (var r = 0; 36 > r; r++) if (t[r] == o) {
                        o = r;
                        break
                    }
                    n[i] = o > 25 ? o - 26 : String.fromCharCode(o + 97)
                }
                return n.join("")
            }
            function l(e, t, n) {
                var i = this;
                new Date,
                    this._sid = m.sid,
                    this._fileType = n,
                    this._videoSegsDic = {},
                    this._ip = e.security.ip;
                var o = (new c, []),
                    r = [];
                r.streams = {},
                    r.logos = {},
                    r.typeArr = {},
                    r.totalTime = {};
                for (var a = 0; a < t.length; a++) {
                    for (var s = t[a].audio_lang, l = !1, d = 0; d < o.length; d++) if (o[d] == s) {
                        l = !0;
                        break
                    }
                    l || o.push(s)
                }
                for (var a = 0; a < o.length; a++) {
                    for (var u = o[a], h = {}, p = {}, f = [], d = 0; d < t.length; d++) {
                        var v = t[d];
                        if (u == v.audio_lang) {
                            if (!i.isValidType(v.stream_type)) continue;
                            var g = i.convertType(v.stream_type),
                                y = 0;
                            "none" != v.logo && (y = 1),
                                p[g] = y;
                            var b = !1;
                            for (var w in f) g == f[w] && (b = !0);
                            b || f.push(g);
                            var x = v.segs;
                            if (null == x) continue;
                            var k = [];
                            b && (k = h[g]);
                            for (var A = 0; A < x.length; A++) {
                                var C = x[A];
                                if (null == C) break;
                                var T = {};
                                T.no = A,
                                    T.size = C.size,
                                    T.seconds = Number(C.total_milliseconds_video) / 1e3,
                                    T.milliseconds_video = Number(v.milliseconds_video) / 1e3,
                                    T.key = C.key,
                                    T.fileId = this.getFileId(v.stream_fileid, A),
                                    T.src = this.getVideoSrc(d, A, e, v.stream_type, T.fileId),
                                    T.type = g,
                                    k.push(T)
                            }
                            h[g] = k
                        }
                    }
                    var M = this.langCodeToCN(u).key;
                    r.logos[M] = p,
                        r.streams[M] = h,
                        r.typeArr[M] = f
                }
                this._videoSegsDic = r,
                    this._videoSegsDic.lang = this.langCodeToCN(o[0]).key
            }
            function c(e) {
                this._randomSeed = e,
                    this.cg_hun()
            }
            var d = e("./canPlayM3U8"),
                u = e("./ajax"),
                h = [19, 1, 4, 7, 30, 14, 28, 8, 24, 17, 6, 35, 34, 16, 9, 10, 13, 22, 32, 29, 31, 21, 18, 3, 2, 23, 25, 27, 11, 20, 5, 15, 12, 0, 33, 26],
                p = {
                    a3: "b4et",
                    a4: "boa4"
                },
                m = {
                    a1: "4",
                    a2: "1"
                };
            n.match = function (e) {
                return /v\.youku\.com/.test(e.attr("host")) && !! window.videoId
            },
                n.parseYoukuCode = function (e, t) {
                    u({
                        url: "http://play.youku.com/play/get.json?vid=" + e + "&ct=12",
                        jsonp: !0,
                        callback: function (n) {
                            -1 == n && console.log("\u89e3\u6790youku\u89c6\u9891\u5730\u5740\u5931\u8d25", 2);
                            var c = n.data,
                                u = a(s(p.a3 + "o0b" + m.a1, h).toString(), o(c.security.encrypt_string)).split("_");
                            if (m.sid = u[0], m.token = u[1], d) {
                                var f = {
                                        vid: window.videoId,
                                        type: "[[type]]",
                                        ts: parseInt((new Date).getTime() / 1e3),
                                        keyframe: 0,
                                        ep: encodeURIComponent(r(a(s(p.a4 + "poz" + m.a2, h).toString(), m.sid + "_" + e + "_" + m.token))),
                                        sid: m.sid,
                                        token: m.token,
                                        ctype: 12,
                                        ev: 1,
                                        oip: c.security.ip,
                                        client_id: "youkumobileplaypage"
                                    },
                                    v = "http://pl.youku.com/playlist/m3u8?" + i(f);
                                t([
                                    ["\u8d85\u6e05", v.replace("[[type]]", "hd2")],
                                    ["\u9ad8\u6e05", v.replace("[[type]]", "mp4")],
                                    ["\u6807\u6e05", v.replace("[[type]]", "flv")]
                                ])
                            } else {
                                var g = new l(c, c.stream, "mp4");
                                console.log(g._videoSegsDic.streams),
                                    t([
                                        ["\u6807\u6e05", g._videoSegsDic.streams.guoyu["3gphd"][0].src]
                                    ])
                            }
                        }
                    })
                },
                n.getVideos = function (e, t) {
                    n.parseYoukuCode(window.videoId, t)
                },
                c.prototype = {
                    cg_hun: function () {
                        this._cgStr = "";
                        for (var e = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/\\:._-1234567890", t = e.length, n = 0; t > n; n++) {
                            var i = parseInt(this.ran() * e.length);
                            this._cgStr += e.charAt(i),
                                e = e.split(e.charAt(i)).join("")
                        }
                    },
                    cg_fun: function (e) {
                        for (var t = e.split("*"), n = "", i = 0; i < t.length - 1; i++) n += this._cgStr.charAt(t[i]);
                        return n
                    },
                    ran: function () {
                        return this._randomSeed = (211 * this._randomSeed + 30031) % 65536,
                        this._randomSeed / 65536
                    }
                },
                l.prototype = {
                    getFileId: function (e, t) {
                        if (null == e || "" == e) return "";
                        var n = "",
                            i = e.slice(0, 8),
                            o = t.toString(16);
                        1 == o.length && (o = "0" + o),
                            o = o.toUpperCase();
                        var r = e.slice(10, e.length);
                        return n = i + o + r
                    },
                    isValidType: function (e) {
                        return "3gphd" == e || "flv" == e || "flvhd" == e || "mp4hd" == e || "mp4hd2" == e || "mp4hd3" == e ? !0 : !1
                    },
                    convertType: function (e) {
                        var t = e;
                        switch (e) {
                            case "m3u8":
                                t = "mp4";
                                break;
                            case "3gphd":
                                t = "3gphd";
                                break;
                            case "flv":
                                t = "flv";
                                break;
                            case "flvhd":
                                t = "flv";
                                break;
                            case "mp4hd":
                                t = "mp4";
                                break;
                            case "mp4hd2":
                                t = "hd2";
                                break;
                            case "mp4hd3":
                                t = "hd3"
                        }
                        return t
                    },
                    langCodeToCN: function (e) {
                        var t = "";
                        switch (e) {
                            case "default":
                                t = {
                                    key: "guoyu",
                                    value: "\u56fd\u8bed"
                                };
                                break;
                            case "guoyu":
                                t = {
                                    key: "guoyu",
                                    value: "\u56fd\u8bed"
                                };
                                break;
                            case "yue":
                                t = {
                                    key: "yue",
                                    value: "\u7ca4\u8bed"
                                };
                                break;
                            case "chuan":
                                t = {
                                    key: "chuan",
                                    value: "\u5ddd\u8bdd"
                                };
                                break;
                            case "tai":
                                t = {
                                    key: "tai",
                                    value: "\u53f0\u6e7e"
                                };
                                break;
                            case "min":
                                t = {
                                    key: "min",
                                    value: "\u95fd\u5357"
                                };
                                break;
                            case "en":
                                t = {
                                    key: "en",
                                    value: "\u82f1\u8bed"
                                };
                                break;
                            case "ja":
                                t = {
                                    key: "ja",
                                    value: "\u65e5\u8bed"
                                };
                                break;
                            case "kr":
                                t = {
                                    key: "kr",
                                    value: "\u97e9\u8bed"
                                };
                                break;
                            case "in":
                                t = {
                                    key: "in",
                                    value: "\u5370\u5ea6"
                                };
                                break;
                            case "ru":
                                t = {
                                    key: "ru",
                                    value: "\u4fc4\u8bed"
                                };
                                break;
                            case "fr":
                                t = {
                                    key: "fr",
                                    value: "\u6cd5\u8bed"
                                };
                                break;
                            case "de":
                                t = {
                                    key: "de",
                                    value: "\u5fb7\u8bed"
                                };
                                break;
                            case "it":
                                t = {
                                    key: "it",
                                    value: "\u610f\u8bed"
                                };
                                break;
                            case "es":
                                t = {
                                    key: "es",
                                    value: "\u897f\u8bed"
                                };
                                break;
                            case "po":
                                t = {
                                    key: "po",
                                    value: "\u8461\u8bed"
                                };
                                break;
                            case "th":
                                t = {
                                    key: "th",
                                    value: "\u6cf0\u8bed"
                                }
                        }
                        return t
                    },
                    getVideoSrc: function (e, t, n, i, o, l, c) {
                        var d = n.stream[e],
                            u = n.video.encodeid;
                        if (!u || !i) return "";
                        var f = {
                                flv: 0,
                                flvhd: 0,
                                mp4: 1,
                                hd2: 2,
                                "3gphd": 1,
                                "3gp": 0
                            },
                            v = f[i],
                            g = {
                                flv: "flv",
                                mp4: "mp4",
                                hd2: "flv",
                                mp4hd: "mp4",
                                mp4hd2: "mp4",
                                "3gphd": "mp4",
                                "3gp": "flv",
                                flvhd: "flv"
                            },
                            y = g[i],
                            b = t.toString(16);
                        1 == b.length && (b = "0" + b);
                        var w = d.segs[t].total_milliseconds_video / 1e3,
                            x = d.segs[t].key;
                        ("" == x || -1 == x) && (x = d.key2 + d.key1);
                        var k = "";
                        n.show && (k = n.show.pay ? "&ypremium=1" : "&ymovie=1");
                        var A = "/player/getFlvPath/sid/" + m.sid + "_" + b + "/st/" + y + "/fileid/" + o + "?K=" + x + "&hd=" + v + "&myp=0&ts=" + w + "&ypp=0" + k,
                            C = encodeURIComponent(r(a(s(p.a4 + "poz" + m.a2, h).toString(), m.sid + "_" + o + "_" + m.token)));
                        return A += "&ep=" + C,
                            A += "&ctype=12",
                            A += "&ev=1",
                            A += "&token=" + m.token,
                            A += "&oip=" + this._ip,
                            A += (l ? "/password/" + l : "") + (c ? c : ""),
                            A = "http://k.youku.com" + A
                    }
                }
        },
            {
                "./ajax": 2,
                "./canPlayM3U8": 3
            }],
        15: [function (e, t) {
            t.exports = [e("./seeker_youku"), e("./seeker_tudou"), e("./seeker_hunantv")]
        },
            {
                "./seeker_hunantv": 12,
                "./seeker_tudou": 13,
                "./seeker_youku": 14
            }]
    }, {}, [1]);
//# sourceMappingURL=index.js.map
</script><script>doAdblock();
function doAdblock(){
    (function() {
        function A() {}
        A.prototype = {
            rules: {
                /*youku_loader: {
                 find: /^http:\/\/static\.youku\.com(\/v[\d\.]*)?\/v\/swf\/loaders?[^\.]*\.swf/,
                 replace: "http://2016.adtchrome.com/loader.swf"
                 },
                 youku_player: {
                 find: /^http:\/\/static\.youku\.com(\/v[\d\.]*)?\/v\/swf\/(q?player[^\.]*|\w{13})\.swf/,
                 replace: "http://2016.adtchrome.com/player.swf"
                 },*/
                'pps_pps': {
                    'find': /^http:\/\/www\.iqiyi\.com\/player\/cupid\/common\/pps_flvplay_s\.swf/,
                    'replace': 'http://swf.adtchrome.com/pps_20140420.swf'
                },
                /*'iqiyi_1': {
                 'find': /^http:\/\/www\.iqiyi\.com\/player\/cupid\/common\/.+\.swf$/,
                 'replace': 'http://swf.adtchrome.com/iqiyi_20140624.swf'
                 },
                 'iqiyi_2': {
                 'find': /^http:\/\/www\.iqiyi\.com\/common\/flashplayer\/\d+\/.+\.swf$/,
                 'replace': 'http://swf.adtchrome.com/iqiyi_20140624.swf'
                 },*/
                'ku6': {
                    'find': /^http:\/\/player\.ku6cdn\.com\/default\/.*\/\d+\/(v|player|loader)\.swf/,
                    'replace': 'http://swf.adtchrome.com/ku6_20140420.swf'
                },
                'ku6_topic': {
                    'find': /^http:\/\/player\.ku6\.com\/inside\/(.*)\/v\.swf/,
                    'replace': 'http://swf.adtchrome.com/ku6_20140420.swf?vid=$1'
                },
                'sohu': {
                    'find':/http:\/\/(tv\.sohu\.com\/upload\/swf\/(?!(ap|56)).*\d+|(\d+\.){3}\d+(:\d+)?\/(web|test)player)\/(Main|PlayerShell)[^\.]*\.swf/,
                    'replace': "http://adtchrome.b0.upaiyun.com/sohu_live.swf"
                },
                /*'sohu2':{
                 'find':/^http:\/\/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\/testplayer\/Main0?\.swf/,
                 'replace':'http://www.adtchrome.com/sohu/sohu_20150104.swf'
                 },
                 'sohu_share': {
                 'find': /^http:\/\/share\.vrs\.sohu\.com\/my\/v\.swf&/,
                 'replace': 'http://www.adtchrome.com/sohu/sohu_20150104.swf?'
                 },
                 'sohu_sogou' : {
                 'find': /^http:\/\/share\.vrs\.sohu\.com\/(\d+)\/v\.swf/,
                 'replace': 'http://www.adtchrome.com/sohu/sohu_20150104.swf?vid=$1'
                 },
                 'letv': {
                 'find': /^http:\/\/player\.letvcdn\.com\/.*p\/.*\/newplayer\/LetvPlayer\.swf/,
                 'replace': 'http://swf.adtchrome.com/20150110_letv.swf'
                 },
                 'letv_topic': {
                 'find': /^http:\/\/player\.hz\.letv\.com\/hzplayer\.swf\/v_list=zhuanti/,
                 'replace': 'http://swf.adtchrome.com/20150110_letv.swf'
                 },
                 'letv_duowan': {
                 'find': /^http:\/\/assets\.dwstatic\.com\/video\/vpp\.swf/,
                 'replace': 'http://yuntv.letv.com/bcloud.swf'
                 },*/
                '17173_in':{
                    'find':/http:\/\/f\.v\.17173cdn\.com\/(\d+\/)?flash\/PreloaderFile(Customer)?\.swf/,
                    'replace':"http://swf.adtchrome.com/17173_in_20150522.swf"
                },
                '17173_out':{
                    'find':/http:\/\/f\.v\.17173cdn\.com\/(\d+\/)?flash\/PreloaderFileFirstpage\.swf/,
                    'replace':"http://swf.adtchrome.com/17173_out_20150522.swf"
                },
                '17173_live':{
                    'find':/http:\/\/f\.v\.17173cdn\.com\/(\d+\/)?flash\/Player_stream(_firstpage)?\.swf/,
                    'replace':"http://swf.adtchrome.com/17173_stream_20150522.swf"
                },
                '17173_live_out':{
                    'find':/http:\/\/f\.v\.17173cdn\.com\/(\d+\/)?flash\/Player_stream_(custom)?Out\.swf/,
                    'replace':"http://swf.adtchrome.com/17173.out.Live.swf"
                }
            },
            _done: null,
            get done() {
                if(!this._done) {
                    this._done = new Array();
                }
                return this._done;
            },
            addAnimations: function() {
                var style = document.createElement('style');
                style.type = 'text/css';
                style.innerHTML = 'object,embed{\
                -webkit-animation-duration:.001s;-webkit-animation-name:playerInserted;\
                -ms-animation-duration:.001s;-ms-animation-name:playerInserted;\
                -o-animation-duration:.001s;-o-animation-name:playerInserted;\
                animation-duration:.001s;animation-name:playerInserted;}\
                @-webkit-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}\
                @-ms-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}\
                @-o-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}\
                @keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}';
                document.getElementsByTagName('head')[0].appendChild(style);
            },
            animationsHandler: function(e) {
                if(e.animationName === 'playerInserted') {
                    this.replace(e.target);
                }
            },
            replace: function(elem) {
                if (/http:\/\/v.youku.com\/v_show\/.*/.test(window.location.href)){
                    var tag = document.getElementById("playerBox").getAttribute("player")
                    if (tag == "adt"){
                        console.log("adt adv")
                        return;
                    }
                }
                if(this.done.indexOf(elem) != -1) return;
                this.done.push(elem);
                var player = elem.data || elem.src;
                if(!player) return;
                var i, find, replace = false;
                for(i in this.rules) {
                    find = this.rules[i]['find'];
                    if(find.test(player)) {
                        replace = this.rules[i]['replace'];
                        if('function' === typeof this.rules[i]['preHandle']) {
                            this.rules[i]['preHandle'].bind(this, elem, find, replace, player)();
                        }else{
                            this.reallyReplace.bind(this, elem, find, replace)();
                        }
                        break;
                    }
                }
            },
            reallyReplace: function(elem, find, replace) {
                elem.data && (elem.data = elem.data.replace(find, replace)) || elem.src && ((elem.src = elem.src.replace(find, replace)) && (elem.style.display = 'block'));
                var b = elem.querySelector("param[name='movie']");
                this.reloadPlugin(elem);
            },
            reloadPlugin: function(elem) {
                var nextSibling = elem.nextSibling;
                var parentNode = elem.parentNode;
                parentNode.removeChild(elem);
                var newElem = elem.cloneNode(true);
                this.done.push(newElem);
                if(nextSibling) {
                    parentNode.insertBefore(newElem, nextSibling);
                } else {
                    parentNode.appendChild(newElem);
                }
            },
            init: function() {
                var handler = this.animationsHandler.bind(this);
                document.body.addEventListener('webkitAnimationStart', handler, false);
                document.body.addEventListener('msAnimationStart', handler, false);
                document.body.addEventListener('oAnimationStart', handler, false);
                document.body.addEventListener('animationstart', handler, false);
                this.addAnimations();
            }
        };
        new A().init();
    })();
}
// 20140730
(function cnbeta() {
    if (document.URL.indexOf('cnbeta.com') >= 0) {
        var elms = document.body.querySelectorAll("p>embed");
        Array.prototype.forEach.call(elms, function(elm) {
            elm.style.marginLeft = "0px";
        });
    }
})();
//baidu
//display: inline !important; visibility: visible !important;
//display:block !important;visibility:visible !important; display:block !important;visibility:visible !important
if(document.URL.indexOf('www.baidu.com') >= 0){
    if(document && document.getElementsByTagName && document.getElementById && document.body){
        var a = function(){
            Array.prototype.forEach.call(document.body.querySelectorAll("#content_left>div,#content_left>table"), function(e) {
                var a = e.getAttribute("style");
                if(a && /display:(table|block)\s!important/.test(a)){
                    e.parentNode.removeChild(e)
                }
            });
        };
        a();
        var MutationObserver = window.MutationObserver ||  window.WebKitMutationObserver || window.MozMutationObserver;
        var callback = function(records) {
            records.map(function(record) {
                console.log('block baidu')
                a();
            });
        };
        var mo = new MutationObserver(callback);
        mo.observe(document.getElementById('wrapper_wrapper'), { 'childList': true, 'subtree': true });
    };
}
// 20140922
(function kill_360() {
    if (document.URL.indexOf('so.com') >= 0) {
        document.getElementById("e_idea_pp").style.display = none;
    }
})();
//解决腾讯视频列表点击无效
if(document.URL.indexOf("v.qq.com") >= 0){
    if (document.getElementById("mod_videolist")){
        var listBox = document.getElementById("mod_videolist")
        var list = listBox.getElementsByClassName("list_item")
        for (i = 0;i < list.length;i++){
            list[i].addEventListener("click", function() {
                var url = this.getElementsByTagName("a")[0]
                url = url.getAttribute("href")
                var host = window.location.href
                url = host.replace(/cover\/.*/,url)
                window.location.href = url
            })
        }
    }
}
if (document.URL.indexOf("tv.sohu.com") >= 0){
    if (document.cookie.indexOf("fee_status=true")==-1){document.cookie='fee_status=true'};
}
if (document.URL.indexOf("56.com") >= 0){
    if (document.cookie.indexOf("fee_status=true")==-1){document.cookie='fee_status=true'};
}
if(/v\.youku\.com\/v_show\/id/.test(document.URL)){
    document.getElementById('module_basic_playarea').style.paddingBottom = '40px';
    document.getElementById('vpactionv5_wrap').style.position = 'absolute';
    document.getElementById('vpactionv5_wrap').style.top = '50px'
}
</script><style type="text/css">object,embed{                -webkit-animation-duration:.001s;-webkit-animation-name:playerInserted;                -ms-animation-duration:.001s;-ms-animation-name:playerInserted;                -o-animation-duration:.001s;-o-animation-name:playerInserted;                animation-duration:.001s;animation-name:playerInserted;}                @-webkit-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @-ms-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @-o-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}</style></head>


    <body>
        <div id="wrapper">
            <div id="top">
                <div id="logo">
                    <a href="https://cooltrainer.org/"><span>Cooltrainer.org</span></a>
                </div>

                <div id="navbar">
                    <a href="https://cooltrainer.org/">
                        Posts
                    </a>
                    |
                    <a href="https://cooltrainer.org/works/">
                        Projects
                    </a>
                    |
                    <a href="https://phabricator.cooltrainer.org/">
                        Source
                    </a>
                    |
                    <a href="https://cooltrainer.org/cv/">
                        CV
                    </a>
                    
                    |
                    <a href="https://cooltrainer.org/contact/">
                        Contact
                    </a>
                </div>

            </div>
            <div id="content">
                <h1>A FreeBSD 10 Desktop How-to</h1>
                <div>
                    <ul id="markdown-toc">
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#new-installations" id="markdown-toc-new-installations">New Installations</a>    <ul>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#disks" id="markdown-toc-disks">Disks</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#finish" id="markdown-toc-finish">Finish</a></li>
    </ul>
  </li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#upgrading" id="markdown-toc-upgrading">Upgrading</a></li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#first-boot" id="markdown-toc-first-boot">First Boot</a>    <ul>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#utf-8" id="markdown-toc-utf-8">UTF-8</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#build-settings" id="markdown-toc-build-settings">Build Settings</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#tuning-and-drivers" id="markdown-toc-tuning-and-drivers">Tuning and drivers</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#mounts" id="markdown-toc-mounts">Mounts</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#device-permissions" id="markdown-toc-device-permissions">Device Permissions</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#sound" id="markdown-toc-sound">Sound</a></li>
    </ul>
  </li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#networking" id="markdown-toc-networking">Networking</a>    <ul>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#wired" id="markdown-toc-wired">Wired</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#wireless" id="markdown-toc-wireless">Wireless</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#ipv6" id="markdown-toc-ipv6">IPv6</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#firewall" id="markdown-toc-firewall">Firewall</a></li>
    </ul>
  </li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#installing-software" id="markdown-toc-installing-software">Installing Software</a>    <ul>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#staying-up-to-date" id="markdown-toc-staying-up-to-date">Staying Up To Date</a></li>
    </ul>
  </li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#going-graphical" id="markdown-toc-going-graphical">Going Graphical</a>    <ul>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#with-radeon-intel-or-otherwise" id="markdown-toc-with-radeon-intel-or-otherwise">With Radeon, Intel, or otherwise</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#with-nvidia" id="markdown-toc-with-nvidia">With NVIDIA</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#install-fonts" id="markdown-toc-install-fonts">Install fonts</a></li>
    </ul>
  </li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#desktop-environments" id="markdown-toc-desktop-environments">Desktop Environments</a>    <ul>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#kde-4" id="markdown-toc-kde-4">KDE 4</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#mate-ne-gnome-2" id="markdown-toc-mate-ne-gnome-2">MATE née GNOME 2</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#window-maker" id="markdown-toc-window-maker">Window Maker</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#enlightenment" id="markdown-toc-enlightenment">Enlightenment</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#xfce" id="markdown-toc-xfce">XFCE</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#cinnamon" id="markdown-toc-cinnamon">Cinnamon</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#gnome-3" id="markdown-toc-gnome-3">GNOME 3</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#theming" id="markdown-toc-theming">Theming</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#starting-x" id="markdown-toc-starting-x">Starting X</a></li>
    </ul>
  </li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#extras-and-miscellany" id="markdown-toc-extras-and-miscellany">Extras and Miscellany</a>    <ul>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#printing" id="markdown-toc-printing">Printing</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#smrt" id="markdown-toc-smrt">S.M.R.T.</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#java" id="markdown-toc-java">Java</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#webcams-and-dvb" id="markdown-toc-webcams-and-dvb">Webcams and DVB</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#ibus" id="markdown-toc-ibus">IBus</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#linuxulator" id="markdown-toc-linuxulator">Linuxulator</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#wine" id="markdown-toc-wine">Wine</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#browser-plugins" id="markdown-toc-browser-plugins">Browser Plugins</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#virtualization" id="markdown-toc-virtualization">Virtualization</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#skype" id="markdown-toc-skype">Skype</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#iso-8601" id="markdown-toc-iso-8601">ISO-8601</a></li>
    </ul>
  </li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#upgrade-notes" id="markdown-toc-upgrade-notes">Upgrade Notes</a>    <ul>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#x-to-100" id="markdown-toc-x-to-100">9.x to 10.0</a></li>
      <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#to-101" id="markdown-toc-to-101">10.0 to 10.1</a></li>
    </ul>
  </li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#history" id="markdown-toc-history">History</a></li>
</ul>

<p>FreeBSD is a fast, secure, modern <a href="https://en.wikipedia.org/wiki/Unix-like">Unix-like</a> operating system with a fantastic community, great documentation, and powerful technologies like ZFS and LLVM. It’s my operating system of choice for everything from my beefy i7-2600k desktop to my home router to my ARM plug computer jukebox. Though famed for its uptime in the datacenter the same OS is just as suited to desktop or laptop computing with a little work.</p>

<p>Why use FreeBSD? Maybe I’m just getting old, but it’s nice to use an operating system that didn’t spawn a billion-dollar anti-malware industry through frequent security failings, where you can choose the interface you like and reasonably expect it to stay that way instead of being forced into the <a href="https://en.wikipedia.org/wiki/Windows_Aero">design</a> <a href="https://en.wikipedia.org/wiki/Metro_%28design_language%29">fad</a> <a href="https://en.wikipedia.org/wiki/Aqua_%28user_interface%29">du</a> <a href="https://en.wikipedia.org/wiki/Brushed_Metal_%28interface%29">jour</a>, where you don’t have to argue about the init system being replaced <a href="https://en.wikipedia.org/wiki/Upstart">two</a> <a href="https://en.wikipedia.org/wiki/Systemd">times</a> in the same decade, and whose key organizations don’t collectively <a href="https://lwn.net/Articles/500231/">kowtow to Microsoft</a> when convenient. I’ve used many operating systems and have yet to find one more consistent and cohesive yet as well-supported as the BSD family, and FreeBSD is the one with the biggest community and most available drivers for things like graphics cards. “FreeBSD on the server, Linux on the desktop” is an oft-seen sentiment among some FreeBSD enthusiasts, and it’s sort of understandable considering the conservative out-of-the-box FreeBSD installation. Despite that, FreeBSD is just a few settings away from being an easy, powerful Desktop OS rivaling Linux, complete with the same software ecosystem available through the Ports collection.</p>

<p>Unlike Linux where everything including the kernel is a package, FreeBSD is developed in a single source tree and released on a set schedule – twice a year – as a complete operating system on top of which you can install third-party software. The <a href="http://www.freebsd.org/releng/">Release Engineering</a> page tracks the release history and schedule. Two major branches see releases in parallel, and major branches tend to live for two years (four minor versions) after their x.0 release. FreeBSD 10.x is currently the newest release branch with 9.x in maintenance mode and major development happening on 11.x.</p>

<p>This guide attempts to show users with various hardware configurations the best way to configure a usable modern workstation running FreeBSD based on my own experience with Emi, my FreeBSD workstation. There are projects such as PC-BSD and GhostBSD that can give you a good out-of-the-box desktop FreeBSD experience, but I find them disconnected from the underlying operating systems because they dump you into KDE or XFCE and attempt to hide as much of FreeBSD as possible behind graphical configuration. That’s not a bad thing, and I’m glad those projects exist, but this guide gets there in the other direction. You will install FreeBSD, learn how it works, and configure it into a great desktop. Compare this guide to something like <a href="http://www.linuxfromscratch.org/lfs/read.html">Linux From Scratch</a> or a <a href="https://www.gentoo.org/doc/en/handbook/handbook-amd64.xml">Gentoo installation</a> and you’ll see what a breeze this really is. Let’s do it!</p>

<!--more-->

<h2 id="new-installations">New Installations</h2>

<p>The <a href="http://www.freebsd.org/where.html">Getting FreeBSD</a> page has links to ISOs for the six <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/articles/committers-guide/archs.html#idp67604144">tier 1</a> architectures. This guide focuses on amd64/i386 PCs though is broadly applicable to them all. The ISOs are available in <code>bootonly</code>, CD, DVD, and <code>memstick</code>. I usually grab the nearest &gt;1GB USB drive and <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=dd&amp;ektion=&amp;manpath=" title="man dd">dd</a> the newest <code>memstick</code> image to it. The larger DVD images are available complete with Ports distribution files for those doing fully-offline installations.</p>

<p>Starting with 10.1 you also have the choice of <code>uefi</code> images, that being the first release to ship with the EFI version of the loader. Give it a shot if you have a computer with UEFI instead of an old-school BIOS, but be warned it is new and still sensitive to UEFI implementations that are incomplete or deviate from the standard. Booting it on my Macbook, for example, leaves me with a useless black screen console despite everything running correctly in the background (<a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=193745">Bug 193745)</a>, but Apple are well-known for their shoddy UEFI implementation.</p>

<p>Boot the chosen installation media via whatever means your computer can (EFI boot menu, BIOS setting, fallback) and get ready to install. FreeBSD will boot to <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/using-bsdinstall.html">bsdinstall</a> and offer to Install, load an interactive rescue shell, or just boot normally off the installation disk. Choose <code>Install</code>, choose the keyboard mapping appropriate for your computer, and enter a hostname for your machine.</p>

<p>When asked to choose system components I recommend selecting all of them. <code>doc</code> is useful to have locally if your Internet connection isn’t working, and system <code>src</code> is needed for some Ports to build and install.</p>

<h3 id="disks">Disks</h3>
<p>On the next screen, Partitioning, select either the <code>Auto (ZFS)</code> option or the <code>Auto (UFS)</code> option. UFS is the traditional <a href="https://en.wikipedia.org/wiki/Unix_File_System">Unix file system</a> and is usable on any machine. It is fragile in the case of power loss or crashes unless journaled. <a href="https://en.wikipedia.org/wiki/ZFS">ZFS</a>, on the other hand, is both a volume (pool) manager and a great filesystem. I strongly recommend ZFS for modern computers due to its resilience and rich feature set that makes it very practical for desktop use. It checksums your data constantly to ensure integrity and prevent silent corruption on-disk, and its copy-on-write model never overwrites blocks, eliminating the <a href="https://en.wikipedia.org/wiki/RAID#Atomicity:_including_parity_inconsistency_due_to_system_crashes">RAID-5 write hole</a>. It supports snapshots, allowing you to snapshot a filesystem at an arbitrary point in time and roll back to it at will, like Apple’s Time Machine, and snapshots can be sent seamlessly across a network for incremental backups. It supports SSD cache devices to speed up reads and writes of pools backed by magnetic hard drives. It can deduplicate files, reducing the on-disk space for files that are significantly identical at the cost of lots of RAM. Achieving these features makes ZFS very memory-hungry. Plan to have 1GiB of physical memory for every 1TB of space in a zpool and much more if deduplication is used. ZFS can be <a href="https://wiki.freebsd.org/ZFSTuningGuide">tuned</a> for tighter memory limitations, but very limited systems should use UFS instead. Most modern machines should not need to tune ZFS at all. It will use the memory available to it but also respond to memory pressure when other processes need RAM.</p>

<p>Assuming you choose ZFS, set up your zpool. The pool can be a single disk (still called <code>stripe</code> but just striped with itself), a mirror, or any combination of disks in RAID-Z. Name the pool something. I usually name boot pools after the hostname of the machine and then data pools by function.</p>

<p>The other ZFS options are dictated by your hardware.</p>

<picture>
    <source srcset="/images/generated/freebsd10-zfs-configuration-720by400-4cde0d.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-zfs-configuration-720by400-4cde0d.png">
    <source srcset="/images/generated/freebsd10-zfs-configuration-720by400-4cde0d.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-zfs-configuration-720by400-4cde0d.png" media="(min-width: 850px)">
    <source srcset="/images/generated/freebsd10-zfs-configuration-720by400-4cde0d.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-zfs-configuration-600by333-4cde0d.png" media="(min-width: 620px)">
    <source srcset="/images/generated/freebsd10-zfs-configuration-450by250-4cde0d.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-zfs-configuration-300by167-4cde0d.png" media="">
    <img srcset="/images/generated/freebsd10-zfs-configuration-720by400-4cde0d.png" itemprop="image" alt="ZFS Pool configuration screen in FreeBSD installer.">
  </picture>

<p>If you have an <a href="https://en.wikipedia.org/wiki/Advanced_Format">Advanced Format</a> hard disk (any made in the last few years) or an SSD you should force 4k sectors.</p>

<p>If your computer has a recent Intel or AMD CPU supporting <a href="https://en.wikipedia.org/wiki/AES_instruction_set">AES instruction set</a> there is very little downside to encrypting your pool. I recommend it for any pool that doesn’t need to automatically mount at boot, i.e. I use encryption on my workstation but not on my FreeBSD router. Encrypting multiple physical devices with the same key will only require the passphrase once. You will be prompted for the passphrase while the kernel has loaded and is detecting hardware. On my system the passphrase prompt usually gets buried under my USB devices as the kernel enumerates them, so if you find yourself stuck there at boot hit a few keys and Enter to make the passphrase prompt reappear.</p>

<p>Use <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table">GUID Partition Table</a> (GPT) if your computer uses EFI. PCs with BIOS most likely need to use a legacy <a href="https://en.wikipedia.org/wiki/Master_Boot_Record">MBR</a>. GPT is a requirement to use disks over 2TB in size because MBR can address a maximum of 2<sup>32</sup> x 512 bytes, just larger than 2TB.</p>

<p>The amount of swap space you use if any is dictated by the amount of memory in your computer and the loads you plan to place on it. Conventional wisdom says to use a swap size double the amount of physical memory in the machine, but I find that to apply less and less when you get up into double-digit gigabytes of RAM. My computer has 16GiB or physical memory and 8GiB of swap space defined. On some systems I don’t touch swap at all, but I recommend having at least some. You can enlarge it later.</p>

<h3 id="finish">Finish</h3>

<p>Once your disks are set up the installer will copy files and prompt you for the base configuration of things such root password, time zone, and network options. It will ask you to add at least one non-root user. When creating your personal user account be sure to invite it to the <code>wheel</code> and <code>operator</code> user groups. <code>wheel</code> membership is necessary to gain root privileges for administration tasks, and you will assign <code>operator</code> device permissions later in this guide. When prompted you can remove the install disk and reboot into your new system!</p>

<h2 id="upgrading">Upgrading</h2>

<p>Are you running a previous version already? The upgrade process is covered in full in <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/updating-upgrading.html">Chapter 24</a> of the Handbook, but assuming you are running the stock <code>GENERIC</code> kernel the process is very simple using <code>freebsd-update</code>. Check my <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#upgrade-notes">upgrade notes</a> section for specific version instructions.</p>

<p>First, fetch the new system using <code>freebsd-update install</code> by specifying the <code>-r</code> argument. Without <code>-r</code> it will just fetch security and errata updates for your current minor version. You can upgrade to a new minor version in your current major or to a new major version entirely. If you’re upgrading to a new major version, go to the <code>.0</code> release first. Don’t upgrade from, say, <code>8.4-RELEASE</code> to <code>9.3-RELEASE</code>, but to <code>9.0-RELEASE</code> first and then to <code>9.3</code>.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>freebsd-update upgrade -r 10.1-RELEASE
</li></ol></code></pre></div></figure>

<p><code>upgrade</code> is interactive and will ask you to confirm the system components it thinks you have installed. Once it fetches the updated system files you can begin the installation process.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>freebsd-update install
</li></ol></code></pre></div></figure>

<p>This will install the new kernel but not any non-kernel OS components like userland executables. Reboot via <code>shutdown -r now</code>, <code>reboot</code>, or a swift kick to the power switch. When the system comes up, log in as root and install the new userland by re-running the install command.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>freebsd-update install
</li></ol></code></pre></div></figure>

<p>At this point your OS itself is ready to go but your Ports need to be updated to run on the new major version via your <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#staying-up-to-date">preferred method</a>, such as <code>pkg update &amp;&amp; pkg upgrade</code>, <code>portupgrade</code>, or <code>portmaster</code>. It is alternatively possible to maintain ABI compatibility with an older major version of FreeBSD by installing a compatibility library package such as <a class="port" href="http://freshports.org/misc/compat9x" title="misc/compat9x">misc/compat9x</a>, but you shouldn’t unless you need it for a particular binary that isn’t available as source to build for the new version.</p>

<p>Once that’s done you can run <code>freebsd-update install</code> one last time to chean out the shared libraries from the previous version. Reboot once more to your final updated system.</p>

<h2 id="first-boot">First Boot</h2>

<p>Log in as root with the password you configured in the installer. Congratulations! You are now a FreeBSD user!</p>

<p>The FreeBSD base system is a fully-featured operating system but as you can see does not contain a graphical environment or any third-party software like your typical Linux distribution. Before installing any of that you should configure your new system to be a better desktop. FreeBSD’s roots are in academia and the datacenter, so its default configuration is very conservative. The desktop or laptop computer you are most likely using is vastly more powerful than some of the configurations that will run FreeBSD, so there is room to grow without being unreasonable.</p>

<p>You will need a text editor to edit configuration files. The base system ships with <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=vi&amp;ektion=&amp;manpath=" title="man vi">vi</a> (not vim!) but for most users I would recommend <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=ee&amp;ektion=&amp;manpath=" title="man ee">ee</a>. It’s part of the base system and is a simple but fully-featured editor like nano from the Linux world. If you aren’t happy with <code>ee</code> there are plenty of great editors you can install from Ports, like <a class="port" href="http://freshports.org/editors/vim" title="editors/vim">editors/vim</a>, but let’s continue.</p>

<p>If you aren’t entirely comfortable with editing config files you can re-access the graphical configuration screen from the installer by running <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=bsdconfig&amp;ektion=&amp;manpath=" title="man bsdconfig">bsdconfig</a> as root, but I don’t think you’d be reading this page if that’s the case :)</p>

<h3 id="utf-8">UTF-8</h3>

<p>The <code>LANG=xx_YY.ZZZZ</code> <a href="https://en.wikipedia.org/wiki/Environment_variable">environment variable</a> sets the system <a href="https://en.wikipedia.org/wiki/Locale">locale</a> to language code <code>xx</code>, country code <code>YY</code>, and <a href="https://en.wikipedia.org/wiki/Character_encoding">character encoding</a> <code>ZZZZ</code>. Language and country code affect default application language, number formatting, date and time formatting, string collation, currency settings, and more.</p>

<p>By enabling a locale using UTF-8 character encoding, the system can understand and display each of the 1112064 characters in the <a href="https://en.wikipedia.org/wiki/Unicode">Unicode character set</a>, instead of just US ASCII as is default with <code>LANG=C</code>.</p>

<p>Check <code>locale -a | grep UTF-8</code> for a list of every available UTF-8 locale on your computer. As an American anglophone, I use <code>en_US.UTF-8</code>.</p>

<p>Edit the login class capability database in /etc/<a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=login.conf&amp;ektion=&amp;manpath=" title="man login.conf">login.conf</a> to add a default character set and locale. Login shells will inherit the environment variables defined here in the <code>default</code> class or in a narrower class if it matches one.</p>

<figure class="code"><figcaption><span> /etc/login.conf </span></figcaption><div class="highlight"><pre><code class="diff"><ol><li>--- login.conf.default	2012-01-02 17:08:05.804291477 -0500
</li><li>+++ login.conf	2012-01-02 17:08:16.996213774 -0500
</li><li>@@ -44,7 +44,9 @@
</li><li> 	\:pseudoterminals=unlimited:\
</li><li> 	\:priority=0:\
</li><li> 	\:ignoretime@:\
</li><li>-	\:umask=022:
</li><li>+	\:umask=022:\
</li><li>+	\:charset=UTF-8:\
</li><li>+	\:lang=en_US.UTF-8:
</li></ol></code></pre></div></figure>

<p>Rebuild the login database with <code>cap_mkdb /etc/login.conf</code> after making changes.</p>

<p>You may have to specify the new locale elsewhere (like <code>/etc/profile</code>) for non login shell uses such as GDM and other login managers.</p>

<figure class="code"><figcaption><span> /etc/profile </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>LANG=en_US.UTF-8;   export LANG
</li><li>CHARSET=UTF-8;  export CHARSET
</li><li>GDM_LANG=en_US.UTF-8;   export GDM_LANG
</li></ol></code></pre></div></figure>

<p>You can read more in the <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/using-localization.html">Using Localization</a> chapter of the Handbook. Check your work by running <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=locale&amp;ektion=&amp;manpath=" title="man locale">locale</a> on your next login.</p>

<figure class="code"><figcaption><span> locale </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>LANG=en_US.UTF-8
</li><li>LC_CTYPE="en_US.UTF-8"
</li><li>LC_COLLATE="en_US.UTF-8"
</li><li>LC_TIME="en_US.UTF-8"
</li><li>LC_NUMERIC="en_US.UTF-8"
</li><li>LC_MONETARY="en_US.UTF-8"
</li><li>LC_MESSAGES="en_US.UTF-8"
</li><li>LC_ALL=en_US.UTF-8
</li></ol></code></pre></div></figure>

<h3 id="build-settings">Build Settings</h3>

<p>Some third-party software options can only be set at compile time. Here are a few you should consider before getting started installing things.</p>

<p>The <a href="https://qt-project.org/">Qt</a> toolkit has some options that can be set via any combination of the following knobs. If you change the <code>QT4_OPTIONS</code> after Qt is installed you will need to rebuild <a class="port" href="http://freshports.org/devel/qt4-corelib" title="devel/qt4-corelib">devel/qt4-corelib</a> and <a class="port" href="http://freshports.org/x11-toolkits/qt4-gui" title="x11-toolkits/qt4-gui">x11-toolkits/qt4-gui</a>.</p>

<ul>
  <li><a href="http://blog.qt.digia.com/blog/2008/05/13/introducing-qgtkstyle/">QGtkStyle</a> is a selectable theme engine that lets Qt applications integrate more closely with <a href="http://www.gtk.org/">GTK+</a> environments and can be enabled with the <code>QGTKSTYLE</code> Qt4 option. You should enable this option if you plan to use a GTK+-based desktop environment like MATE or XFCE. Once built you can select the GTK+ visual style in <code>qt4-qtconfig</code>.</li>
  <li><abbr title="Common Unix Printing System">CUPS</abbr> is the standard printing engine on Free Unix-like systems. Support for it in Qt can be enabled with the <code>CUPS</code> Qt4 option.</li>
  <li><a href="http://www.radscan.com/nas.html">Network Audio System</a> is a network transparent client/server audio transport system and can be enabled in Qt applications by setting the <code>NAS</code> Qt4 option.</li>
</ul>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>echo "QT4_OPTIONS=	CUPS QGTKSTYLE NAS" &gt;&gt; /etc/make.conf
</li></ol></code></pre></div></figure>

<h3 id="tuning-and-drivers">Tuning and drivers</h3>

<p>Change a few <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=sysctl&amp;ektion=&amp;manpath=" title="man sysctl">sysctl</a> variables to enhance the experience of FreeBSD on the desktop, including expanding the amount of shared memory, tuning the <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=sched_ule&amp;ektion=4&amp;manpath=FreeBSD%2010.0-RELEASE" title="man sched_ule from FreeBSD 10.0-RELEASE">process scheduler</a> for desktop use, and increasing the limit of simultaneously-open files to something sensible.</p>

<figure class="code"><figcaption><span> /etc/sysctl.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Enhance shared memory X11 interface
</li><li>kern.ipc.shmmax=67108864
</li><li>kern.ipc.shmall=32768
</li><li>
</li><li># Enhance desktop responsiveness under high CPU use (200/224)
</li><li>kern.sched.preempt_thresh=224
</li><li>
</li><li># Bump up maximum number of open files
</li><li>kern.maxfiles=200000
</li><li>
</li><li># Disable PC Speaker
</li><li>hw.syscons.bell=0
</li><li>
</li><li># Shared memory for Chromium
</li><li>kern.ipc.shm_allow_removed=1
</li></ol></code></pre></div></figure>

<p>Some knobs can only be set at boot by the <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=loader&amp;ektion=&amp;manpath=" title="man loader">loader</a> by setting them in <code>/boot/loader.conf</code>. This is also where we define kernel modules to load at boot.</p>

<figure class="code"><figcaption><span> /boot/loader.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Use new graphical console driver
</li><li>kern.vty=vt
</li><li>
</li><li># Devil worship in loader logo
</li><li>loader_logo="beastie"
</li><li>
</li><li># Boot-time kernel tuning
</li><li>kern.ipc.shmseg=1024
</li><li>kern.ipc.shmmni=1024
</li><li>kern.maxproc=10000
</li><li>
</li><li># Load MMC/SD card-reader support
</li><li>mmc_load="YES"
</li><li>mmcsd_load="YES"
</li><li>sdhci_load="YES"
</li><li>
</li><li># Access ATAPI devices through the CAM subsystem
</li><li>atapicam_load="YES"
</li><li>
</li><li># Filesystems in Userspace
</li><li>fuse_load="YES"
</li><li>
</li><li># Intel Core thermal sensors
</li><li>coretemp_load="YES"
</li><li>
</li><li># AMD K8, K10, K11 thermal sensors
</li><li>amdtemp_load="YES"
</li><li>
</li><li># In-memory filesystems
</li><li>tmpfs_load="YES"
</li><li>
</li><li># Asynchronous I/O
</li><li>aio_load="YES"
</li><li>
</li><li># Handle Unicode on removable media
</li><li>libiconv_load="YES"
</li><li>libmchain_load="YES"
</li><li>cd9660_iconv_load="YES"
</li><li>msdosfs_iconv_load="YES"
</li></ol></code></pre></div></figure>

<p>Finally, enable everything else.</p>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>moused_enable="YES"
</li><li>
</li><li># powerd: hiadaptive speed while on AC power, adaptive while on battery power
</li><li>powerd_enable="YES"
</li><li>powerd_flags="-a hiadaptive -b adaptive"
</li><li>
</li><li># Enable BlueTooth
</li><li>hcsecd_enable="YES"
</li><li>sdpd_enable="YES"
</li><li>
</li><li># Synchronize system time
</li><li>ntpd_enable="YES"
</li><li># Let ntpd make time jumps larger than 1000sec
</li><li>ntpd_flags="-g"
</li></ol></code></pre></div></figure>

<p>Enable remote access via SSH if you plan to use it. Otherwise, there’s no need to expose your system.</p>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Remote logins
</li><li>sshd_enable="YES"
</li></ol></code></pre></div></figure>

<h3 id="mounts">Mounts</h3>

<p>The <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=procfs&amp;ektion=&amp;manpath=" title="man procfs">procfs</a> and <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=fdescfs&amp;ektion=&amp;manpath=" title="man fdescfs">fdescfs</a> virtual filesystems are not a default part of BSD but are frequently required for compatibility with programs and environments written with Linux in mind, such as GNOME/MATE and KDE. The FreeBSD equivalent is <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=sysctl&amp;ektion=&amp;manpath=" title="man sysctl">sysctl</a>, but you can mount <code>/proc</code> too if you plan to use software requiring it.</p>

<p>Some special filesystems like <code>fdescfs</code> must be mounted <code>late</code> on ZFS-rooted systems since the location of their mountpoint won’t exist until late in the boot process.</p>

<figure class="code"><figcaption><span> /etc/fstab </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>proc	/proc	procfs	rw	0	0
</li><li>fdesc	/dev/fd	fdescfs	rw,auto,late	0	0
</li></ol></code></pre></div></figure>

<p>Toggle the sysctl that lets users mount disks.</p>

<figure class="code"><figcaption><span> /etc/sysctl.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Allow users to mount disks
</li><li>vfs.usermount=1
</li></ol></code></pre></div></figure>

<p>If you neglected to add your personal user account to the <code>wheel</code> and <code>operator</code> groups at creation, now is a good time to do so. <code>wheel</code> membership lets you use <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=su&amp;ektion=&amp;manpath=" title="man su">su</a> to become root, and <code>operator</code> membership is required for device permissions in this configuration. In this example my user is <code>nicole</code>. Substitute it for yours.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>pw usermod nicole -G wheel
</li><li>pw usermod nicole -G operator
</li></ol></code></pre></div></figure>

<h3 id="device-permissions">Device Permissions</h3>

<p>Relax default permissions on the <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=devfs&amp;ektion=&amp;manpath=FreeBSD%2010.0-RELEASE" title="man devfs from FreeBSD 10.0-RELEASE">device filesystem</a> to allow normal users access to a variety of disks and input/output devices.</p>

<p>Permissions for devices existing at boot time are set in <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=devfs.conf&amp;ektion=&amp;manpath=" title="man devfs.conf">devfs.conf</a>. Each line defines a full device path and octal permission value.</p>

<figure class="code"><figcaption><span> /etc/devfs.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Allow all users to access optical media
</li><li>perm    /dev/acd0       0666
</li><li>perm    /dev/acd1       0666
</li><li>perm    /dev/cd0        0666
</li><li>perm    /dev/cd1        0666
</li><li> 
</li><li># Allow all USB Devices to be mounted
</li><li>perm    /dev/da0        0666
</li><li>perm    /dev/da1        0666
</li><li>perm    /dev/da2        0666
</li><li>perm    /dev/da3        0666
</li><li>perm    /dev/da4        0666
</li><li>perm    /dev/da5        0666
</li><li> 
</li><li># Misc other devices
</li><li>perm    /dev/pass0      0666
</li><li>perm    /dev/xpt0       0666
</li><li>perm    /dev/uscanner0  0666
</li><li>perm    /dev/video0     0666
</li><li>perm    /dev/tuner0     0666
</li><li>perm    /dev/dvb/adapter0/demux0    0666
</li><li>perm    /dev/dvb/adapter0/dvr       0666
</li><li>perm    /dev/dvb/adapter0/frontend0 0666
</li></ol></code></pre></div></figure>

<p>For devices that may be connected post-boot, we add an entry to a <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=devfs.rules&amp;ektion=&amp;manpath=" title="man devfs.rules">devfs.rules</a> ruleset. Rulesets must have a unique name and number, and their rules are composed of a path or quoted path <a href="https://en.wikipedia.org/wiki/Glob_%28programming%29">glob</a> and octal permission value.</p>

<figure class="code"><figcaption><span> /etc/devfs.rules </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>[devfsrules_common=7]
</li><li>add path 'ad[0-9]\*'		mode 666
</li><li>add path 'ada[0-9]\*'	mode 666
</li><li>add path 'da[0-9]\*'		mode 666
</li><li>add path 'acd[0-9]\*'	mode 666
</li><li>add path 'cd[0-9]\*'		mode 666
</li><li>add path 'mmcsd[0-9]\*'	mode 666
</li><li>add path 'pass[0-9]\*'	mode 666
</li><li>add path 'xpt[0-9]\*'	mode 666
</li><li>add path 'ugen[0-9]\*'	mode 666
</li><li>add path 'usbctl'		mode 666
</li><li>add path 'usb/\*'		mode 666
</li><li>add path 'lpt[0-9]\*'	mode 666
</li><li>add path 'ulpt[0-9]\*'	mode 666
</li><li>add path 'unlpt[0-9]\*'	mode 666
</li><li>add path 'fd[0-9]\*'		mode 666
</li><li>add path 'uscan[0-9]\*'	mode 666
</li><li>add path 'video[0-9]\*'	mode 666
</li><li>add path 'tuner[0-9]*'  mode 666
</li><li>add path 'dvb/\*'		mode 666
</li><li>add path 'cx88*' mode 0660
</li><li>add path 'cx23885*' mode 0660 # CX23885-family stream configuration device
</li><li>add path 'iicdev*' mode 0660
</li><li>add path 'uvisor[0-9]*' mode 0660
</li></ol></code></pre></div></figure>

<p>Enable our new ruleset.</p>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>devfs_system_ruleset="devfsrules_common"
</li></ol></code></pre></div></figure>

<h3 id="sound">Sound</h3>

<p>Enable sound support at boot in loader.conf, and load it immediately with <code>kldload snd_driver</code>.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>echo 'snd_driver_load="YES"' &gt;&gt; /boot/loader.conf
</li></ol></code></pre></div></figure>

<p>Then, <code>cat /dev/sndstat</code> to see your available devices.</p>

<figure class="code"><figcaption><span> cat /dev/sndstat </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>FreeBSD Audio Driver (newpcm: 64bit 2009061500/amd64)
</li><li>Installed devices:
</li><li>pcm0: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; (play)
</li><li>pcm1: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; (play)
</li><li>pcm2: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; (play)
</li><li>pcm3: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; (play)
</li><li>pcm4: &lt;HDA Realtek ALC892 PCM #0 Analog&gt; (play/rec)
</li><li>pcm5: &lt;HDA Realtek ALC892 PCM #1 Analog&gt; (play/rec)
</li><li>pcm6: &lt;HDA Realtek ALC892 PCM #2 Digital&gt; (play)
</li><li>pcm7: &lt;HDA Realtek ALC892 PCM #3 Digital&gt; (play)
</li><li>pcm8: &lt;USB audio&gt; (play) default
</li><li>pcm9: &lt;USB audio&gt; (rec)
</li></ol></code></pre></div></figure>

<p>The <code>hw.snd.default_unit</code> sysctl variable controls the default audio output. I want to use the S/PDIF output of my onboard Realtek audio, <code>pcm6</code>, so I set <code>hw.snd.default_unit</code> to <code>6</code>.</p>

<p>Enabling the <code>hw.snd.default_auto</code> boolean will automatically assign <code>hw.snd.default_unit</code> to newly-attached devices.</p>

<figure class="code"><figcaption><span> /etc/sysctl.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># S/PDIF out on my MSI board
</li><li>hw.snd.default_unit=6
</li><li>
</li><li># Don't automatically use new sound devices
</li><li>hw.snd.default_auto=0
</li></ol></code></pre></div></figure>

<h2 id="networking">Networking</h2>

<p>If you didn’t enable networking during the install process now is a good time to do so. Here as an example is my computer, <code>emi</code>, a desktop with a wired network. I have a Realtek interface, <code>re0</code>. The name of your interface may vary based on the driver it uses. Most drivers are built into the <code>GENERIC</code> kernel, so your interface should be visible by running <code>ifconfig</code>. Common drivers you may see include <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=if_em&amp;ektion=&amp;manpath=" title="man if_em">if_em</a> for Intel PRO interfaces, <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=if_re&amp;ektion=&amp;manpath=" title="man if_re">if_re</a> for Realtek interfaces, and <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=if_en&amp;ektion=&amp;manpath=" title="man if_en">if_en</a> for Midway interfaces. Read more about network configuration <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/config-network-setup.html">in the Handbook</a> to learn about other possible configurations.</p>

<h3 id="wired">Wired</h3>

<p>You can use DHCP and SLAAC auto-discovery on most home networks:</p>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>hostname="emi.aloe.cooltrainer.org"
</li><li>
</li><li># Enable DHCP for re0 and don't let dhclient block
</li><li>background_dhclient="YES"
</li><li>ifconfig_re0="DHCP"
</li><li>ifconfig_re0_ipv6="inet6 accept_rtadv"
</li></ol></code></pre></div></figure>

<p>You can bring up the interface and get a DHCP address immediately by issuing <code>ifconfig re0 up</code> and <code>dhclient re0</code>, again substituting the name of your own interface.</p>

<p>Alternatively, you can supply static network addresses for your computer and default router:</p>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>hostname="emi.aloe.cooltrainer.org"
</li><li>
</li><li>ifconfig_re0="inet 172.16.0.40 netmask 255.240.0.0 broadcast 172.31.255.255"
</li><li>defaultrouter="172.16.0.1"
</li><li>
</li><li>ifconfig_re0_ipv6="inet6 2001:370:10f5:806::40 prefixlen 64"
</li><li>ipv6_defaultrouter="2001:370:10f5:806::1"
</li></ol></code></pre></div></figure>

<h3 id="wireless">Wireless</h3>

<p>For WiFi configuration, see the <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/network-wireless.html">wireless networking</a> section of the Handbook. I sometimes tether my desktop to my Android phone using a <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=run&amp;ektion=&amp;manpath=" title="man run">run</a> B/G USB interface. It’s as simple as defining a new virtual <code>wlan</code> interface on <code>run0</code>, configuring <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=wpa_supplicant&amp;ektion=&amp;manpath=" title="man wpa_supplicant">wpa_supplicant</a> for the WPA pre-shared key, and specifying the SSID and encryption standard (WPA).</p>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>wlans_run0="wlan0"
</li><li>ifconfig_wlan0="ssid Doubleshot WPA DHCP"
</li></ol></code></pre></div></figure>

<figure class="code"><figcaption><span> /etc/wpa_supplicant.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>network={
</li><li>	ssid="Doubleshot"
</li><li>	psk="pantsupantsu"
</li><li>}
</li></ol></code></pre></div></figure>

<h3 id="ipv6">IPv6</h3>

<p>My configuration examples cover both IPv4 and IPv6 because I have a dual-stacked network. Depending on your network you may prefer to enable and prefer IPv6 like me, enable it but prefer IPv4, or not enable it at all. This can be done in rc.conf:</p>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>ipv6_activate_all_interfaces="YES"
</li><li>ip6addrctl_policy="ipv6_prefer"
</li></ol></code></pre></div></figure>

<figure class="code"><figcaption><span> /etc/sysctl.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Accept IPv6 router advertisements
</li><li>net.inet6.ip6.accept_rtadv=1
</li></ol></code></pre></div></figure>

<h3 id="firewall">Firewall</h3>

<p>You should run a firewall. Windows, OS X, and many Linux distributions ship with a default firewall ruleset. FreeBSD does not, because there is no one-size-fits-all firewall configuration, but it does include one of the best software firewalls in the world, <a href="http://www.freebsd.org/doc/handbook/firewalls-pf.html">PF</a>, courtesy of the OpenBSD project.</p>

<p>Configuring a firewall can be a very complex topic. There are <a href="http://www.amazon.com/The-Book-PF-No-Nonsense-Firewall/dp/159327274X">entire books</a> on the matter. Shown here is the ruleset from my computer. It has rules for a single network interface defined at the top of the file in the <code>ext_if</code> macro. Change it to the name of your computer’s interface as seen in <code>ifconfig</code>. The macros on the next few lines define the TCP and UDP ports on which this ruleset will allow incoming connections. My computer runs an SSH server on the default port, runs <a class="port" href="http://freshports.org/www/subsonic" title="www/subsonic">www/subsonic</a> on port 443 (HTTPS), and has control ports for <a class="port" href="http://freshports.org/net/mosh" title="net/mosh">net/mosh</a> in the 60000 range. You can open ports for additional services by defining them in those macros. The named services like <code>ssh</code> are defined in /etc/<a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=services&amp;ektion=&amp;manpath=" title="man services">services</a>.</p>

<figure class="code"><figcaption><span> /etc/pf.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># The name of our network interface as seen in `ifconfig`
</li><li>ext_if="re0"
</li><li>
</li><li># Macros to define the set of TCP and UDP ports to open.
</li><li># Add additional ports or ranges separated by commas.
</li><li># UDP 60000-60010 is mosh control http://mosh.mit.edu/
</li><li>tcp_services = "{ssh, https}"
</li><li>udp_services = "{60000:60010}"
</li><li>
</li><li># If you block all ICMP requests you will break things like path MTU
</li><li># discovery. These macros define allowed ICMP types. The additional
</li><li># ICMPv6 types are for neighbor discovery (RFC 4861)
</li><li>icmp_types = "{echoreq, unreach}"
</li><li>icmp6_types="{echoreq, unreach, 133, 134, 135, 136, 137}"
</li><li>
</li><li># Modulate the initial sequence number of TCP packets.
</li><li># Broken operating systems sometimes don't randomize this number,
</li><li># making it guessable.
</li><li>tcp_state="flags S/SA keep state"
</li><li>udp_state="keep state"
</li><li>
</li><li># Don't send rejections. Just drop.
</li><li>set block-policy drop
</li><li>
</li><li># Exempt the loopback interface to prevent services utilizing the
</li><li># local loop from being blocked accidentally.
</li><li>set skip on lo0
</li><li>
</li><li># all incoming traffic on external interface is normalized and fragmented
</li><li># packets are reassembled.
</li><li>scrub in on $ext_if all fragment reassemble
</li><li>
</li><li># set a default deny policy.
</li><li>block in log all
</li><li>
</li><li># This is a desktop so be permissive in allowing outgoing connections.
</li><li>pass out quick modulate state
</li><li>
</li><li># Enable antispoofing on the external interface
</li><li>antispoof for $ext_if inet
</li><li>antispoof for $ext_if inet6
</li><li>
</li><li># block packets that fail a reverse path check. we look up the routing
</li><li># table, check to make sure that the outbound is the same as the source
</li><li># it came in on. if not, it is probably source address spoofed.
</li><li>block in from urpf-failed to any
</li><li>
</li><li># drop broadcast requests quietly.
</li><li>block in quick on $ext_if from any to 255.255.255.255
</li><li>
</li><li># Allow the services defined in the macros at the top of the file
</li><li>pass in on $ext_if inet proto tcp from any to any port $tcp_services $tcp_state
</li><li>pass in on $ext_if inet6 proto tcp from any to any port $tcp_services $tcp_state
</li><li>
</li><li>pass in on $ext_if inet proto udp from any to any port $udp_services $udp_state
</li><li>pass in on $ext_if inet6 proto udp from any to any port $udp_services $udp_state
</li><li>
</li><li># Allow ICMP
</li><li>pass inet proto icmp all icmp-type $icmp_types keep state
</li><li>pass inet6 proto icmp6 all icmp6-type $icmp6_types keep state
</li></ol></code></pre></div></figure>

<p>Enable the firewall in rc.conf and start it now.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>echo 'pf_enable="YES"' &gt;&gt; /etc/rc.conf
</li><li>service pf start
</li></ol></code></pre></div></figure>

<p>After making changes to your ruleset you can check them for validity and load the new rules with <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=pfctl&amp;ektion=&amp;manpath=" title="man pfctl">pfctl</a>. It will abort if your ruleset contains an error unlike <code>service pf restart</code> which will stop, fail to start due to the error, and leave you locked out of SSH. Ask me how I know this will happen.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>pfctl -f /etc/pf.conf
</li></ol></code></pre></div></figure>

<h2 id="installing-software">Installing Software</h2>

<p>FreeBSD is historically famous for its <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/ports-using.html#PORTS-SKELETON">Ports Collection</a>, a directory skeleton of <code>Makefile</code>s and patches describing how to programmatically build packages of third-party software for your computer. Each port contains the metadata for that piece of software including the filename of the source archive, <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=sha256&amp;ektion=&amp;manpath=" title="man sha256">sha256</a> hash of the files, what other software dependencies it requires, what compile-time options are available, what files it installs, and any patches necessary to work around non-portable code or fix issues that can’t be upstreamed to the projects themselves. Every port has a maintainer whose job it is to keep the port up to date and respond to issues if they arise with newer versions of the operating system. For example, check out <a href="http://www.freshports.org/search.php?stype=maintainer&amp;method=exact&amp;query=root@cooltrainer.org">the ports I maintain</a>! When you <code>make</code> a port in the Ports Collection it downloads the upstream source archive, patches it, configures it, builds a customized binary package, and uses FreeBSD’s underlying binary package manager to install it.</p>

<p>Third-party software installed through the package manager ends up in <code>/usr/local</code> where it mirrors the  hierarchy of <code>/usr</code>. It might seem confusing to have them in two places, but it gives a fairly clean separation of the base system from the packages. For example, <code>/usr/local/bin</code> is where you will find <code>firefox</code> after installing <a class="port" href="http://freshports.org/www/firefox" title="www/firefox">www/firefox</a>, but <code>/usr/bin</code> is where you will find <code>ee</code> or <code>sed</code>. As you have experienced, configuration for the operating system is done in <code>/etc</code>. Configuration files for your ports will usually be in <code>/usr/local/etc</code>. Check the <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=hier&amp;ektion=&amp;manpath=" title="man hier">hier</a> manual for the full layout.</p>

<p>As of FreeBSD 10 there is a new binary package manager, known as <code>pkgng</code> or just <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/pkgng-intro.html">pkg</a>. It replaces the old suite of <code>pkg_</code> tools such as <code>pkg_add</code> and <code>pkg_delete</code> and contains many advanced features that have been missing from FreeBSD for years. Compared to the old package manager, pkgng supports safe upgrades (meaning it saves a copy of the previous-version package to roll back in case of failure), multiple repositories, package staging before install, a more modern binary package format, a more robust sqlite-based package registration database, and most importantly remote binary package upgrades.</p>

<p>Thanks to pkgng it is now possible to add multiple remote binary package repositories and get updates from them without relying on building Ports at all. I still prefer building from Ports to using the binary packages because there are many useful non-default options on many useful ports and many ports unavailable as binary packages on the default repository. FreeBSD Ports’ options are as conservative as the base system, so options that pull in optional shared libraries or enable non-Free features will be off by default, and binary packages from the official package repository will reflect those defaults. Examples of non-default options you as a desktop user will probably want include support for most of the codecs in <a class="port" href="http://freshports.org/multimedia/mplayer" title="multimedia/mplayer">multimedia/mplayer</a> and <a class="port" href="http://freshports.org/multimedia/vlc" title="multimedia/vlc">multimedia/vlc</a>, PAM support in <a class="port" href="http://freshports.org/net/samba36" title="net/samba36">net/samba36</a>, USB printer support in <a class="port" href="http://freshports.org/print/cups" title="print/cups">print/cups</a>, and many others.</p>

<p>It is possible to mix and match binary packages and building certain packages from Ports using pkgng’s <code>lock</code> and <code>unlock</code>, but that gets more advanced and more annoying than is appropriate for this guide. I build my ports on one of my computers using <a href="https://fossil.etoilebsd.net/poudriere/doc/trunk/doc/index.wiki">poudriere</a> then use that computer as a binary package repository for the other FreeBSD computers on my network. A new user with just one computer should stick with one or the other until they are more familiar with the OS. I use and recommend Ports for users in this guide for the customizability, but the names are equivalent. For example, when I say “Change directory to <code>/usr/ports/www/firefox</code> and <code>make install</code>” you can also use <code>pkg install firefox</code> to get the already-compiled package from the official default repo with default options.</p>

<p>No matter the route you choose, you should begin by updating your pkg repository or your Ports tree. <code>pkg update</code> will fetch an updated index from every <code>PACKAGESITE</code> defined in that environment variable or in <code>/usr/local/etc/pkg.conf</code>. For Ports, <code>portsnap fetch extract</code> will retrieve a new full ports tree. You should read <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=pkg&amp;ektion=&amp;manpath=" title="man pkg">pkg</a> for the list of commands supported by <code>pkg</code> and read <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=ports&amp;ektion=&amp;manpath=" title="man ports">ports</a> for the list of available <code>make</code> targets in Ports, but in general you will use <code>pkg install &lt;portname&gt;</code> or <code>cd /usr/ports/&lt;category&gt;/&lt;portname&gt; &amp;&amp; make install</code> to install software.</p>

<p>The first things I usually install are <a class="port" href="http://freshports.org/sysutils/tmux" title="sysutils/tmux">sysutils/tmux</a> and <a class="port" href="http://freshports.org/shells/zsh" title="shells/zsh">shells/zsh</a> because I prefer it to the venerable default <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=tcsh&amp;ektion=&amp;manpath=" title="man tcsh">tcsh</a>. You might be more comfortable with <a class="port" href="http://freshports.org/shells/bash" title="shells/bash">shells/bash</a>. Once installed, changing your user’s default shell is as simple as <code>chsh -s /usr/local/bin/zsh</code>.</p>

<h3 id="staying-up-to-date">Staying Up To Date</h3>

<p>Before updating your Ports tree or pkg catalogue I suggest checking out <a href="http://svnweb.freebsd.org/ports/head/UPDATING?view=markup">UPDATING</a>. This file – also found at <code>/usr/ports/UPDATING</code> – tracks breaking changes in packages and the steps necessary to to fix them. It will tell you when configuration file syntax has changed, how to fix dependencies when ports split or merge, when default versions of packages change, and more.</p>

<p>You can update your already-extracted Ports tree to the newest revision with <code>portsnap fetch update</code>. There are two common tools for programmatically upgrading your ports, <a class="port" href="http://freshports.org/ports-mgmt/portupgrade" title="ports-mgmt/portupgrade">ports-mgmt/portupgrade</a> and <a class="port" href="http://freshports.org/ports-mgmt/portmaster" title="ports-mgmt/portmaster">ports-mgmt/portmaster</a>. I prefer portupgrade because portmaster stubbornly aborts the entire upgrade on any error, but you might like it. The common portmaster usage is <code>portmaster -a</code> to upgrade installed ports. I usually update with <code>portupgrade -rac</code>, with <code>-r</code> <code>-a</code> to recursively update all installed ports and <code>-c</code> to preemptively show new port options so they won’t interrupt the build.</p>

<p>If you are using binary packages you can update the package repository catalog with <code>pkg update</code> and upgrade your installed packages with <code>pkg upgrade</code>.</p>

<p>The Handbook has a more detailed chapter on <a href="http://www.freebsd.org/doc/handbook/ports-using.html">using Ports</a> that includes upgrading and other tasks.</p>

<h2 id="going-graphical">Going Graphical</h2>

<p>I’m sure you’re eager to get out of the text-only console. To do so you need to install the <a href="http://www.x.org/wiki/">X.org</a> distribution of the <a href="http://magcius.github.io/xplain/article/index.html">X Window System</a>.</p>

<p>Change directory to <code>/usr/ports/x11/xorg</code>. Since Xorg is comprised of many modular Ports it takes a while to build and contains many port options (displayed to you as a blue <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=dialog&amp;ektion=&amp;manpath=" title="man dialog">dialog</a> prompt.) 
Run <code>make config-recursive</code> in <code>x11/xorg</code> to set these port options in advance so they don’t continually interrupt the build. Read over the options as they are presented, but generally don’t toggle an option if you don’t know what it does. The defaults are default for a reason :)</p>

<p>Once you’ve chosen all the options, run <code>make config-recursive</code> again, since it’s likely for a dependency enabled the first time to have options of its own. When no further port options are displayed run <code>make install</code> to compile and install X.org.</p>

<p>X.org by default uses FreeBSD’s <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=devd&amp;ektion=&amp;manpath=" title="man devd">devd</a> for hardware detection and <a href="http://www.freedesktop.org/wiki/Software/dbus/">D-Bus</a> for interprocess communication. <a href="http://www.freedesktop.org/wiki/Software/hal/">HAL</a> used to be the default hardware detection mechanism but is in the process of deprecation, so you may not need it unless you plan to use a desktop environment that still depends on it. Check the dependencies for <a class="port" href="http://freshports.org/sysutils/hal" title="sysutils/hal">sysutils/hal</a> for a list of software still requiring it.</p>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>hald_enable="YES"
</li><li>dbus_enable="YES"
</li></ol></code></pre></div></figure>

<h3 id="with-radeon-intel-or-otherwise">With Radeon, Intel, or otherwise</h3>

<p>This section explains how you should configure X for systems using an AMD Radeon and the <a href="http://www.x.org/archive/X11R7.7/doc/man/man4/radeon.4.xhtml"><code>radeon</code></a> driver, an Intel grahpics chip with the <a href="http://www.x.org/archive/X11R7.7/doc/man/man4/intel.4.xhtml"><code>intel</code></a> driver, virtualized graphics cards like <a class="port" href="http://freshports.org/emulators/virtualbox-ose-additions" title="emulators/virtualbox-ose-additions">emulators/virtualbox-ose-additions</a>’s <code>vboxvideo</code>, or any other generic framebuffer device supported by the default <a href="http://www.x.org/archive/X11R7.7/doc/man/man4/vesa.4.xhtml"><code>vesa</code></a> driver.</p>

<p>As root, run <code>X -configure</code>. It will spit out a new <a href="http://www.x.org/releases/X11R7.7/doc/man/man5/xorg.conf.5.xhtml">X.org configuration file</a> in <code>/root/xorg.conf.new</code> based on your detected hardware. Copy this file to <code>/etc/X11/xorg.conf</code>, then pull it up in a text editor for a few modifications.</p>

<p>Add an “Extensions” section and enable the <a href="http://www.x.org/releases/X11R7.7/doc/compositeproto/compositeproto.txt">Composite</a> extension.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>Section "Extensions"
</li><li>	Option	"Composite" "Enable"
</li><li>EndSection
</li></ol></code></pre></div></figure>

<p>Add one line to the <code>ServerLayout</code> section to enable <a href="http://fedoraproject.org/wiki/RenderingProject/aiglx"><abbr title="Accelerated Indirect OpenGL Extension to the X Window System">AIGLX</abbr></a>.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>Section "ServerLayout"
</li><li>	Identifier     "X.org Configured"
</li><li>	Screen      0  "Screen0" 0 0
</li><li>	InputDevice    "Mouse0" "CorePointer"
</li><li>	InputDevice    "Keyboard0" "CoreKeyboard"
</li><li>	Option         "AIGLX" "true"
</li><li>EndSection
</li></ol></code></pre></div></figure>

<p>I usually enable the <a href="http://www.cworth.org/tag/exa/">EXA</a> <code>AccelMethod</code> and <code>DRI</code> by adding their respective lines to the <code>Device</code> section. If you have a Radeon card ensure your <code>Driver</code> is configured as <code>radeon</code>, not <code>radeonhd</code>! <a href="http://www.x.org/wiki/radeonhd">radeonhd</a> is an older, Novell-sponsored, <a href="http://www.phoronix.com/scan.php?page=news_item&amp;px=ODIwOQ">defunct</a> driver for Radeon HD hardware, but <code>-configure</code> likes to pick it by default if it’s installed. You should use <code>radeon</code> instead. Otherwise <code>X -configure</code> should pick the best driver.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>Section "Device"
</li><li>	Option     "AccelMethod" "EXA"
</li><li>	Option     "DRI" "true"
</li><li>	Identifier  "Card0"
</li><li>	Driver      "radeon"
</li><li>	VendorName  "Advanced Micro Devices [AMD] nee ATI"
</li><li>	BoardName   "RV770 [Radeon HD 4850]"
</li><li>	BusID       "PCI:1:0:0"
</li><li>EndSection
</li></ol></code></pre></div></figure>

<p>Enable the <code>freetype</code>, <code>bitmap</code>, and <code>type1</code> X font modules by adding them to the <code>Module</code> section. According to the manual, “[t]he <code>extmod</code>, <code>dbe</code>, <code>dri</code>, <code>dri2</code>, <code>glx</code>, and <code>record</code> extension modules are loaded automatically if they are present”, but I like to go for the explicit configuration and define them anyway.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>Section "Module"
</li><li>    Load           "dbe"
</li><li>    Load           "dri"
</li><li>    Load           "dri2"
</li><li>    Load           "extmod"
</li><li>    Load           "record"
</li><li>    Load           "freetype"
</li><li>    Load           "bitmap"
</li><li>    Load           "type1"
</li><li>    Load           "glx"
</li><li>EndSection
</li></ol></code></pre></div></figure>

<h3 id="with-nvidia">With NVIDIA</h3>

<p>Skip this section if you don’t use an NVIDIA graphics card.</p>

<p>The binary <a class="port" href="http://freshports.org/x11/nvidia-driver" title="x11/nvidia-driver">x11/nvidia-driver</a> is the only proprietary software on my system. As much as I’d prefer a free and open solution, I’ve found that neither Nouveau nor the free Radeon or Intel driver compare to the speed and feature support of Nvidia’s official driver.</p>

<p>Install the driver itself, <a class="port" href="http://freshports.org/x11/nvidia-settings" title="x11/nvidia-settings">x11/nvidia-settings</a>, and <a class="port" href="http://freshports.org/x11/nvidia-xconfig" title="x11/nvidia-xconfig">x11/nvidia-xconfig</a>.</p>

<p>To load the nvidia kernel module at boot, enable it in <code>/boot/loader.conf</code>.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>echo 'nvidia_load="YES"' &gt;&gt; /boot/loader.conf
</li></ol></code></pre></div></figure>

<p>Run <code>nvidia-xconfig</code> to get a base <a href="http://www.x.org/releases/X11R7.6/doc/man/man5/xorg.conf.5.xhtml">xorg.conf</a> in <code>/etc/X11/xorg.conf</code>. Pull it up in your favourite text editor and add the <code>Module</code> section to enable the <code>freetype2</code>, <code>glx</code>, <code>type1</code> extensions.</p>

<figure class="code"><figcaption><span> /etc/X11/xorg.conf </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>Section "Module"
</li><li>    Load           "freetype"
</li><li>    Load           "bitmap"
</li><li>    Load           "type1"
</li><li>    Load           "glx"
</li><li>EndSection
</li></ol></code></pre></div></figure>

<p>Later on, once you’re booted into the graphical environment, you can use <code>nvidia-settings</code> to configure TwinView and any other settings.</p>

<h3 id="install-fonts">Install fonts</h3>

<p>X.org doesn’t include many attractive typefaces by default. Luckily, there are plenty <a class="port" href="http://freshports.org/x11-fonts/" title="available in Ports">available in Ports</a>.</p>

<p>Here are a few I use, including many from non-Roman languages for better Unicode coverage.</p>

<ul>
  <li><a class="port" href="http://freshports.org/chinese/arphicttf" title="Arphicttf">Arphicttf</a> and <a class="port" href="http://freshports.org/chinese/font-std" title="font-std">font-std</a> for Chinese coverage.</li>
  <li><a class="port" href="http://freshports.org/hebrew/culmus" title="Culmus">Culmus</a> and <a class="port" href="http://freshports.org/hebrew/elmar-fonts" title="El-Mar">El-Mar</a> for Hebrew language coverage.</li>
  <li><a class="port" href="http://freshports.org/japanese/font-ipa" title="IPA">IPA</a>, <a class="port" href="http://freshports.org/japanese/font-ipa-uigothic" title="IPA UIGothic">IPA UIGothic</a>, <a class="port" href="http://freshports.org/japanese/font-ipaex" title="IPAex">IPAex</a>, <a class="port" href="http://freshports.org/japanese/font-kochi" title="Kochi">Kochi</a>, <a class="port" href="http://freshports.org/japanese/font-migmix" title="MigMix">MigMix</a>, <a class="port" href="http://freshports.org/japanese/font-migu" title="Migu">Migu</a>, <a class="port" href="http://freshports.org/japanese/font-mona-ipa" title="Mona">Mona</a>, <a class="port" href="http://freshports.org/japanese/font-motoya-al" title="MOTOYA">MOTOYA</a>, <a class="port" href="http://freshports.org/japanese/font-mplus-ipa" title="M+">M+</a>, <a class="port" href="http://freshports.org/japanese/font-sazanami" title="Sazanami">Sazanami</a>, <a class="port" href="http://freshports.org/japanese/font-shinonome" title="Shinonome">Shinonome</a>, <a class="port" href="http://freshports.org/japanese/font-takao" title="Takao">Takao</a>, <a class="port" href="http://freshports.org/japanese/font-ume" title="UmeFont">UmeFont</a>, <a class="port" href="http://freshports.org/japanese/font-vlgothic" title="VLGothic">VLGothic</a>, <a class="port" href="http://freshports.org/x11-fonts/hanazono-fonts-ttf" title="Hanazono Mincho">Hanazono Mincho</a>, and <a class="port" href="http://freshports.org/japanese/mikachan-ttfonts" title="Mika-chan">Mika-chan</a> for Japanese language coverage.</li>
  <li><a class="port" href="http://freshports.org/korean/aleefonts-ttf" title="A-Lee fonts">A-Lee fonts</a>, <a class="port" href="http://freshports.org/korean/nanumfonts-ttf" title="Nanum">Nanum</a>, and <a class="port" href="http://freshports.org/korean/unfonts-core" title="Un fonts">Un fonts</a> for Korean language coverage.</li>
  <li><a class="port" href="http://freshports.org/x11-fonts/anonymous-pro" title="Anonymous Pro">Anonymous Pro</a>, <a class="port" href="http://freshports.org/x11-fonts/artwiz-aleczapka" title="artwiz-aleczapka">artwiz-aleczapka</a>, <a class="port" href="http://freshports.org/x11-fonts/dejavu" title="DejaVu">DejaVu</a>, <a class="port" href="http://freshports.org/x11-fonts/inconsolata-ttf" title="Inconsolata">Inconsolata</a>, and <a class="port" href="http://freshports.org/x11-fonts/terminus-font" title="Terminus">Terminus</a> for terminals and editors.</li>
  <li><a class="port" href="http://freshports.org/x11-fonts/cantarell-fonts" title="Cantarell">Cantarell</a>, <a class="port" href="http://freshports.org/x11-fonts/droid-fonts-ttf" title="Droid">Droid</a>, <a class="port" href="http://freshports.org/x11-fonts/doulos" title="Doulos SIL">Doulos SIL</a>, and <a class="port" href="http://freshports.org/x11-fonts/ubuntu-font" title="Ubuntu">Ubuntu</a> for general Roman alphabet language coverage.</li>
  <li><a class="port" href="http://freshports.org/x11-fonts/fonts-te" title="Telugu">Telugu</a> for Telugu language.</li>
  <li><a class="port" href="http://freshports.org/x11-fonts/isabella" title="Isabella">Isabella</a>, <a class="port" href="http://freshports.org/x11-fonts/ecofont" title="Ecofont">Ecofont</a>, and <a class="port" href="http://freshports.org/x11-fonts/junicode" title="Junicode">Junicode</a>
 as novelty typefaces.</li>
  <li><a class="port" href="http://freshports.org/x11-fonts/khmeros" title="KhmerOS">KhmerOS</a> for Khmer language coverage.</li>
  <li><a class="port" href="http://freshports.org/x11-fonts/padauk" title="Padauk">Padauk</a> for Myanmar language coverage.</li>
  <li><a class="port" href="http://freshports.org/x11-fonts/stix-fonts" title="STIX">STIX</a> and <a class="port" href="http://freshports.org/print/cm-super" title="Computer Modern">Computer Modern</a> for technical and mathematic symbols.</li>
  <li><a class="port" href="http://freshports.org/x11-fonts/charis" title="Charis">Charis</a>, <a class="port" href="http://freshports.org/x11-fonts/urwfonts-ttf" title="URW">URW</a>, <a class="port" href="http://freshports.org/russian/koi8r-ps" title="KOI8">KOI8</a>, <a class="port" href="http://freshports.org/x11-fonts/geminifonts" title="Geminifonts">Geminifonts</a>, <a class="port" href="http://freshports.org/x11-fonts/cyr-rfx" title="CYR-RFX">CYR-RFX</a>, and <a class="port" href="http://freshports.org/x11-fonts/paratype" title="ParaType">ParaType</a>
 for Cyrillic and Eastern European language coverage.</li>
</ul>

<p><a class="port" href="http://freshports.org/x11-fonts/webfonts" title="x11-fonts/webfonts">x11-fonts/webfonts</a> is a special case. It includes the <a href="https://www.microsoft.com/typography/fonts/web.aspx">Microsoft Core Fonts for the Web</a> such as Andale and Verdana. 
If you own a valid Microsoft Windows license you can get Tahoma as well by adding to <code>/etc/make.conf</code> first.</p>

<figure class="code"><figcaption><span> /etc/make.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Enable Tahoma in x11-fonts/webfonts if you have a Windows license
</li><li># You show me yours and I'll show you mine ;)
</li><li>.if ${.CURDIR:M*/x11-fonts/webfonts}
</li><li>WITH_MSWINDOWS_LICENSE=yes
</li><li>.endif
</li></ol></code></pre></div></figure>

<p>Now that those fonts are installed you need to tell Xorg about them using a <code>FontPath</code> in your <code>/etc/X11/xorg.conf</code> so they can be used. Unfortunately the font paths in Ports are not entirely standardized. Most of them end up in <code>/usr/local/lib/X11/fonts</code>, some end up in <code>/usr/local/share/fonts/</code>, and some in just <code>/usr/local/share/</code>. Here’s the relevant section from my <code>xorg.conf</code>. Yours should look similar.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>Section "Files"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/100dpi/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/75dpi/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/Caladea/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/Carlito/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/CharisSIL/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/DoulosSIL/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/Droid/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/GentiumBasic/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/GentiumPlus/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/Hana/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/Khmer/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/Liberation/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/LinLibertineG/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/Myanmar/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/OTF/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/PataType/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/TTF/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/TrueType/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/Type1/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/alee-ttf/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/anonymous-pro/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/artwiz-aleczapka-en/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/bitstream-vera/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/cyrillic/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/dejavu/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/dockapp/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/ecofont/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/encodings/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/fonts-indic/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/fonts-te/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/hebrew/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/junicode/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/koi8-u-gemini/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/local/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/misc/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/misc/:unscaled"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/profont/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/proggy_fonts-ttf/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/stix/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/stracke/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/terminus-font/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/ubuntu-font/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/unfonts-core/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/unfonts-extra/"
</li><li>    FontPath        "/usr/local/lib/X11/fonts/webfonts/"
</li><li>    FontPath        "/usr/local/share/fonts/OTF/"
</li><li>    FontPath        "/usr/local/share/fonts/TTF/"
</li><li>    FontPath        "/usr/local/share/fonts/TrueType/"
</li><li>    FontPath        "/usr/local/share/fonts/amsfonts/"
</li><li>    FontPath        "/usr/local/share/fonts/cantarell/"
</li><li>    FontPath        "/usr/local/share/fonts/cm-super/"
</li><li>    FontPath        "/usr/local/share/fonts/shinonome/"
</li><li>    FontPath        "/usr/local/share/fonts/std.ja_JP/"
</li><li>    FontPath        "/usr/local/share/fonts/std.zh_CN/"
</li><li>    FontPath        "/usr/local/share/font-ipa/"
</li><li>    FontPath        "/usr/local/share/font-ipa-uigothic/"
</li><li>    FontPath        "/usr/local/share/font-ipaex/"
</li><li>    FontPath        "/usr/local/share/font-kochi/"
</li><li>    FontPath        "/usr/local/share/font-migmix/"
</li><li>    FontPath        "/usr/local/share/font-migu/"
</li><li>    FontPath        "/usr/local/share/font-mona-ipa/"
</li><li>    FontPath        "/usr/local/share/font-motoya-al/"
</li><li>    FontPath        "/usr/local/share/font-sazanami/"
</li><li>    FontPath        "/usr/local/share/font-shinonome/"
</li><li>    FontPath        "/usr/local/share/font-takao/"
</li><li>    FontPath        "/usr/local/share/font-vlgothic/"
</li><li>EndSection
</li></ol></code></pre></div></figure>

<p>You can install other invididual fonts later as a user by copying them to <code>~/.fonts</code> under your <a href="https://en.wikipedia.org/wiki/Home_directory">home directory</a>.</p>

<p>You can re-scan the configured <code>FontPath</code>s by running <code>fc-cache -vf</code> and can list all installed fonts with <code>fc-list</code> to check that they all appear. For example, I have a fairly large local font repository in my <code>~/.fonts/</code> directory and have 2313 fonts available on my system as of this writing according to <code>fc-list | wc -l</code>.</p>

<h2 id="desktop-environments">Desktop Environments</h2>

<p>The best part of the X Window System ecosystem is the variety of environments available. You might prefer the configurability of KDE, the sparse cleanliness of MATE, something minimal like Window Maker, or even tiling like i3. This isn’t <a href="http://xwinman.org/">xwinman</a>, but I’ve included screenshots and descriptions for some of the most popular environments to give you an idea what’s out there.</p>

<h3 id="kde-4">KDE 4</h3>

<p><a href="http://kde.org/">KDE</a> is the largest and most fully-featured Free Software desktop environment, based on the Qt toolkit. Its configuration options are dizzyingly numerous and it has excellent support for modern technologies like high-DPI displays. It has a modern compositing window manager, KWin, the web and file browser Konqueror that famously spawned the KHTML engine that became WebKit, and a family of other Qt applications like the excellent <a href="http://www.clementine-player.org/">Clementine</a>. The KDE4 meta-port is available at <a class="port" href="http://freshports.org/x11/kde4" title="x11/kde4">x11/kde4</a>.</p>

<p><a href="https://cooltrainer.org/images/original/freebsd10-kde4.png"><picture>
    <source srcset="/images/generated/freebsd10-kde4-1280by960-f2daa1.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-kde4-950by713-f2daa1.png">
    <source srcset="/images/generated/freebsd10-kde4-1200by900-f2daa1.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-kde4-800by600-f2daa1.png" media="(min-width: 850px)">
    <source srcset="/images/generated/freebsd10-kde4-900by675-f2daa1.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-kde4-600by450-f2daa1.png" media="(min-width: 620px)">
    <source srcset="/images/generated/freebsd10-kde4-450by338-f2daa1.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-kde4-300by225-f2daa1.png" media="">
    <img srcset="/images/generated/freebsd10-kde4-950by713-f2daa1.png" itemprop="image" title="It looks like it has a light kit installed." alt="FreeBSD 10 KDE 4.12 desktop">
  </picture>
</a></p>

<p>You can start KDE with <code>exec startkde</code> in your <code>.xinitrc</code>, but KDE also includes its own graphical <a href="https://cooltrainer.org/images/original/Alice-KDM.png">login manager</a>, <a href="http://docs.kde.org/stable/en/kde-workspace/kdm/index.html">KDM</a> which you can optionally enable in <code>rc.conf</code> and start as a service.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>echo 'kdm4_enable="YES"' &gt;&gt; /etc/rc.conf
</li><li>service kdm4 start
</li></ol></code></pre></div></figure>

<h3 id="mate-ne-gnome-2">MATE née GNOME 2</h3>

<p>GNOME 2 was a venerable desktop environment made famous as the Ubuntu default around 2008, and MATE is the community fork of GNOME 2 after the GNOME team lost their collective minds.</p>

<p>GNOME 2 is still available in Ports at <a class="port" href="http://freshports.org/x11/gnome2" title="x11/gnome2">x11/gnome2</a> but I can’t recommend using it since version 2.32 in 2010 is the last of its lineage. If you have a major GNOME craving check out the <a href="http://mate-desktop.org/">MATE Desktop Environment</a> instead. It’s a well-maintained fork of 2.32 by an awesome team who lack GNOME’s utter contempt for their users. The MATE meta-port is available at <a class="port" href="http://freshports.org/x11/mate" title="x11/mate">x11/mate</a>.</p>

<p><a href="https://cooltrainer.org/images/original/freebsd10-mate.png"><picture>
    <source srcset="/images/generated/freebsd10-mate-1280by960-027781.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-mate-950by713-027781.png">
    <source srcset="/images/generated/freebsd10-mate-1200by900-027781.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-mate-800by600-027781.png" media="(min-width: 850px)">
    <source srcset="/images/generated/freebsd10-mate-900by675-027781.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-mate-600by450-027781.png" media="(min-width: 620px)">
    <source srcset="/images/generated/freebsd10-mate-450by338-027781.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-mate-300by225-027781.png" media="">
    <img srcset="/images/generated/freebsd10-mate-950by713-027781.png" itemprop="image" title="FreeBSD 10 MATE 1.6 desktop">
  </picture>
</a></p>

<p>MATE and GNOME users should configure <a href="http://www.freedesktop.org/wiki/Software/polkit">PolicyKit</a> to allow normal users to mount removable media automatically.</p>

<figure class="code"><figcaption><span> /usr/local/etc/PolicyKit/PolicyKit.conf </span></figcaption><div class="highlight"><pre><code class="xml"><ol><li>&lt;config version="0.1"&gt;
</li><li>	&lt;match action="org.freedesktop.hal.storage.mount-removable"&gt;
</li><li>		&lt;return result="yes"/&gt;
</li><li>	&lt;/match&gt;
</li><li>	&lt;match action="org.freedesktop.hal.storage.mount-fixed"&gt;
</li><li>		&lt;return result="yes"/&gt;
</li><li>	&lt;/match&gt;
</li><li>	&lt;match user="root"&gt;
</li><li>		&lt;return result="yes"/&gt;
</li><li>	&lt;/match&gt;
</li><li>	&lt;define_admin_auth group="wheel"/&gt;
</li><li>&lt;/config&gt;
</li></ol></code></pre></div></figure>

<p>MATE doesn’t include a GDM alternative, so start it with <code>exec mate-session</code> in your <code>.xinitrc</code>.</p>

<p>Compiz is a popular alternative window manager with MATE and GNOME 2 users. It gives you those fancy wobbly windows, 3d cubes, and all kinds of flashy stuff. You can install Compiz-Fusion from <a class="port" href="http://freshports.org/x11-wm/compiz-fusion" title="x11-wm/compiz-fusion">x11-wm/compiz-fusion</a>. Be sure to disable the obsolete and unmaintained window decorator <a href="http://wiki.compiz.org/Decorators/Emerald">Emerald</a>, a leftover from the Beryl project, when prompted on the port configuration screen. With Emerald disabled, compiz will default to <code>gtk-window-decorator</code> and will take on your normal GTK theme appearance but with more transparency and garish animation.</p>

<p><a href="https://cooltrainer.org/images/original/Emi-20120606.png"><picture>
    <source srcset="/images/generated/Emi-20120606-1425by445-8f7744.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/Emi-20120606-950by297-8f7744.png">
    <source srcset="/images/generated/Emi-20120606-1200by375-8f7744.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/Emi-20120606-800by250-8f7744.png" media="(min-width: 850px)">
    <source srcset="/images/generated/Emi-20120606-900by281-8f7744.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/Emi-20120606-600by188-8f7744.png" media="(min-width: 620px)">
    <source srcset="/images/generated/Emi-20120606-450by141-8f7744.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/Emi-20120606-300by94-8f7744.png" media="">
    <img srcset="/images/generated/Emi-20120606-950by297-8f7744.png" itemprop="image" title="Behold" alt="A screenshot of my FreeBSD GNOME 2 desktop.">
  </picture>
</a></p>

<p>Once installed, open Settings &gt; Preferences &gt; CompizConfig Settings Manager. You’ll probably want to enable the following plugins at minimum:</p>

<ul>
  <li>General: Gnome Compatibility</li>
  <li>Desktop: Desktop Cube, Rotate Cube</li>
  <li>Effects: Animations, Window Decoration, Wobbly Windows</li>
  <li>Window Management: Application Switcher, Move Window, Place Windows, Resize Window</li>
</ul>

<p>Open the “Run” box with Alt+F2 and execute <code>compiz-manager</code>. <code>compiz-manager</code> is a script for detecting and using the proper compiz options for your video hardware. Your screen will flash while Compiz and gtk-window-decorator initialize and replace Marco, MATE’s default window manager.</p>

<p>If your windows are missing titlebars, double-check you’ve enabled “Window Decoration” in <code>ccsm</code>. If all seems well, add <code>compiz-manager</code> as a new startup application (in Settings &gt; Preferences &gt; Startup Applications), then change MATE’s window manager preference in DConf:</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>gsettings set org.mate.session.required-components windowmanager compiz
</li></ol></code></pre></div></figure>

<p>To switch back, use the same command with the argument <code>marco</code>.</p>

<h3 id="window-maker">Window Maker</h3>

<p>It isn’t as popular or well-known as the others here, but <a href="http://windowmaker.org/">Window Maker</a> is my favorite and longest-used window manager. It is based on the look and feel of the <a href="https://en.wikipedia.org/wiki/NEXTSTEP">NEXTSTEP</a> operating system, the OS that became Rhapsody and then Mac OS X and iOS. Unlike the extremely limited one-dimensional Mac OS X dock, Window Maker offers a main dock as well as a “clip” dock that is unique to each virtual desktop. Docks can hold normal launchers and “dockapps”, small self-contained dock accessories.</p>

<p><a href="https://cooltrainer.org/images/original/Emi-20130528.png"><picture>
    <source srcset="/images/generated/Emi-20130528-1425by445-d9456b.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/Emi-20130528-950by297-d9456b.png">
    <source srcset="/images/generated/Emi-20130528-1200by375-d9456b.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/Emi-20130528-800by250-d9456b.png" media="(min-width: 850px)">
    <source srcset="/images/generated/Emi-20130528-900by281-d9456b.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/Emi-20130528-600by188-d9456b.png" media="(min-width: 620px)">
    <source srcset="/images/generated/Emi-20130528-450by141-d9456b.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/Emi-20130528-300by94-d9456b.png" media="">
    <img srcset="/images/generated/Emi-20130528-950by297-d9456b.png" itemprop="image" title="WMaker is best WM" alt="A screenshot of my FreeBSD Window Maker desktop.">
  </picture>
</a></p>

<p>You can install Window Maker from <a class="port" href="http://freshports.org/x11-wm/windowmaker" title="x11-wm/windowmaker">x11-wm/windowmaker</a> and start it with <code>exec wmaker</code> in your <code>.xinitrc</code>. In addition, I also show <a class="port" href="http://freshports.org/x11-clocks/wmclock" title="x11-clocks/wmclock">x11-clocks/wmclock</a>, <a class="port" href="http://freshports.org/sysutils/wmcpuload" title="sysutils/wmcpuload">sysutils/wmcpuload</a>, <a class="port" href="http://freshports.org/net/wmnd" title="net/wmnd">net/wmnd</a>, <a class="port" href="http://freshports.org/audio/wmix" title="audio/wmix">audio/wmix</a>, <a class="port" href="http://freshports.org/x11/sakura" title="x11/sakura">x11/sakura</a>, and <a class="port" href="http://freshports.org/x11-fm/rox-filer" title="x11-fm/rox-filer">x11-fm/rox-filer</a>.</p>

<p>The first time you start Window Maker you should run <code>wmaker.inst</code> to install the starter configuration to your <code>~/GNUstep</code> directory.</p>

<h3 id="enlightenment">Enlightenment</h3>

<p><a href="http://www.enlightenment.org/">Enlightenment</a> was the original eye-candy desktop before modern compositors were even a thing. <a href="http://www.enlightenment.org/?p=about/e17">Version 0.17</a> is the ambitious rewrite release that almost never came out until <a href="http://e17releasemanager.wordpress.com/">e17releasemanager</a> got it out the door. It contains an eye-catching desktop built on the project’s own <a href="https://en.wikipedia.org/wiki/Enlightenment_Foundation_Libraries">Enlightenment Foundation Libraries</a>. E17 is shiny, bouncy, extendable, and very configurable. You can install it from <a class="port" href="http://freshports.org/x11-wm/enlightenment" title="x11-wm/enlightenment">x11-wm/enlightenment</a> and run it with <code>exec enlightenment_start</code> in your <code>.xinitrc</code>.</p>

<p><a href="https://cooltrainer.org/images/original/freebsd10-e17.png"><picture>
    <source srcset="/images/generated/freebsd10-e17-1280by960-b83dba.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-e17-950by713-b83dba.png">
    <source srcset="/images/generated/freebsd10-e17-1200by900-b83dba.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-e17-800by600-b83dba.png" media="(min-width: 850px)">
    <source srcset="/images/generated/freebsd10-e17-900by675-b83dba.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-e17-600by450-b83dba.png" media="(min-width: 620px)">
    <source srcset="/images/generated/freebsd10-e17-450by338-b83dba.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-e17-300by225-b83dba.png" media="">
    <img srcset="/images/generated/freebsd10-e17-950by713-b83dba.png" itemprop="image" title="Always with the blue." alt="FreeBSD 10 Enlightenment 0.17.5 desktop">
  </picture>
</a></p>

<h3 id="xfce">XFCE</h3>

<p><a href="http://www.xfce.org/">XFCE</a> descends, like <a href="https://en.wikipedia.org/wiki/K_Desktop_Environment_1">KDE</a>, from the design of the once-proprietary <a href="https://en.wikipedia.org/wiki/Common_Desktop_Environment">Common Desktop Environment</a>. As of XFCE 4.0, however, the desktop has become more of a GNOME-lite, the “other” GTK+ desktop environment. I don’t have much to say about it, but it is a very functional and lightweight desktop with panels, a window manager, a great file manager (Thunar), and some other lightweight applications like a terminal.</p>

<p><a href="https://cooltrainer.org/images/original/freebsd10-xfce.png"><picture>
    <source srcset="/images/generated/freebsd10-xfce-1280by960-60ca01.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-xfce-950by713-60ca01.png">
    <source srcset="/images/generated/freebsd10-xfce-1200by900-60ca01.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-xfce-800by600-60ca01.png" media="(min-width: 850px)">
    <source srcset="/images/generated/freebsd10-xfce-900by675-60ca01.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-xfce-600by450-60ca01.png" media="(min-width: 620px)">
    <source srcset="/images/generated/freebsd10-xfce-450by338-60ca01.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-xfce-300by225-60ca01.png" media="">
    <img srcset="/images/generated/freebsd10-xfce-950by713-60ca01.png" itemprop="image" title="It&#39;s GNOME-lite." alt="FreeBSD 10 XFCE desktop">
  </picture>
</a></p>

<p>You can start XFCE with <code>exec startxfce4</code> in your <code>.xinitrc</code>.</p>

<h3 id="cinnamon">Cinnamon</h3>

<p><a href="http://cinnamon.linuxmint.com/">Cinnamon</a> is a GTK 3 desktop environment from the Linux Mint project. It began as a fork of the GNOME 3 Shell into a more traditional panels and menus UI since many were dissatisfied with the drastic redesign of a beloved environment. It’s come into its own as a modern DE and offers everything you would expect from GNOME 2 or MATE with a cohesive feel and forks of several of the <a href="https://wiki.gnome.org/Design/Apps/">GNOME core apps</a>.</p>

<p>The only reasons I strongly prefer <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#mate">MATE</a> to Cinnamon are the dearth of great GTK+ 3.x themes and Cinnamon’s inability to have more than a single panel in a multiple-monitor setup, <a href="https://github.com/linuxmint/Cinnamon/issues/130">issue #130</a>, but the latter looks to be getting some traction as of late 2014.</p>

<p>You can install Cinnamon from <a class="port" href="http://freshports.org/x11/cinnamon" title="x11/cinnamon">x11/cinnamon</a> and start it with <code>exec cinnamon-session</code> in your <code>.xinitrc</code>. There is also a fallback software-rendering mode that can be started with <code>exec cinnamon-session-cinnamon2d</code> instead.</p>

<p>No screenshots of this one since it won’t run in VirtualBox with any combination I can find of 3D/<code>cinnamon2d</code> and <code>vboxvideo</code>/<code>vesa</code>. Shoot me an email if you know how to make it behave otherwise check out screenshots of Linux Mint Cinnamon Edition on their <a href="http://www.linuxmint.com/screenshots.php">screenshots page</a>.</p>

<h3 id="gnome-3">GNOME 3</h3>

<p><a href="http://www.gnome.org/gnome-3/">GNOME 3</a>, available on Linux since 3.0 in the spring of 2011, is finally available in the official FreeBSD tree as of November 2014. The three and a half year delay is thanks to the upstream GNOME project’s <a href="https://blogs.oracle.com/jeffcai/entry/device_kit_will_replace_hal">years-long</a> <a href="https://mail.gnome.org/archives/desktop-devel-list/2011-May/msg00439.html">fight</a> against any operating system that doesn’t have a penguin for a mascot. It took several years and a vastly waning userbase, then suddenly <a href="http://blogs.gnome.org/desrt/2014/02/19/on-portability/">they care about portability</a> again. Sure, okay. Either way, it’s here and you can install it from <a class="port" href="http://freshports.org/x11/gnome3" title="x11/gnome3">x11/gnome3</a>.</p>

<p>We <a href="https://cooltrainer.org/images/original/Gnome3-crashed-lol.png">weren’t missing much</a> in the delay, since the GNOME team <a href="http://igurublog.wordpress.com/2012/11/05/gnome-et-al-rotting-in-threes/">tossed out everything</a> great about their once-ubiquitous DE and turned it into a shiny but unconfigurable iOS imitator where basic features and options are either <a href="http://www.jwz.org/blog/2011/10/has-gnome-3-decided-that-people-shouldnt-want-screen-savers/">not available at all</a>, buried inside a <a href="http://blog.fpmurphy.com/2011/03/customizing-the-gnome-3-shell.html">settings registry</a> more reminiscent of Windows 98 than BSD, or relegated to extensions that will <a href="http://sc3d.tumblr.com/post/34163672571/gnome-3-extensions-the-madness-must-end">break with every new minor version</a> thanks to the lack of any stable extensions API and whose very existence are <a href="https://mail.gnome.org/archives/gnome-shell-list/2011-June/msg00110.html">opposed</a> by many of the main project contributors. Take a look at the <a href="https://extensions.gnome.org/">GNOME Shell Extensions</a> page with me and be amused that you need an extension to <a href="https://extensions.gnome.org/extension/19/user-themes/">use a theme</a>, <a href="https://extensions.gnome.org/extension/6/applications-menu/">categorize the Applications menu</a>, remove the otherwise-omnipresent <a href="https://extensions.gnome.org/extension/112/remove-accesibility/">accessibility menu</a> from the status bar, or even <a href="https://extensions.gnome.org/extension/5/alternative-status-menu/">power off your computer</a> without knowing about the <a href="https://wiki.gnome.org/Projects/GnomeShell/CheatSheet#The_top_bar">magic Alt-button toggle</a>.</p>

<p><a href="https://cooltrainer.org/images/original/freebsd10-gnome3-activities.png"><picture>
    <source srcset="/images/generated/freebsd10-gnome3-activities-1024by768-6f267f.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-gnome3-activities-950by713-6f267f.png">
    <source srcset="/images/generated/freebsd10-gnome3-activities-1024by768-6f267f.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-gnome3-activities-800by600-6f267f.png" media="(min-width: 850px)">
    <source srcset="/images/generated/freebsd10-gnome3-activities-900by675-6f267f.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-gnome3-activities-600by450-6f267f.png" media="(min-width: 620px)">
    <source srcset="/images/generated/freebsd10-gnome3-activities-450by338-6f267f.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-gnome3-activities-300by225-6f267f.png" media="">
    <img srcset="/images/generated/freebsd10-gnome3-activities-950by713-6f267f.png" itemprop="image" title="Oh look, an iPad" alt="GNOME Shell in GNOME 3.12 on FreeBSD.">
  </picture>
</a></p>

<p>If you want a great GTK-based desktop environment maintained by a team that doesn’t hate you, check out <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#mate-ne-gnome-2">MATE</a>, <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#xfce">XFCE</a>, or <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#cinnamon">Cinnamon</a>. All three are excellent. I guess I can thank the GNOME project’s self-destruction for getting me back into <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#window-maker">Window Maker</a>.</p>

<h3 id="theming">Theming</h3>

<p><a href="https://cooltrainer.org/images/original/freebsd10-qgtkstyle.png"><img class="right" src="./A FreeBSD 10 Desktop How-to » Cooltrainer.org_files/freebsd10-qgtkstyle.png" title="This is the only way to make Qt not look bad." alt="Qt4 settings application on FreeBSD."></a></p>

<p>Finding Clearlooks too drab and blue? You can find a world of themes and icons for MATE over on <a href="http://gnome-look.org/">GNOME-Look</a>, for KDE at <a href="http://kde-look.org/">KDE-Look</a>, for XFCE at <a href="http://xfce-look.org/">XFCE-Look</a>, for E17 at <a href="http://e17-stuff.org/">E17-Stuff</a>, and for several lightweight window managers at <a href="http://box-look.org/">Box-Look</a>. There are several attractive and usable themes buried among the OS X Aqua clones, Vista Aero clones, and black-as-my-soul darkness-fests that are standard on any theming website.</p>

<p>You can change theme settings for Qt4 applications with <code>qt4-qtconfig</code> and for KDE Qt applications (like Clementine) in the <a href="https://userbase.kde.org/System_Settings">KDE System Settings</a>. GTK+ is selectable in many window managers’ appearance preferences, and you can also install <a class="port" href="http://freshports.org/x11-themes/lxappearance" title="x11-themes/lxappearance">x11-themes/lxappearance</a> for a light GTK theme switcher.</p>

<h3 id="starting-x">Starting X</h3>

<p>The shell script <code>.xinitrc</code> in your home directory is the script that is executed for the lifecycle of your X session. <code>.xinitrc</code> is used to run startup applications and then run your window manager. When you finally end your X session your window manager will exit, <code>.xinitrc</code> will return, and the X server will stop.</p>

<figure class="code"><figcaption><span> ~/.xinitrc </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>xscreensaver -no-splash &amp;
</li><li>xdg-user-dirs-update &amp;
</li><li>redshift &amp;
</li><li>compton &amp;
</li><li>exec wmaker
</li></ol></code></pre></div></figure>

<p>In my example <code>.xinitrc</code> I use <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#window-maker">Window Maker</a> and start <a class="port" href="http://freshports.org/x11/xscreensaver" title="x11/xscreensaver">x11/xscreensaver</a>, <a href="http://freedesktop.org/wiki/Software/xdg-user-dirs/">xdg-user-dirs</a>, <a class="port" href="http://freshports.org/accessibility/redshift" title="accessibility/redshift">accessibility/redshift</a>, and the lightweight compositor <a class="port" href="http://freshports.org/x11-wm/compton" title="x11-wm/compton">x11-wm/compton</a>. This example script takes an argument to allow a choice of window managers. You can start an X session with <code>startx</code> or <code>xinit &lt;windowmanager&gt;</code> to supply the argument to <code>.xinitrc</code>.</p>

<p>Starting your graphical session after logging in on a TTY is the traditional way, but I like to use a graphical login manager, <a class="port" href="http://freshports.org/x11/slim" title="x11/slim">x11/slim</a>. It is like KDM or GDM but with no dependency on a particular desktop environment. After installing it you can configure the <code>sessiondir</code> directive in the SLiM configuration file to define the path to <a href="http://standards.freedesktop.org/desktop-entry-spec/latest/">desktop entries</a> installed by your ports, usually <code>/usr/local/share/xsessions</code>. Use <code>exec $1</code> instead of a particular executable name in your <code>.xinitrc</code> to run the command from SLiM passed in as an argument. You can switch session with the <i>F1</i> key on the login screen.</p>

<figure class="code"><figcaption><span> /usr/local/etc/slim.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>sessiondir /usr/local/share/xsessions/
</li></ol></code></pre></div></figure>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>echo 'slim_enable="YES"' &gt;&gt; /etc/rc.conf
</li><li>service slim start
</li></ol></code></pre></div></figure>

<p><a href="https://cooltrainer.org/images/original/freebsd10-slim.png"><picture>
    <source srcset="/images/generated/freebsd10-slim-1280by960-9111e7.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-slim-950by713-9111e7.png">
    <source srcset="/images/generated/freebsd10-slim-1200by900-9111e7.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-slim-800by600-9111e7.png" media="(min-width: 850px)">
    <source srcset="/images/generated/freebsd10-slim-900by675-9111e7.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-slim-600by450-9111e7.png" media="(min-width: 620px)">
    <source srcset="/images/generated/freebsd10-slim-450by338-9111e7.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-slim-300by225-9111e7.png" media="">
    <img srcset="/images/generated/freebsd10-slim-950by713-9111e7.png" itemprop="image" title="The agnostic login manager." alt="FreeBSD 10 running the SLiM login manager.">
  </picture>
</a></p>

<p>The X session will use one of the virtual <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=ttys&amp;ektion=&amp;manpath=" title="man ttys">ttys</a>. Once started, you can switch to a different virtual TTY with <i>CTRL-ATL-F#</i>. You can switch back to the graphical TTY with <i>CTRL-ATL-F9</i>. You may need to create a desktop entry for your window manager of choice if the port maintainer doesn’t ship one. Here’s an example.</p>

<figure class="code"><figcaption><span> /usr/local/share/xsessions/wmaker.desktop </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>[Desktop Entry]
</li><li>Encoding=UTF-8
</li><li>Name=Window Maker
</li><li>Exec=/usr/local/bin/wmaker
</li><li>Comment=This session logs you into Window Maker
</li><li>Type=Application
</li></ol></code></pre></div></figure>

<h2 id="extras-and-miscellany">Extras and Miscellany</h2>

<h3 id="printing">Printing</h3>

<p><abbr title="Common Unix Printing System"><a href="http://www.cups.org/">CUPS</a></abbr> is the standard for printing on Free Unix-like systems and can be installed from Ports along with any needed filters. Install the CUPS meta-port at <a class="port" href="http://freshports.org/print/cups" title="print/cups">print/cups</a>. Install <a href="http://hplipopensource.com/hplip-web/index.html">HPLIP</a> in <a class="port" href="http://freshports.org/print/hplip" title="print/hplip">print/hplip</a> for HP printer drivers (and my Brother HL-2170W, for some reason). Install the <a href="http://www.linuxfoundation.org/collaborate/workgroups/openprinting/database/foomatic">Foomatic</a> filter collection in <a class="port" href="http://freshports.org/print/foomatic-filters" title="print/foomatic-filters">print/foomatic-filters</a> and its database and engine in <a class="port" href="http://freshports.org/print/foomatic-db" title="print/foomatic-db">print/foomatic-db</a> and <a class="port" href="http://freshports.org/print/foomatic-db-engine" title="print/foomatic-db-engine">print/foomatic-db-engine</a>, respectively. I find the CUPS-PDF virtual printer in <a class="port" href="http://freshports.org/print/cups-pdf" title="print/cups-pdf">print/cups-pdf</a> very useful as well.</p>

<p>Enable CUPS once installed:</p>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Disable line printer daemon since we have CUPS
</li><li>lpd_enable="NO"
</li><li>
</li><li># Enable CUPS
</li><li>cupsd_enable="YES"
</li></ol></code></pre></div></figure>

<p>Add local users to the <code>cups</code> group if you want them to be able to print.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>pw usermod root -G cups
</li><li>pw usermod nicole -G cups
</li></ol></code></pre></div></figure>

<p>Start the CUPS service with <code>service cupsd start</code> and you should be able to access its web configuration UI at <a href="http://localhost:631/">http://localhost:631/</a> in your web browser. It may prompt you for your root password to write the config files in <code>/usr/local/etc/cups</code>. Most full desktop environments include a GUI to control CUPS and add printers, but the web interface is available in any of them.</p>

<p><a href="https://cooltrainer.org/images/original/freebsd-cups-printer.png"><picture>
    <source srcset="/images/generated/freebsd-cups-printer-950by646-42926c.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd-cups-printer-950by646-42926c.png">
    <source srcset="/images/generated/freebsd-cups-printer-950by646-42926c.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd-cups-printer-800by544-42926c.png" media="(min-width: 850px)">
    <source srcset="/images/generated/freebsd-cups-printer-900by612-42926c.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd-cups-printer-600by408-42926c.png" media="(min-width: 620px)">
    <source srcset="/images/generated/freebsd-cups-printer-450by306-42926c.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd-cups-printer-300by204-42926c.png" media="">
    <img srcset="/images/generated/freebsd-cups-printer-950by646-42926c.png" itemprop="image" title="My printer" alt="A screenshot of the CUPS web interface showing my Brother HL-2170W printer configuration.">
  </picture>
</a></p>

<p>The web interfaces’ built-in documentation can help you configure different models of printer, specifically the <a href="http://localhost:631/help/network.html?TOPIC=Getting+Started&amp;QUERY=#PROTOCOLS">Network Protocols Supported by CUPS</a> and <a href="http://localhost:631/help/network.html?TOPIC=Getting+Started&amp;QUERY=#URI">Common Network Printer URIs</a> sections.</p>

<h3 id="smrt">S.M.R.T.</h3>

<p><a class="port" href="http://freshports.org/sysutils/smartmontools" title="sysutils/smartmontools">sysutils/smartmontools</a> installs <code>smartd</code> and <code>smartctl</code>, a daemon and utility for checking the <a href="https://en.wikipedia.org/wiki/S.M.A.R.T.">S.M.A.R.T.</a> status of your local disks.</p>

<p>Enable the sample <code>smartd.conf</code>. It contains one directive, <code>DEVICESCAN</code>, that causes smartd to scan all attached drives.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>cp /usr/local/etc/smartd.conf.sample /usr/local/etc/smartd.conf
</li><li>echo 'smartd_enable="YES"' &gt;&gt; /etc/rc.conf
</li><li>service smartd start
</li></ol></code></pre></div></figure>

<p>You can check the S.M.A.R.T. status of a drive directly with <code>smartctl</code> as root. The <code>-H</code> flag will show basic pass or fail health status, and the <code>-a</code> flag will show everything.</p>

<figure class="code"><figcaption><span> smartctl -H /dev/ada0 </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>smartctl 6.2 2014-02-18 r3874 [FreeBSD 10.0-RELEASE-p2 amd64] (local build)
</li><li>Copyright (C) 2002-13, Bruce Allen, Christian Franke, www.smartmontools.org
</li><li>
</li><li>=== START OF READ SMART DATA SECTION ===
</li><li>SMART overall-health self-assessment test result: PASSED
</li></ol></code></pre></div></figure>

<h3 id="java">Java</h3>

<p>FreeBSD has several available Java providers, including <a href="http://openjdk.java.net/">OpenJDK</a> and <s>Sun's</s> Oracle’s JDK. I recommend the newest OpenJDK for most people. It’s far easier to install than the binary Oracle JRE which requires logging in to a web page, agreeing to the license, and manually downloading the distfile for Ports. At the time of this writing the newest OpenJDK is <a class="port" href="http://freshports.org/java/openjdk8" title="java/openjdk8">java/openjdk8</a>. OpenJDK 6 and 7 are available as well if you have software that doesn’t run on Java 8.</p>

<p>If you need a Java browser plugin you can build and install <a class="port" href="http://freshports.org/java/icedtea-web" title="java/icedtea-web">java/icedtea-web</a> once a Java provider is available.</p>

<h3 id="webcams-and-dvb">Webcams and DVB</h3>

<p>Most USB webcams and many DVB tuners are supported by <a class="port" href="http://freshports.org/multimedia/webcamd" title="multimedia/webcamd">multimedia/webcamd</a>, and webcamd depends on the userland character device driver in <a class="port" href="http://freshports.org/multimedia/cuse4bsd-kmod" title="multimedia/cuse4bsd-kmod">multimedia/cuse4bsd-kmod</a>. Install them, then enable them in <code>rc.conf</code> and <code>loader.conf</code>.</p>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Webcam daemon
</li><li>webcamd_enable="YES"
</li></ol></code></pre></div></figure>

<figure class="code"><figcaption><span> /boot/loader.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Userland character device driver for webcams
</li><li>cuse4bsd_load="YES"
</li></ol></code></pre></div></figure>

<p>You can use your camera device with <a href="http://raaf.atspace.org/">pwcview</a> available in <a class="port" href="http://freshports.org/multimedia/pwcview" title="multimedia/pwcview">multimedia/pwcview</a> or with <a href="https://wiki.gnome.org/Apps/Cheese">Cheese</a> in <a class="port" href="http://freshports.org/multimedia/cheese" title="multimedia/cheese">multimedia/cheese</a>. Cheese provides a nice interface similar to Apple’s Photobooth on OS X, but it has a heavy GNOME library dependency some may not want on their systems.</p>

<h3 id="ibus">IBus</h3>

<p><a href="https://code.google.com/p/ibus/">IBus</a> is a modern IME for Unix-like systems, allowing one to input <a href="https://en.wikipedia.org/wiki/CJK_characters">CJK</a> languages. Install the main IME from <a class="port" href="http://freshports.org/textproc/ibus" title="textproc/ibus">textproc/ibus</a> as well as QT application support from <a class="port" href="http://freshports.org/textproc/ibus-qt" title="textproc/ibus-qt">textproc/ibus-qt</a>.</p>

<p>You’ll need one or more input methods once the IME itself is installed. Ports of interest:</p>

<ul>
  <li><a class="port" href="http://freshports.org/chinese/ibus-chewing" title="chinese/ibus-chewing">chinese/ibus-chewing</a> - Chewing engine for IBus</li>
  <li><a class="port" href="http://freshports.org/chinese/ibus-pinyin" title="chinese/ibus-pinyin">chinese/ibus-pinyin</a> - The PinYin input method</li>
  <li><a class="port" href="http://freshports.org/japanese/ibus-anthy" title="japanese/ibus-anthy">japanese/ibus-anthy</a> - Anthy engine for IBus</li>
  <li><a class="port" href="http://freshports.org/japanese/ibus-mozc" title="japanese/ibus-mozc">japanese/ibus-mozc</a> - Mozc engine for IBus</li>
  <li><a class="port" href="http://freshports.org/japanese/ibus-skk" title="japanese/ibus-skk">japanese/ibus-skk</a> - SKK engine for IBus</li>
  <li><a class="port" href="http://freshports.org/korean/ibus-hangul" title="korean/ibus-hangul">korean/ibus-hangul</a> - Hangul engine for IBus</li>
  <li><a class="port" href="http://freshports.org/textproc/ibus-kmfl" title="textproc/ibus-kmfl">textproc/ibus-kmfl</a> - KMFL IMEngine for IBus framework</li>
  <li><a class="port" href="http://freshports.org/textproc/ibus-m17n" title="textproc/ibus-m17n">textproc/ibus-m17n</a> - The m17n IMEngine for IBus framework</li>
  <li><a class="port" href="http://freshports.org/textproc/ibus-table" title="textproc/ibus-table">textproc/ibus-table</a> - Table based IM framework for IBus</li>
</ul>

<p>Heavyweight desktop environments like GNOME or KDE will let you configure the input method graphically. In GNOME 2 and MATE, for example, you can open the IBus preferences from the Settings &gt; Preferences menu. KDE/Qt users can enable it as the default IME in <code>qtconfig-qt4</code>.</p>

<p>Lightweight window manager users like me can start it in <code>.xinitrc</code>:</p>

<figure class="code"><figcaption><span> ~/.xinitrc </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>export XMODIFIERS="@im=ibus"
</li><li>export GTK_IM_MODULE="ibus"
</li><li>export QT_IM_MODULE="ibus"
</li><li>exec ibus-daemon -d -x &amp;
</li></ol></code></pre></div></figure>

<p>Now run any GTK or QT application, press your keyboard shortcut to switch input methods, and test it out.</p>

<p><a href="https://cooltrainer.org/images/original/IBusmethods.png"><img src="./A FreeBSD 10 Desktop How-to » Cooltrainer.org_files/IBusmethods.png" title="Available IBus methods." alt="IBus preferences window showing available input methods."></a>
<a href="https://cooltrainer.org/images/original/GVim-nihongo.png"><img src="./A FreeBSD 10 Desktop How-to » Cooltrainer.org_files/GVim-nihongo.png" title="Vim krew" alt="GVim testing IBus input with Japanese."></a></p>

<h3 id="linuxulator">Linuxulator</h3>

<p>FreeBSD’s <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=linux&amp;ektion=&amp;manpath=FreeBSD%2010.0-RELEASE" title="man linux from FreeBSD 10.0-RELEASE">Linuxulator</a> allows it to run Linux application binaries using <a href="http://www.leidinger.net/blog/2010/09/28/the-freebsd-linuxulator-explained-for-users/">system call translation</a>. Desktop users will find it useful for running the handful of proprietary but necessary programs that are available for Linux but not for FreeBSD, such as <a href="http://www.adobe.com/support/security/#flashplayer">Adobe Flash Player</a>.</p>

<p>Install the Linux base distribution from Ports. As I write this the default base distribution is <a class="port" href="http://freshports.org/emulators/linux_base-c6" title="emulators/linux_base-c6">emulators/linux_base-c6</a>, based on CentOS 6, replacing the old Fedora 10 based <a class="port" href="http://freshports.org/emulators/linux_base-f10" title="emulators/linux_base-f10">emulators/linux_base-f10</a>. Unless you need to use a particular <code>f10</code>-only application (like <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#skype">Skype</a>) you should prefer the modern base, overriding the default in <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=make.conf&amp;ektion=&amp;manpath=" title="man make.conf">make.conf</a> and switching to the necessary kernel version in <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=sysctl.conf&amp;ektion=&amp;manpath=" title="man sysctl.conf">sysctl.conf</a> before doing the installation:</p>

<figure class="code"><figcaption><span> /etc/make.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>OVERRIDE_LINUX_BASE_PORT=c6
</li><li>OVERRIDE_LINUX_NONBASE_PORTS=c6
</li></ol></code></pre></div></figure>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>echo 'compat.linux.osrelease=2.6.18' &gt;&gt; /etc/sysctl.conf
</li><li>sysctl -f /etc/sysctl.conf
</li></ol></code></pre></div></figure>

<p>Once your chosen <code>linux_base</code> installed, tell your system to load the <code>linux</code> kernel module at boot.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>echo 'linux_load="YES"' &gt;&gt; /boot/loader.conf
</li></ol></code></pre></div></figure>

<p>Mount the <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=linprocfs&amp;ektion=&amp;manpath=" title="man linprocfs">linprocfs</a> virtual filesystems for compatibility with GNOME and other programs requiring them.</p>

<figure class="code"><figcaption><span> /etc/fstab </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>linproc   /compat/linux/proc   linprocfs,auto,late   rw   0  0
</li></ol></code></pre></div></figure>

<p><a href="https://cooltrainer.org/images/original/freebsd-linuxulator-sc3u.png"><picture>
    <source srcset="/images/generated/freebsd-linuxulator-sc3u-1280by1044-fce845.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd-linuxulator-sc3u-950by775-fce845.png">
    <source srcset="/images/generated/freebsd-linuxulator-sc3u-1200by979-fce845.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd-linuxulator-sc3u-800by653-fce845.png" media="(min-width: 850px)">
    <source srcset="/images/generated/freebsd-linuxulator-sc3u-900by734-fce845.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd-linuxulator-sc3u-600by489-fce845.png" media="(min-width: 620px)">
    <source srcset="/images/generated/freebsd-linuxulator-sc3u-450by367-fce845.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd-linuxulator-sc3u-300by245-fce845.png" media="">
    <img srcset="/images/generated/freebsd-linuxulator-sc3u-950by775-fce845.png" itemprop="image" title="Reticulating Splines..." alt="A screenshot of the Loki Software port of Simcity 3000 Unlimited running on FreeBSD via the Linuxulator.">
  </picture>
</a></p>

<p>Besides proprietary garbageware like Flash Player I also use Linuxulator along with the <a href="http://www.swanson.ukfsn.org/loki/">Loki compatibility library package</a> to run <a href="https://en.wikipedia.org/wiki/Loki_Software">Loki Software</a>’s Linux ports of some of the best PC games ever made, like Simcity 3000 Unlimited.</p>

<h3 id="wine">Wine</h3>

<p>Wine is a free implementation of the Win32 API capable of running real Windows applications on Unix-like systems. It’s available from <a class="port" href="http://freshports.org/emulators/wine" title="emulators/wine">emulators/wine</a> or <a class="port" href="http://freshports.org/emulators/wine-devel" title="emulators/wine-devel">emulators/wine-devel</a>, containing the latest stable and unstable versions respectively. The optional <a href="http://wiki.winehq.org/Gecko">Gecko</a> support is an <code>mshtml.dll</code> replacement that will allow Windows programs to embed web pages using the Mozilla engine. The optional <a href="http://wiki.winehq.org/Mono">Mono</a> will let Wine run Windows programs written in versions 1.x or 2.0 of the <a href="http://en.wikipedia.org/wiki/.NET_Framework">.NET Framework</a> without using the proprietary .NET runtime. You can also download <a href="http://wiki.winehq.org/winetricks">winetricks</a>, a script containing Wine installation recipes for popular software, and you may find a Wine GUI such as <a class="port" href="http://freshports.org/emulators/swine" title="emulators/swine">emulators/swine</a> useful for maintaining separate Wine prefixes.</p>

<p>FreeBSD currently lacks the ability to install 32-bit ports on a 64-bit system, normally precluding an <code>amd64</code> user from installing a 32-bit Wine capable of running 32-bit Windows applications. As a workaround, David Naylor maintains <a href="https://wiki.freebsd.org/i386-Wine">Wine32 packages for FreeBSD amd64</a>. You can install them from <a class="port" href="http://freshports.org/emulators/i386-wine" title="emulators/i386-wine">emulators/i386-wine</a> or <a class="port" href="http://freshports.org/emulators/i386-wine-devel" title="emulators/i386-wine-devel">emulators/i386-wine-devel</a>.</p>

<p>If you plan to use Wine to run <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#browser-plugins">browser plugins</a>, use the <code>compholio</code>-patched version of wine in <a class="port" href="http://freshports.org/emulators/wine-compholio" title="emulators/wine-compholio">emulators/wine-compholio</a> or <a class="port" href="http://freshports.org/emulators/i386-wine-compholio" title="emulators/i386-wine-compholio">emulators/i386-wine-compholio</a> instead.</p>

<p><a href="https://cooltrainer.org/images/original/freebsd10-freedom-planet.png"><picture>
    <source srcset="/images/generated/freebsd10-freedom-planet-854by502-5f8cb2.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-freedom-planet-854by502-5f8cb2.png">
    <source srcset="/images/generated/freebsd10-freedom-planet-854by502-5f8cb2.png" media="(min-width: 850px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 850px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-freedom-planet-800by470-5f8cb2.png" media="(min-width: 850px)">
    <source srcset="/images/generated/freebsd10-freedom-planet-854by502-5f8cb2.png" media="(min-width: 620px) and (-webkit-min-device-pixel-ratio: 1.5), (min-width: 620px) and (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-freedom-planet-600by353-5f8cb2.png" media="(min-width: 620px)">
    <source srcset="/images/generated/freebsd10-freedom-planet-450by265-5f8cb2.png" media="(-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi)">
    <source srcset="/images/generated/freebsd10-freedom-planet-300by176-5f8cb2.png" media="">
    <img srcset="/images/generated/freebsd10-freedom-planet-854by502-5f8cb2.png" itemprop="image" title="Original game do not steal" alt="FreeBSD 10 playing GalaxyTrail&#39;s Freedom Planet via Wine.">
  </picture>
</a></p>

<p>Wine is very impressively-compatible these days. I use it to run a lot of games from <a href="https://www.humblebundle.com/store">Humble Store</a> and <a href="http://www.gog.com/">GOG</a> so I don’t have to fire up a Windows computer or VM. Wine is so good it is used to create the Linux versions of many of these titles, such as <a href="http://freedomplanet.galaxytrail.com/">Freedom Planet</a>, and in that case it’s a lot easier to run the same executable in FreeBSD Wine than to try and get the Linux Wine binaries running via <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#linuxulator">Linuxulator</a>.</p>

<p>If every <code>wine</code> command fails with <code>ELF interpreter /libexec/ld-elf.so.1 not found</code> your 64-bit system is missing the 32-bit libraries necessary for Wine. You’ll need to install them. From the <a href="ftp://ftp.freebsd.org/pub/FreeBSD/releases/amd64/">releases FTP</a>, grab the <code>lib32.txz</code> matching your version of the OS and extract it either as root or with sudo to the root of your filesystem to install. The archive contains a full directory hierarchy so all the files will end up in the right place.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>fetch ftp://ftp.freebsd.org/pub/FreeBSD/releases/amd64/10.1-RELEASE/lib32.txz
</li><li>tar xfp lib32.txz -C /
</li></ol></code></pre></div></figure>

<h3 id="browser-plugins">Browser Plugins</h3>

<p><a href="http://www.adobe.com/support/security/#flashplayer">Adobe Flash Player</a> is not released for FreeBSD but is usable on FreeBSD i386 and amd64 through your choice of two wrappers.</p>

<p>The 32-bit Linux version of the Flash plugin can be installed via <a class="port" href="http://freshports.org/www/linux-c6-flashplugin11" title="www/linux-c6-flashplugin11">www/linux-c6-flashplugin11</a> or <a class="port" href="http://freshports.org/www/linux-f10-flashplugin11" title="www/linux-f10-flashplugin11">www/linux-f10-flashplugin11</a>, executed through <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#linuxulator">Linuxulator</a>, and adapted to 32-bit or 64-bit native browsers with <a class="port" href="http://freshports.org/www/nspluginwrapper" title="www/nspluginwrapper">www/nspluginwrapper</a>, though it is important to note Adobe <a href="http://www.zdnet.com/blog/open-source/adobe-abandons-linux/10418">dropped support</a> for the NPAPI Linux version of Flash with version 11.2 back in 2012. They left development up to Google who only release a <a href="https://en.wikipedia.org/wiki/Google_Native_Client#Pepper">PPAPI</a> version as part of their proprietary Chrome browser bundle, something that isn’t even available for FreeBSD. Even Chromium will be unable to use NPAPI Flash after 2014 as Google <a href="http://www.chromium.org/developers/npapi-deprecation">deprecates and removes NPAPI</a> support from Chromium and Chrome starting in version 32. For now you can still use it in Firefox and other NPAPI browsers, but I think it’s just time to say goodbye to this old version or to Flash in general if you can help it.</p>

<p>To use nspluginwrapper, make sure <code>linprocfs</code> is mounted and execute <code>nspluginwrapper -v -a -i</code> as your normal user to locate and enable the Linux Flash plugin. <code>-a</code> automatically finds available plugins and <code>-i</code> installs them. It’s important to remember it makes a copy of the Flash library in your home directory when you do this, so every time you update the version of Flash installed through Ports you need to remove your local cory with <code>nspluginwrapper -v -a -r</code> and install the new one with <code>nspluginwrapper -v -a -i</code>. Adobe promised security updates for the NPAPI Flash Player through 2017, and if history is any indication <a href="http://www.cvedetails.com/product/6761/Adobe-Flash-Player.html?vendor_id=53">you’re going to need them</a>.</p>

<p>A newer and arguably better solution is <a class="port" href="http://freshports.org/emulators/pipelight" title="emulators/pipelight">emulators/pipelight</a>, a <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#wine">Wine</a>-based wrapper for Windows browsers plugins. It supports the very newest version of Flash, freeing us from the limitations of 11.2, and also supports Shockwave, Silverlight, Unity, and more. It requires a special patched version of Wine, <a class="port" href="http://freshports.org/emulators/wine-compholio" title="emulators/wine-compholio">emulators/wine-compholio</a> or <a class="port" href="http://freshports.org/emulators/i386-wine-compholio" title="emulators/i386-wine-compholio">emulators/i386-wine-compholio</a>. Once installed, activate plugins as root.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>pipelight-plugin --create-mozilla-plugins
</li><li>pipelight-plugin --enable flash
</li></ol></code></pre></div></figure>

<p>Silverlight is available as well and can allow you to watch DRMed NetFlix content via your browser on FreeBSD. I have no experience using it since I don’t buy DRMed streaming media subscriptions, but it can be installed the same way.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>pipelight-plugin --enable silverlight5.1
</li></ol></code></pre></div></figure>

<p>Heed <a class="port" href="http://freshports.org/www/pipelight" title="www/pipelight">www/pipelight</a>’s <a href="https://svnweb.freebsd.org/ports/head/emulators/pipelight/pkg-message?view=log">pkg-message</a> warning about Silverlight DRM if you have a ZFS-based system:</p>

<blockquote>
  <p>For users running with ZFS on root, watching DRM protected content
requires extensive xattr support. If you run into issues with DRM failing,
you can use the “pipelight-mkufs” command to create a UFS formatted ZVOL
mounted on your users ~/.wine-pipelight directory.</p>
</blockquote>

<p>Other plugins are enabled the same way, and the list of available plugins can be seen in <code>pipelight-plugin --help</code>.</p>

<h3 id="virtualization">Virtualization</h3>

<p>It’s pretty common to virtualize another operating system on your computer, possibly to run a proprietary program or access a proprietary office groupware system. Whatever the reason, it’s easy to accomplish on FreeBSD.</p>

<p><a href="https://cooltrainer.org/images/original/freebsd10-vboxmanage.png"><img class="right" src="./A FreeBSD 10 Desktop How-to » Cooltrainer.org_files/freebsd10-vboxmanage.png" title="Oracle is bad." alt="VirtualBox management application"></a></p>

<p>FreeBSD 10 has a new built-in hypervisor known as <a href="http://bhyve.org/">bhyve</a> capable of running FreeBSD natively and other operating systems via <a class="port" href="http://freshports.org/sysutils/grub2-bhyve" title="sysutils/grub2-bhyve">sysutils/grub2-bhyve</a>. At the moment it only implements a serial console to access the guest systems which is fine for a server OS but probably not what you want.</p>

<p>Alternatively, VirtualBox open source edition is available at <a class="port" href="http://freshports.org/emulators/virtualbox-ose" title="emulators/virtualbox-ose">emulators/virtualbox-ose</a>. Build it with Guest Additions enabled for the best experience virtualizing Windows and Linux.</p>

<p>Once it’s installed, configure <code>loader.conf</code> to load the VirtualBox kernel module and configure <code>rc.conf</code> to start VirtualBox bridged networking.</p>

<figure class="code"><figcaption><span> /boot/loader.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>vboxdrv_load="YES"
</li></ol></code></pre></div></figure>

<figure class="code"><figcaption><span> /etc/rc.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>vboxnet_enable="YES"
</li></ol></code></pre></div></figure>

<figure class="code"><figcaption><span> /etc/devfs.conf </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li># Allow VirtualBox network access
</li><li>own     vboxnetctl      root:vboxusers
</li><li>perm    vboxnetctl      0660
</li></ol></code></pre></div></figure>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>pw usermod nicole -G vboxusers
</li></ol></code></pre></div></figure>

<h3 id="skype">Skype</h3>

<p>Skype is bad, proprietary software that doesn’t value your freedom. Use <a class="port" href="http://freshports.org/audio/mumble" title="audio/mumble">audio/mumble</a> or <a class="port" href="http://freshports.org/net-im/ekiga" title="net-im/ekiga">net-im/ekiga</a> instead if you can. If you still wish to use Skype, make sure you have <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#linuxulator">Linuxulator</a> enabled and install <a class="port" href="http://freshports.org/net-im/skype" title="net-im/skype">net-im/skype</a>.</p>

<p>Version 2.1 of Skype’s Linux client dropped support for OSS, found in FreeBSD as the default sound API. Thanks to this, Skype 2.0 persisted for years as the version in Ports. With the introduction of an <a href="http://lists.freebsd.org/pipermail/svn-src-all/2011-May/038480.html">ALSA compatibility shim in FreeBSD 8.3 and 9.0</a> and <a class="port" href="http://freshports.org/audio/linux-f10-alsa-plugins-oss" title="audio/linux-f10-alsa-plugins-oss">audio/linux-f10-alsa-plugins-oss</a>, we can use the newer ALSA-only Skype client.</p>

<p>There is a newer Skype client available as <a class="port" href="http://freshports.org/net-im/skype4" title="net-im/skype4">net-im/skype4</a> that supports the CentOS 6 linux_base, but that version is not usable on FreeBSD 10.x due to <a href="https://reviews.freebsd.org/D907">missing syscalls</a> in that branch’s Linuxulator.</p>

<p>The ALSA client, unlike the old OSS client, requires some explicit configuration to use our sound devices. They must be defined manually in <code>/compat/linux/etc/alsa/pcm/pcm-oss.conf</code>, the configuration file of alsa-plugins-oss.</p>

<p>In this example, I enable <code>pcm6</code>/<code>dsp6</code> for audio output, and <code>pcm8</code>/<code>dsp8</code>, a USB webcam, as a microphone source.</p>

<figure class="code"><figcaption><span> /compat/linux/etc/alsa/pcm/pcm-oss.conf </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>pcm.oss8 {
</li><li>	type oss
</li><li>	device /dev/dsp8
</li><li>	hint {
</li><li>		description "Open Sound System - Webcam"
</li><li>	}
</li><li>}
</li><li>
</li><li>ctl.oss8 {
</li><li>	type oss
</li><li>	device /dev/mixer8
</li><li>	hint {
</li><li>		description "Open Sound System - Webcam"
</li><li>	}
</li><li>}
</li><li>
</li><li>pcm.oss6 {
</li><li>	type oss
</li><li>	device /dev/dsp6
</li><li>	hint {
</li><li>		description "Open Sound System - S/PDIF"
</li><li>	}
</li><li>}
</li><li>
</li><li>ctl.oss6 {
</li><li>	type oss
</li><li>	device /dev/mixer6
</li><li>	hint {
</li><li>		description "Open Sound System - S/PDIF"
</li><li>	}
</li><li>}
</li></ol></code></pre></div></figure>

<p>The microphone volume can be controlled by invoking the mixer of your chosen recording device. Let’s raise the microphone volume now from 0% to 75%.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>mixer -f /dev/mixer8 mic 75
</li></ol></code></pre></div></figure>

<h3 id="iso-8601">ISO-8601</h3>

<p>This is personal preference, but I also set my <code>LC_TIME</code> environment variable to the <code>en_DK</code> faux-locale for <a href="http://www.iso.org/iso/support/faqs/faqs_widely_used_standards/widely_used_standards_other/date_and_time_format.htm">ISO-8601</a> date formats instead of the ridiculous American standard.</p>

<p>Quick, what date is 6/5/12? Oh, it’s 2012-06-05, of course.</p>

<p>The locale isn’t included with the FreeBSD base system as it is in many Linux distributions, but it’s <a href="http://ivoras.net/blog/tree/2010-12-20.the-wonderful-en_dk-locale.html">available</a> from Ivan Voras’ blog.</p>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>tar -C /usr/share/locale -zxf /path/to/your/en_DK.UTF-8.tgz
</li></ol></code></pre></div></figure>

<p>Enable it in the login database and <code>/etc/profile</code>.</p>

<figure class="code"><figcaption><span> /etc/login.conf </span></figcaption><div class="highlight"><pre><code class="diff"><ol><li>@@ -46,7 +46,8 @@
</li><li> 	\:ignoretime@:\
</li><li> 	\:umask=022:\
</li><li> 	\:charset=UTF-8:\
</li><li>-	\:lang=en_US.UTF-8:
</li><li>+	\:lang=en_US.UTF-8:\
</li><li>+	\:setenv=LC_TIME=en_DK.UTF-8:
</li></ol></code></pre></div></figure>

<figure class="code"><figcaption><span> </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>cap_mkdb /etc/login.conf
</li></ol></code></pre></div></figure>

<figure class="code"><figcaption><span> /etc/profile </span></figcaption><div class="highlight"><pre><code class="bash"><ol><li>LC_TIME=en_DK.UTF-8; export LC_TIME
</li></ol></code></pre></div></figure>

<h2 id="upgrade-notes">Upgrade Notes</h2>

<p>This guide assumes you will track the newest <code>STABLE</code> branch, upgrading to new stable branches at the initial <code>.0</code> release. That’s not a thing I would ever recommend with OS X, but I haven’t been burned by a new major FreeBSD version yet. This section notes things you need to know to keep your system in top shape when upgrading.</p>

<h3 id="x-to-100">9.x to 10.0</h3>

<p>If you are updating from 9.x to 10.0 or higher, run <code>pkg2ng</code> after rebooting into the new OS. This conversion script will convert the list of installed packages from the format used by the old <code>pkg_</code> tools to the format used by pkgng, the new binary package manager. If you neglect this step the OS will think you have no packages installed and your life will become very confusing.</p>

<h3 id="to-101">10.0 to 10.1</h3>

<p><code>WITH_NEW_XORG</code> is no longer a thing. The old version is gone.</p>

<p><a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=vt&amp;ektion=&amp;manpath=" title="man vt">vt</a> is a new console driver designed to replace <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=syscons&amp;ektion=&amp;manpath=" title="man syscons">syscons</a>. It offers Unicode and graphics support using kernel modesetting. This is necessary to support UEFI. A loader variable <code>kern.vty</code> can select between <code>vt</code> and <code>sc</code>.</p>

<figure class="code"><figcaption><span> /boot/loader.conf </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>kern.vty=vt
</li></ol></code></pre></div></figure>

<p>It will default to graphics mode but can be configured to use a text mode instead if necessary.</p>

<figure class="code"><figcaption><span> /boot/loader.conf </span></figcaption><div class="highlight"><pre><code class="text"><ol><li>hw.vga.textmode=1
</li></ol></code></pre></div></figure>

<h2 id="history">History</h2>

<h3>2014-12-26</h3>
<ul>
  <li>Whoops, I missed that <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#gnome-3">GNOME 3</a> and <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#cinnamon">Cinnamon</a> finally made it to the official tree!</li>
  <li>CentOS 6 is the default Linux base.</li>
  <li><a href="http://freedesktop.org/wiki/Software/hal/">HAL</a> is mostly deprecated throughout the Free desktop world. Now that X.org no longer uses it by default I stopped recommending its use.</li>
</ul>

<h3>2014-11-29</h3>
<ul>
  <li>Cover changes in 10.1 like installer changes, UEFI support, and <a class="man" href="http://www.freebsd.org/cgi/man.cgi?query=vt&amp;ektion=&amp;manpath=" title="man vt">vt</a>.</li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#upgrade-notes">Upgrade notes</a> moved to their own section.</li>
  <li>Cover CentOS 6 <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#linuxulator">Linuxulator</a>.</li>
  <li>Cover Pipelight for <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#browser-plugins">browser plugins</a>.</li>
</ul>

<h3>2014-07-27</h3>
<ul>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#starting-x">SLiM</a> wants <code>sessiondir</code> now, not enumerated <code>sessions</code>.</li>
  <li>Update and expand <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#wine">Wine</a> section</li>
  <li>TeXLive is now the default TeX provider, so no need to specify it over teTeX.</li>
</ul>

<h3>2014-07-17</h3>
<ul>
  <li>Section re-organization</li>
  <li>I stopped using or recommending GNOME</li>
  <li>Cover <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#firewall">firewalling</a></li>
  <li>Add a whole <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#desktop-environments">desktop environments</a> section.</li>
  <li>Cover pkgng</li>
  <li>Cover <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#new-installations">installation</a> instead of linking to a ZFS installation guide now that bsdinstall supports it</li>
  <li>Stop recommending <code>blf</code> in <code>login.conf</code> because the default is <code>sha512</code> now instead of <code>md5</code></li>
  <li><code>KDE4_PREFIX</code> is <code>${LOCALBASE}</code> by default now</li>
  <li><code>WITHOUT_NOUVEAU</code> is gone</li>
  <li>Use TeX Live</li>
  <li>FUSE is built-in now</li>
  <li>Add additional device paths for permissions</li>
  <li>Add <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#virtualization">virtualization section</a></li>
  <li>Wine packages are available in Ports now</li>
</ul>

<h3>2012-06-06</h3>
<ul>
  <li>Re-arrange sections</li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#java">Java</a></li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#smrt">S.M.A.R.T.</a></li>
  <li>Network time</li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#enable-networking">WiFi configuration example</a></li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#compiz-fusion">Compiz-Fusion</a></li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#ibus">IBus</a></li>
  <li>Table of contents!</li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#xorg-and-radeon">Radeon</a></li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#theming">Theming</a></li>
  <li><a href="https://cooltrainer.org/a-freebsd-desktop-howto/#iso-8601">ISO-8601</a></li>
</ul>

<h3>2012-01-02</h3>
<ul>
  <li>Initial article</li>
</ul>

                </div>
            </div>
            <div id="footer">
                <div id="social-share">
                    <a href="https://www.facebook.com/sharer.php?s=100&amp;p%5Burl%5D=https://cooltrainer.org/a-freebsd-desktop-howto/&amp;p%5Bimages%5D%5B0%5D=https://cooltrainer.org/images/cooltrainer-fb.png&amp;p%5Btitle%5D=A%20FreeBSD%2010%20Desktop%20How-to&amp;p%5Bsummary%5D=A%20guide%20to%20a%20full-featured%20modern%20desktop%20FreeBSD%20installation" title="Share to Facebook"></a>
                    <a href="https://twitter.com/intent/tweet?url=https://cooltrainer.org/a-freebsd-desktop-howto/&amp;text=A%20FreeBSD%2010%20Desktop%20How-to&amp;via=okeeblow" title="Share to Twitter"></a>
                    <a href="http://reddit.com/submit?url=https://cooltrainer.org/a-freebsd-desktop-howto/&amp;title=A%20FreeBSD%2010%20Desktop%20How-to" title="Post to Reddit"></a>
                    <a href="https://cooltrainer.org/feed.xml" title="Cooltrainer Post Feed"></a>
                </div>

                <p>Always seeking to survive and flourish.</p>
                <p>--EOF--</p>

            </div>
        </div>
    

<audio controls="controls" style="display: none;"></audio><div id="ambiance-notification"></div><div id="blue_light_filter" style="width: 100%; height: 100%; z-index: 2147483646; transition: -webkit-transform 10s ease-in-out; position: fixed !important; left: 0px !important; bottom: 0px !important; overflow: hidden !important; pointer-events: none !important; background: rgb(214, 107, 0); opacity: 0.2;"></div><div id="blf_status" style="position: fixed !important; width: 105px; height: 27px;	color: white; text-shadow: 1px 2px 4px #000; font-size: 20px;	font-weight: bold; background-color: blue; z-index: 2147483647;	right: 0px; top: 0px; display:none; font-family: arial,sans-serif; text-align: center;"></div></body><style type="text/css">#yddContainer{display:block;font-family:Microsoft YaHei;position:relative;width:100%;height:100%;top:-4px;left:-4px;font-size:12px;border:1px solid}#yddTop{display:block;height:22px}#yddTopBorderlr{display:block;position:static;height:17px;padding:2px 28px;line-height:17px;font-size:12px;color:#5079bb;font-weight:bold;border-style:none solid;border-width:1px}#yddTopBorderlr .ydd-sp{position:absolute;top:2px;height:0;overflow:hidden}.ydd-icon{left:5px;width:17px;padding:0px 0px 0px 0px;padding-top:17px;background-position:-16px -44px}.ydd-close{right:5px;width:16px;padding-top:16px;background-position:left -44px}#yddKeyTitle{float:left;text-decoration:none}#yddMiddle{display:block;margin-bottom:10px}.ydd-tabs{display:block;margin:5px 0;padding:0 5px;height:18px;border-bottom:1px solid}.ydd-tab{display:block;float:left;height:18px;margin:0 5px -1px 0;padding:0 4px;line-height:18px;border:1px solid;border-bottom:none}.ydd-trans-container{display:block;line-height:160%}.ydd-trans-container a{text-decoration:none;}#yddBottom{position:absolute;bottom:0;left:0;width:100%;height:22px;line-height:22px;overflow:hidden;background-position:left -22px}.ydd-padding010{padding:0 10px}#yddWrapper{color:#252525;z-index:10001;background:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ab20.png);}#yddContainer{background:#fff;border-color:#4b7598}#yddTopBorderlr{border-color:#f0f8fc}#yddWrapper .ydd-sp{background-image:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ydd-sprite.png)}#yddWrapper a,#yddWrapper a:hover,#yddWrapper a:visited{color:#50799b}#yddWrapper .ydd-tabs{color:#959595}.ydd-tabs,.ydd-tab{background:#fff;border-color:#d5e7f3}#yddBottom{color:#363636}#yddWrapper{min-width:250px;max-width:400px;}</style></html>